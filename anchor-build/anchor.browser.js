(()=>{var lw=Object.create;var ks=Object.defineProperty;var fw=Object.getOwnPropertyDescriptor;var hw=Object.getOwnPropertyNames;var dw=Object.getPrototypeOf,pw=Object.prototype.hasOwnProperty;var yw=(n,e,t)=>e in n?ks(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var rn=(n,e)=>()=>(n&&(e=n(n=0)),e);var Ee=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Td=(n,e)=>{for(var t in e)ks(n,t,{get:e[t],enumerable:!0})},Od=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of hw(e))!pw.call(n,i)&&i!==t&&ks(n,i,{get:()=>e[i],enumerable:!(r=fw(e,i))||r.enumerable});return n};var lr=(n,e,t)=>(t=n!=null?lw(dw(n)):{},Od(e||!n||!n.__esModule?ks(t,"default",{value:n,enumerable:!0}):t,n)),Nd=n=>Od(ks({},"__esModule",{value:!0}),n);var Ot=(n,e,t)=>yw(n,typeof e!="symbol"?e+"":e,t);var Md=Ee(jo=>{"use strict";jo.byteLength=mw;jo.toByteArray=bw;jo.fromByteArray=Aw;var Hn=[],xn=[],gw=typeof Uint8Array<"u"?Uint8Array:Array,zu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(si=0,Bd=zu.length;si<Bd;++si)Hn[si]=zu[si],xn[zu.charCodeAt(si)]=si;var si,Bd;xn[45]=62;xn[95]=63;function Cd(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function mw(n){var e=Cd(n),t=e[0],r=e[1];return(t+r)*3/4-r}function _w(n,e,t){return(e+t)*3/4-t}function bw(n){var e,t=Cd(n),r=t[0],i=t[1],s=new gw(_w(n,r,i)),o=0,a=i>0?r-4:r,u;for(u=0;u<a;u+=4)e=xn[n.charCodeAt(u)]<<18|xn[n.charCodeAt(u+1)]<<12|xn[n.charCodeAt(u+2)]<<6|xn[n.charCodeAt(u+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=xn[n.charCodeAt(u)]<<2|xn[n.charCodeAt(u+1)]>>4,s[o++]=e&255),i===1&&(e=xn[n.charCodeAt(u)]<<10|xn[n.charCodeAt(u+1)]<<4|xn[n.charCodeAt(u+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function ww(n){return Hn[n>>18&63]+Hn[n>>12&63]+Hn[n>>6&63]+Hn[n&63]}function Ew(n,e,t){for(var r,i=[],s=e;s<t;s+=3)r=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(ww(r));return i.join("")}function Aw(n){for(var e,t=n.length,r=t%3,i=[],s=16383,o=0,a=t-r;o<a;o+=s)i.push(Ew(n,o,o+s>a?a:o+s));return r===1?(e=n[t-1],i.push(Hn[e>>2]+Hn[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(Hn[e>>10]+Hn[e>>4&63]+Hn[e<<2&63]+"=")),i.join("")}});var Ld=Ee(Fu=>{Fu.read=function(n,e,t,r,i){var s,o,a=i*8-r-1,u=(1<<a)-1,f=u>>1,d=-7,m=t?i-1:0,_=t?-1:1,g=n[e+m];for(m+=_,s=g&(1<<-d)-1,g>>=-d,d+=a;d>0;s=s*256+n[e+m],m+=_,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=r;d>0;o=o*256+n[e+m],m+=_,d-=8);if(s===0)s=1-f;else{if(s===u)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-f}return(g?-1:1)*o*Math.pow(2,s-r)};Fu.write=function(n,e,t,r,i,s){var o,a,u,f=s*8-i-1,d=(1<<f)-1,m=d>>1,_=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,E=r?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+m>=1?e+=_/u:e+=_*Math.pow(2,1-m),e*u>=2&&(o++,u/=2),o+m>=d?(a=0,o=d):o+m>=1?(a=(e*u-1)*Math.pow(2,i),o=o+m):(a=e*Math.pow(2,m-1)*Math.pow(2,i),o=0));i>=8;n[t+g]=a&255,g+=E,a/=256,i-=8);for(o=o<<i|a,f+=i;f>0;n[t+g]=o&255,g+=E,o/=256,f-=8);n[t+g-E]|=S*128}});var Fi=Ee(zi=>{"use strict";var Ku=Md(),Di=Ld(),Pd=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;zi.Buffer=F;zi.SlowBuffer=kw;zi.INSPECT_MAX_BYTES=50;var Zo=2147483647;zi.kMaxLength=Zo;F.TYPED_ARRAY_SUPPORT=Rw();!F.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Rw(){try{let n=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(n,e),n.foo()===42}catch{return!1}}Object.defineProperty(F.prototype,"parent",{enumerable:!0,get:function(){if(F.isBuffer(this))return this.buffer}});Object.defineProperty(F.prototype,"offset",{enumerable:!0,get:function(){if(F.isBuffer(this))return this.byteOffset}});function fr(n){if(n>Zo)throw new RangeError('The value "'+n+'" is invalid for option "size"');let e=new Uint8Array(n);return Object.setPrototypeOf(e,F.prototype),e}function F(n,e,t){if(typeof n=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Wu(n)}return zd(n,e,t)}F.poolSize=8192;function zd(n,e,t){if(typeof n=="string")return xw(n,e);if(ArrayBuffer.isView(n))return Sw(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(zn(n,ArrayBuffer)||n&&zn(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(zn(n,SharedArrayBuffer)||n&&zn(n.buffer,SharedArrayBuffer)))return Vu(n,e,t);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let r=n.valueOf&&n.valueOf();if(r!=null&&r!==n)return F.from(r,e,t);let i=Iw(n);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return F.from(n[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}F.from=function(n,e,t){return zd(n,e,t)};Object.setPrototypeOf(F.prototype,Uint8Array.prototype);Object.setPrototypeOf(F,Uint8Array);function Fd(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function vw(n,e,t){return Fd(n),n<=0?fr(n):e!==void 0?typeof t=="string"?fr(n).fill(e,t):fr(n).fill(e):fr(n)}F.alloc=function(n,e,t){return vw(n,e,t)};function Wu(n){return Fd(n),fr(n<0?0:Gu(n)|0)}F.allocUnsafe=function(n){return Wu(n)};F.allocUnsafeSlow=function(n){return Wu(n)};function xw(n,e){if((typeof e!="string"||e==="")&&(e="utf8"),!F.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=Kd(n,e)|0,r=fr(t),i=r.write(n,e);return i!==t&&(r=r.slice(0,i)),r}function qu(n){let e=n.length<0?0:Gu(n.length)|0,t=fr(e);for(let r=0;r<e;r+=1)t[r]=n[r]&255;return t}function Sw(n){if(zn(n,Uint8Array)){let e=new Uint8Array(n);return Vu(e.buffer,e.byteOffset,e.byteLength)}return qu(n)}function Vu(n,e,t){if(e<0||n.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let r;return e===void 0&&t===void 0?r=new Uint8Array(n):t===void 0?r=new Uint8Array(n,e):r=new Uint8Array(n,e,t),Object.setPrototypeOf(r,F.prototype),r}function Iw(n){if(F.isBuffer(n)){let e=Gu(n.length)|0,t=fr(e);return t.length===0||n.copy(t,0,0,e),t}if(n.length!==void 0)return typeof n.length!="number"||Zu(n.length)?fr(0):qu(n);if(n.type==="Buffer"&&Array.isArray(n.data))return qu(n.data)}function Gu(n){if(n>=Zo)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Zo.toString(16)+" bytes");return n|0}function kw(n){return+n!=n&&(n=0),F.alloc(+n)}F.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==F.prototype};F.compare=function(e,t){if(zn(e,Uint8Array)&&(e=F.from(e,e.offset,e.byteLength)),zn(t,Uint8Array)&&(t=F.from(t,t.offset,t.byteLength)),!F.isBuffer(e)||!F.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,i=t.length;for(let s=0,o=Math.min(r,i);s<o;++s)if(e[s]!==t[s]){r=e[s],i=t[s];break}return r<i?-1:i<r?1:0};F.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};F.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return F.alloc(0);let r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;let i=F.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){let o=e[r];if(zn(o,Uint8Array))s+o.length>i.length?(F.isBuffer(o)||(o=F.from(o)),o.copy(i,s)):Uint8Array.prototype.set.call(i,o,s);else if(F.isBuffer(o))o.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return i};function Kd(n,e){if(F.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||zn(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);let t=n.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return $u(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Xd(n).length;default:if(i)return r?-1:$u(n).length;e=(""+e).toLowerCase(),i=!0}}F.byteLength=Kd;function Tw(n,e,t){let r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(n||(n="utf8");;)switch(n){case"hex":return Hw(this,e,t);case"utf8":case"utf-8":return Vd(this,e,t);case"ascii":return Uw(this,e,t);case"latin1":case"binary":return Dw(this,e,t);case"base64":return Lw(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return zw(this,e,t);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),r=!0}}F.prototype._isBuffer=!0;function oi(n,e,t){let r=n[e];n[e]=n[t],n[t]=r}F.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)oi(this,t,t+1);return this};F.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)oi(this,t,t+3),oi(this,t+1,t+2);return this};F.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)oi(this,t,t+7),oi(this,t+1,t+6),oi(this,t+2,t+5),oi(this,t+3,t+4);return this};F.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Vd(this,0,e):Tw.apply(this,arguments)};F.prototype.toLocaleString=F.prototype.toString;F.prototype.equals=function(e){if(!F.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:F.compare(this,e)===0};F.prototype.inspect=function(){let e="",t=zi.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};Pd&&(F.prototype[Pd]=F.prototype.inspect);F.prototype.compare=function(e,t,r,i,s){if(zn(e,Uint8Array)&&(e=F.from(e,e.offset,e.byteLength)),!F.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),r===void 0&&(r=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),t<0||r>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&t>=r)return 0;if(i>=s)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,s>>>=0,this===e)return 0;let o=s-i,a=r-t,u=Math.min(o,a),f=this.slice(i,s),d=e.slice(t,r);for(let m=0;m<u;++m)if(f[m]!==d[m]){o=f[m],a=d[m];break}return o<a?-1:a<o?1:0};function qd(n,e,t,r,i){if(n.length===0)return-1;if(typeof t=="string"?(r=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Zu(t)&&(t=i?0:n.length-1),t<0&&(t=n.length+t),t>=n.length){if(i)return-1;t=n.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=F.from(e,r)),F.isBuffer(e))return e.length===0?-1:Ud(n,e,t,r,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(n,e,t):Uint8Array.prototype.lastIndexOf.call(n,e,t):Ud(n,[e],t,r,i);throw new TypeError("val must be string, number or Buffer")}function Ud(n,e,t,r,i){let s=1,o=n.length,a=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(n.length<2||e.length<2)return-1;s=2,o/=2,a/=2,t/=2}function u(d,m){return s===1?d[m]:d.readUInt16BE(m*s)}let f;if(i){let d=-1;for(f=t;f<o;f++)if(u(n,f)===u(e,d===-1?0:f-d)){if(d===-1&&(d=f),f-d+1===a)return d*s}else d!==-1&&(f-=f-d),d=-1}else for(t+a>o&&(t=o-a),f=t;f>=0;f--){let d=!0;for(let m=0;m<a;m++)if(u(n,f+m)!==u(e,m)){d=!1;break}if(d)return f}return-1}F.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1};F.prototype.indexOf=function(e,t,r){return qd(this,e,t,r,!0)};F.prototype.lastIndexOf=function(e,t,r){return qd(this,e,t,r,!1)};function Ow(n,e,t,r){t=Number(t)||0;let i=n.length-t;r?(r=Number(r),r>i&&(r=i)):r=i;let s=e.length;r>s/2&&(r=s/2);let o;for(o=0;o<r;++o){let a=parseInt(e.substr(o*2,2),16);if(Zu(a))return o;n[t+o]=a}return o}function Nw(n,e,t,r){return Yo($u(e,n.length-t),n,t,r)}function Bw(n,e,t,r){return Yo(Vw(e),n,t,r)}function Cw(n,e,t,r){return Yo(Xd(e),n,t,r)}function Mw(n,e,t,r){return Yo($w(e,n.length-t),n,t,r)}F.prototype.write=function(e,t,r,i){if(t===void 0)i="utf8",r=this.length,t=0;else if(r===void 0&&typeof t=="string")i=t,r=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(r)?(r=r>>>0,i===void 0&&(i="utf8")):(i=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-t;if((r===void 0||r>s)&&(r=s),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return Ow(this,e,t,r);case"utf8":case"utf-8":return Nw(this,e,t,r);case"ascii":case"latin1":case"binary":return Bw(this,e,t,r);case"base64":return Cw(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Mw(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};F.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Lw(n,e,t){return e===0&&t===n.length?Ku.fromByteArray(n):Ku.fromByteArray(n.slice(e,t))}function Vd(n,e,t){t=Math.min(n.length,t);let r=[],i=e;for(;i<t;){let s=n[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=t){let u,f,d,m;switch(a){case 1:s<128&&(o=s);break;case 2:u=n[i+1],(u&192)===128&&(m=(s&31)<<6|u&63,m>127&&(o=m));break;case 3:u=n[i+1],f=n[i+2],(u&192)===128&&(f&192)===128&&(m=(s&15)<<12|(u&63)<<6|f&63,m>2047&&(m<55296||m>57343)&&(o=m));break;case 4:u=n[i+1],f=n[i+2],d=n[i+3],(u&192)===128&&(f&192)===128&&(d&192)===128&&(m=(s&15)<<18|(u&63)<<12|(f&63)<<6|d&63,m>65535&&m<1114112&&(o=m))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|o&1023),r.push(o),i+=a}return Pw(r)}var Dd=4096;function Pw(n){let e=n.length;if(e<=Dd)return String.fromCharCode.apply(String,n);let t="",r=0;for(;r<e;)t+=String.fromCharCode.apply(String,n.slice(r,r+=Dd));return t}function Uw(n,e,t){let r="";t=Math.min(n.length,t);for(let i=e;i<t;++i)r+=String.fromCharCode(n[i]&127);return r}function Dw(n,e,t){let r="";t=Math.min(n.length,t);for(let i=e;i<t;++i)r+=String.fromCharCode(n[i]);return r}function Hw(n,e,t){let r=n.length;(!e||e<0)&&(e=0),(!t||t<0||t>r)&&(t=r);let i="";for(let s=e;s<t;++s)i+=Ww[n[s]];return i}function zw(n,e,t){let r=n.slice(e,t),i="";for(let s=0;s<r.length-1;s+=2)i+=String.fromCharCode(r[s]+r[s+1]*256);return i}F.prototype.slice=function(e,t){let r=this.length;e=~~e,t=t===void 0?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,F.prototype),i};function Nt(n,e,t){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+e>t)throw new RangeError("Trying to access beyond buffer length")}F.prototype.readUintLE=F.prototype.readUIntLE=function(e,t,r){e=e>>>0,t=t>>>0,r||Nt(e,t,this.length);let i=this[e],s=1,o=0;for(;++o<t&&(s*=256);)i+=this[e+o]*s;return i};F.prototype.readUintBE=F.prototype.readUIntBE=function(e,t,r){e=e>>>0,t=t>>>0,r||Nt(e,t,this.length);let i=this[e+--t],s=1;for(;t>0&&(s*=256);)i+=this[e+--t]*s;return i};F.prototype.readUint8=F.prototype.readUInt8=function(e,t){return e=e>>>0,t||Nt(e,1,this.length),this[e]};F.prototype.readUint16LE=F.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||Nt(e,2,this.length),this[e]|this[e+1]<<8};F.prototype.readUint16BE=F.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||Nt(e,2,this.length),this[e]<<8|this[e+1]};F.prototype.readUint32LE=F.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||Nt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};F.prototype.readUint32BE=F.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||Nt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};F.prototype.readBigUInt64LE=Br(function(e){e=e>>>0,Hi(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&Ts(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+r*2**24;return BigInt(i)+(BigInt(s)<<BigInt(32))});F.prototype.readBigUInt64BE=Br(function(e){e=e>>>0,Hi(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&Ts(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+r;return(BigInt(i)<<BigInt(32))+BigInt(s)});F.prototype.readIntLE=function(e,t,r){e=e>>>0,t=t>>>0,r||Nt(e,t,this.length);let i=this[e],s=1,o=0;for(;++o<t&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*t)),i};F.prototype.readIntBE=function(e,t,r){e=e>>>0,t=t>>>0,r||Nt(e,t,this.length);let i=t,s=1,o=this[e+--i];for(;i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*t)),o};F.prototype.readInt8=function(e,t){return e=e>>>0,t||Nt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};F.prototype.readInt16LE=function(e,t){e=e>>>0,t||Nt(e,2,this.length);let r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};F.prototype.readInt16BE=function(e,t){e=e>>>0,t||Nt(e,2,this.length);let r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};F.prototype.readInt32LE=function(e,t){return e=e>>>0,t||Nt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};F.prototype.readInt32BE=function(e,t){return e=e>>>0,t||Nt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};F.prototype.readBigInt64LE=Br(function(e){e=e>>>0,Hi(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&Ts(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(r<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});F.prototype.readBigInt64BE=Br(function(e){e=e>>>0,Hi(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&Ts(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+r)});F.prototype.readFloatLE=function(e,t){return e=e>>>0,t||Nt(e,4,this.length),Di.read(this,e,!0,23,4)};F.prototype.readFloatBE=function(e,t){return e=e>>>0,t||Nt(e,4,this.length),Di.read(this,e,!1,23,4)};F.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||Nt(e,8,this.length),Di.read(this,e,!0,52,8)};F.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||Nt(e,8,this.length),Di.read(this,e,!1,52,8)};function hn(n,e,t,r,i,s){if(!F.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(t+r>n.length)throw new RangeError("Index out of range")}F.prototype.writeUintLE=F.prototype.writeUIntLE=function(e,t,r,i){if(e=+e,t=t>>>0,r=r>>>0,!i){let a=Math.pow(2,8*r)-1;hn(this,e,t,r,a,0)}let s=1,o=0;for(this[t]=e&255;++o<r&&(s*=256);)this[t+o]=e/s&255;return t+r};F.prototype.writeUintBE=F.prototype.writeUIntBE=function(e,t,r,i){if(e=+e,t=t>>>0,r=r>>>0,!i){let a=Math.pow(2,8*r)-1;hn(this,e,t,r,a,0)}let s=r-1,o=1;for(this[t+s]=e&255;--s>=0&&(o*=256);)this[t+s]=e/o&255;return t+r};F.prototype.writeUint8=F.prototype.writeUInt8=function(e,t,r){return e=+e,t=t>>>0,r||hn(this,e,t,1,255,0),this[t]=e&255,t+1};F.prototype.writeUint16LE=F.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=t>>>0,r||hn(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};F.prototype.writeUint16BE=F.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=t>>>0,r||hn(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};F.prototype.writeUint32LE=F.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=t>>>0,r||hn(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};F.prototype.writeUint32BE=F.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=t>>>0,r||hn(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function $d(n,e,t,r,i){Yd(e,r,i,n,t,7);let s=Number(e&BigInt(4294967295));n[t++]=s,s=s>>8,n[t++]=s,s=s>>8,n[t++]=s,s=s>>8,n[t++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return n[t++]=o,o=o>>8,n[t++]=o,o=o>>8,n[t++]=o,o=o>>8,n[t++]=o,t}function Wd(n,e,t,r,i){Yd(e,r,i,n,t,7);let s=Number(e&BigInt(4294967295));n[t+7]=s,s=s>>8,n[t+6]=s,s=s>>8,n[t+5]=s,s=s>>8,n[t+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return n[t+3]=o,o=o>>8,n[t+2]=o,o=o>>8,n[t+1]=o,o=o>>8,n[t]=o,t+8}F.prototype.writeBigUInt64LE=Br(function(e,t=0){return $d(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});F.prototype.writeBigUInt64BE=Br(function(e,t=0){return Wd(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});F.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t=t>>>0,!i){let u=Math.pow(2,8*r-1);hn(this,e,t,r,u-1,-u)}let s=0,o=1,a=0;for(this[t]=e&255;++s<r&&(o*=256);)e<0&&a===0&&this[t+s-1]!==0&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r};F.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t=t>>>0,!i){let u=Math.pow(2,8*r-1);hn(this,e,t,r,u-1,-u)}let s=r-1,o=1,a=0;for(this[t+s]=e&255;--s>=0&&(o*=256);)e<0&&a===0&&this[t+s+1]!==0&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r};F.prototype.writeInt8=function(e,t,r){return e=+e,t=t>>>0,r||hn(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};F.prototype.writeInt16LE=function(e,t,r){return e=+e,t=t>>>0,r||hn(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};F.prototype.writeInt16BE=function(e,t,r){return e=+e,t=t>>>0,r||hn(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};F.prototype.writeInt32LE=function(e,t,r){return e=+e,t=t>>>0,r||hn(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};F.prototype.writeInt32BE=function(e,t,r){return e=+e,t=t>>>0,r||hn(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};F.prototype.writeBigInt64LE=Br(function(e,t=0){return $d(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});F.prototype.writeBigInt64BE=Br(function(e,t=0){return Wd(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Gd(n,e,t,r,i,s){if(t+r>n.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function jd(n,e,t,r,i){return e=+e,t=t>>>0,i||Gd(n,e,t,4,34028234663852886e22,-34028234663852886e22),Di.write(n,e,t,r,23,4),t+4}F.prototype.writeFloatLE=function(e,t,r){return jd(this,e,t,!0,r)};F.prototype.writeFloatBE=function(e,t,r){return jd(this,e,t,!1,r)};function Zd(n,e,t,r,i){return e=+e,t=t>>>0,i||Gd(n,e,t,8,17976931348623157e292,-17976931348623157e292),Di.write(n,e,t,r,52,8),t+8}F.prototype.writeDoubleLE=function(e,t,r){return Zd(this,e,t,!0,r)};F.prototype.writeDoubleBE=function(e,t,r){return Zd(this,e,t,!1,r)};F.prototype.copy=function(e,t,r,i){if(!F.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);let s=i-r;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),s};F.prototype.fill=function(e,t,r,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,r=this.length):typeof r=="string"&&(i=r,r=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!F.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let o=e.charCodeAt(0);(i==="utf8"&&o<128||i==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t=t>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);let s;if(typeof e=="number")for(s=t;s<r;++s)this[s]=e;else{let o=F.isBuffer(e)?e:F.from(e,i),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=o[s%a]}return this};var Ui={};function ju(n,e,t){Ui[n]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${n}]`,this.stack,delete this.name}get code(){return n}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${n}]: ${this.message}`}}}ju("ERR_BUFFER_OUT_OF_BOUNDS",function(n){return n?`${n} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);ju("ERR_INVALID_ARG_TYPE",function(n,e){return`The "${n}" argument must be of type number. Received type ${typeof e}`},TypeError);ju("ERR_OUT_OF_RANGE",function(n,e,t){let r=`The value of "${n}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=Hd(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=Hd(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r},RangeError);function Hd(n){let e="",t=n.length,r=n[0]==="-"?1:0;for(;t>=r+4;t-=3)e=`_${n.slice(t-3,t)}${e}`;return`${n.slice(0,t)}${e}`}function Fw(n,e,t){Hi(e,"offset"),(n[e]===void 0||n[e+t]===void 0)&&Ts(e,n.length-(t+1))}function Yd(n,e,t,r,i,s){if(n>t||n<e){let o=typeof e=="bigint"?"n":"",a;throw s>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(s+1)*8}${o}`:a=`>= -(2${o} ** ${(s+1)*8-1}${o}) and < 2 ** ${(s+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${t}${o}`,new Ui.ERR_OUT_OF_RANGE("value",a,n)}Fw(r,i,s)}function Hi(n,e){if(typeof n!="number")throw new Ui.ERR_INVALID_ARG_TYPE(e,"number",n)}function Ts(n,e,t){throw Math.floor(n)!==n?(Hi(n,t),new Ui.ERR_OUT_OF_RANGE(t||"offset","an integer",n)):e<0?new Ui.ERR_BUFFER_OUT_OF_BOUNDS:new Ui.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,n)}var Kw=/[^+/0-9A-Za-z-_]/g;function qw(n){if(n=n.split("=")[0],n=n.trim().replace(Kw,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function $u(n,e){e=e||1/0;let t,r=n.length,i=null,s=[];for(let o=0;o<r;++o){if(t=n.charCodeAt(o),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function Vw(n){let e=[];for(let t=0;t<n.length;++t)e.push(n.charCodeAt(t)&255);return e}function $w(n,e){let t,r,i,s=[];for(let o=0;o<n.length&&!((e-=2)<0);++o)t=n.charCodeAt(o),r=t>>8,i=t%256,s.push(i),s.push(r);return s}function Xd(n){return Ku.toByteArray(qw(n))}function Yo(n,e,t,r){let i;for(i=0;i<r&&!(i+t>=e.length||i>=n.length);++i)e[i+t]=n[i];return i}function zn(n,e){return n instanceof e||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===e.name}function Zu(n){return n!==n}var Ww=(function(){let n="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let r=t*16;for(let i=0;i<16;++i)e[r+i]=n[t]+n[i]}return e})();function Br(n){return typeof BigInt>"u"?Gw:n}function Gw(){throw new Error("BigInt not supported")}});var Jd=Ee(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.crypto=void 0;Xo.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var Fn=Ee(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.wrapXOFConstructorWithOpts=de.wrapConstructorWithOpts=de.wrapConstructor=de.Hash=de.nextTick=de.swap32IfBE=de.byteSwapIfBE=de.swap8IfBE=de.isLE=void 0;de.isBytes=e0;de.anumber=Yu;de.abytes=qi;de.ahash=jw;de.aexists=Zw;de.aoutput=Yw;de.u8=Xw;de.u32=Jw;de.clean=Qw;de.createView=e1;de.rotr=t1;de.rotl=n1;de.byteSwap=Ju;de.byteSwap32=t0;de.bytesToHex=i1;de.hexToBytes=s1;de.asyncLoop=a1;de.utf8ToBytes=Qu;de.bytesToUtf8=c1;de.toBytes=Jo;de.kdfInputToBytes=u1;de.concatBytes=l1;de.checkOpts=f1;de.createHasher=r0;de.createOptHasher=i0;de.createXOFer=s0;de.randomBytes=h1;var Ki=Jd();function e0(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Yu(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function qi(n,...e){if(!e0(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function jw(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Yu(n.outputLen),Yu(n.blockLen)}function Zw(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function Yw(n,e){qi(n);let t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Xw(n){return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}function Jw(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Qw(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function e1(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function t1(n,e){return n<<32-e|n>>>e}function n1(n,e){return n<<e|n>>>32-e>>>0}de.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Ju(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}de.swap8IfBE=de.isLE?n=>n:n=>Ju(n);de.byteSwapIfBE=de.swap8IfBE;function t0(n){for(let e=0;e<n.length;e++)n[e]=Ju(n[e]);return n}de.swap32IfBE=de.isLE?n=>n:t0;var n0=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",r1=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function i1(n){if(qi(n),n0)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=r1[n[t]];return e}var hr={_0:48,_9:57,A:65,F:70,a:97,f:102};function Qd(n){if(n>=hr._0&&n<=hr._9)return n-hr._0;if(n>=hr.A&&n<=hr.F)return n-(hr.A-10);if(n>=hr.a&&n<=hr.f)return n-(hr.a-10)}function s1(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(n0)return Uint8Array.fromHex(n);let e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){let o=Qd(n.charCodeAt(s)),a=Qd(n.charCodeAt(s+1));if(o===void 0||a===void 0){let u=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=o*16+a}return r}var o1=async()=>{};de.nextTick=o1;async function a1(n,e,t){let r=Date.now();for(let i=0;i<n;i++){t(i);let s=Date.now()-r;s>=0&&s<e||(await(0,de.nextTick)(),r+=s)}}function Qu(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function c1(n){return new TextDecoder().decode(n)}function Jo(n){return typeof n=="string"&&(n=Qu(n)),qi(n),n}function u1(n){return typeof n=="string"&&(n=Qu(n)),qi(n),n}function l1(...n){let e=0;for(let r=0;r<n.length;r++){let i=n[r];qi(i),e+=i.length}let t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){let s=n[r];t.set(s,i),i+=s.length}return t}function f1(n,e){if(e!==void 0&&{}.toString.call(e)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(n,e)}var Xu=class{};de.Hash=Xu;function r0(n){let e=r=>n().update(Jo(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function i0(n){let e=(r,i)=>n(i).update(Jo(r)).digest(),t=n({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}function s0(n){let e=(r,i)=>n(i).update(Jo(r)).digest(),t=n({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}de.wrapConstructor=r0;de.wrapConstructorWithOpts=i0;de.wrapXOFConstructorWithOpts=s0;function h1(n=32){if(Ki.crypto&&typeof Ki.crypto.getRandomValues=="function")return Ki.crypto.getRandomValues(new Uint8Array(n));if(Ki.crypto&&typeof Ki.crypto.randomBytes=="function")return Uint8Array.from(Ki.crypto.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}});var a0=Ee(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.SHA512_IV=sn.SHA384_IV=sn.SHA224_IV=sn.SHA256_IV=sn.HashMD=void 0;sn.setBigUint64=o0;sn.Chi=d1;sn.Maj=p1;var Kn=Fn();function o0(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);let i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),u=r?4:0,f=r?0:4;n.setUint32(e+u,o,r),n.setUint32(e+f,a,r)}function d1(n,e,t){return n&e^~n&t}function p1(n,e,t){return n&e^n&t^e&t}var el=class extends Kn.Hash{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=(0,Kn.createView)(this.buffer)}update(e){(0,Kn.aexists)(this),e=(0,Kn.toBytes)(e),(0,Kn.abytes)(e);let{view:t,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){let a=Math.min(i-this.pos,s-o);if(a===i){let u=(0,Kn.createView)(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,Kn.aexists)(this),(0,Kn.aoutput)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:s}=this,{pos:o}=this;t[o++]=128,(0,Kn.clean)(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let m=o;m<i;m++)t[m]=0;o0(r,i-8,BigInt(this.length*8),s),this.process(r,0);let a=(0,Kn.createView)(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let f=u/4,d=this.get();if(f>d.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<f;m++)a.setUint32(4*m,d[m],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}};sn.HashMD=el;sn.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);sn.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]);sn.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]);sn.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209])});var rl=Ee(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.toBig=_e.shrSL=_e.shrSH=_e.rotrSL=_e.rotrSH=_e.rotrBL=_e.rotrBH=_e.rotr32L=_e.rotr32H=_e.rotlSL=_e.rotlSH=_e.rotlBL=_e.rotlBH=_e.add5L=_e.add5H=_e.add4L=_e.add4H=_e.add3L=_e.add3H=void 0;_e.add=A0;_e.fromBig=nl;_e.split=c0;var Qo=BigInt(2**32-1),tl=BigInt(32);function nl(n,e=!1){return e?{h:Number(n&Qo),l:Number(n>>tl&Qo)}:{h:Number(n>>tl&Qo)|0,l:Number(n&Qo)|0}}function c0(n,e=!1){let t=n.length,r=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){let{h:o,l:a}=nl(n[s],e);[r[s],i[s]]=[o,a]}return[r,i]}var u0=(n,e)=>BigInt(n>>>0)<<tl|BigInt(e>>>0);_e.toBig=u0;var l0=(n,e,t)=>n>>>t;_e.shrSH=l0;var f0=(n,e,t)=>n<<32-t|e>>>t;_e.shrSL=f0;var h0=(n,e,t)=>n>>>t|e<<32-t;_e.rotrSH=h0;var d0=(n,e,t)=>n<<32-t|e>>>t;_e.rotrSL=d0;var p0=(n,e,t)=>n<<64-t|e>>>t-32;_e.rotrBH=p0;var y0=(n,e,t)=>n>>>t-32|e<<64-t;_e.rotrBL=y0;var g0=(n,e)=>e;_e.rotr32H=g0;var m0=(n,e)=>n;_e.rotr32L=m0;var _0=(n,e,t)=>n<<t|e>>>32-t;_e.rotlSH=_0;var b0=(n,e,t)=>e<<t|n>>>32-t;_e.rotlSL=b0;var w0=(n,e,t)=>e<<t-32|n>>>64-t;_e.rotlBH=w0;var E0=(n,e,t)=>n<<t-32|e>>>64-t;_e.rotlBL=E0;function A0(n,e,t,r){let i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}var R0=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0);_e.add3L=R0;var v0=(n,e,t,r)=>e+t+r+(n/2**32|0)|0;_e.add3H=v0;var x0=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0);_e.add4L=x0;var S0=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0;_e.add4H=S0;var I0=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0);_e.add5L=I0;var k0=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0;_e.add5H=k0;var y1={fromBig:nl,split:c0,toBig:u0,shrSH:l0,shrSL:f0,rotrSH:h0,rotrSL:d0,rotrBH:p0,rotrBL:y0,rotr32H:g0,rotr32L:m0,rotlSH:_0,rotlSL:b0,rotlBH:w0,rotlBL:E0,add:A0,add3L:R0,add3H:v0,add4L:x0,add4H:S0,add5H:k0,add5L:I0};_e.default=y1});var ia=Ee(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.sha512_224=We.sha512_256=We.sha384=We.sha512=We.sha224=We.sha256=We.SHA512_256=We.SHA512_224=We.SHA384=We.SHA512=We.SHA224=We.SHA256=void 0;var fe=a0(),Ae=rl(),It=Fn(),g1=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cr=new Uint32Array(64),Os=class extends fe.HashMD{constructor(e=32){super(64,e,8,!1),this.A=fe.SHA256_IV[0]|0,this.B=fe.SHA256_IV[1]|0,this.C=fe.SHA256_IV[2]|0,this.D=fe.SHA256_IV[3]|0,this.E=fe.SHA256_IV[4]|0,this.F=fe.SHA256_IV[5]|0,this.G=fe.SHA256_IV[6]|0,this.H=fe.SHA256_IV[7]|0}get(){let{A:e,B:t,C:r,D:i,E:s,F:o,G:a,H:u}=this;return[e,t,r,i,s,o,a,u]}set(e,t,r,i,s,o,a,u){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,t){for(let m=0;m<16;m++,t+=4)Cr[m]=e.getUint32(t,!1);for(let m=16;m<64;m++){let _=Cr[m-15],g=Cr[m-2],E=(0,It.rotr)(_,7)^(0,It.rotr)(_,18)^_>>>3,S=(0,It.rotr)(g,17)^(0,It.rotr)(g,19)^g>>>10;Cr[m]=S+Cr[m-7]+E+Cr[m-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:u,G:f,H:d}=this;for(let m=0;m<64;m++){let _=(0,It.rotr)(a,6)^(0,It.rotr)(a,11)^(0,It.rotr)(a,25),g=d+_+(0,fe.Chi)(a,u,f)+g1[m]+Cr[m]|0,S=((0,It.rotr)(r,2)^(0,It.rotr)(r,13)^(0,It.rotr)(r,22))+(0,fe.Maj)(r,i,s)|0;d=f,f=u,u=a,a=o+g|0,o=s,s=i,i=r,r=g+S|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,f=f+this.G|0,d=d+this.H|0,this.set(r,i,s,o,a,u,f,d)}roundClean(){(0,It.clean)(Cr)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,It.clean)(this.buffer)}};We.SHA256=Os;var ea=class extends Os{constructor(){super(28),this.A=fe.SHA224_IV[0]|0,this.B=fe.SHA224_IV[1]|0,this.C=fe.SHA224_IV[2]|0,this.D=fe.SHA224_IV[3]|0,this.E=fe.SHA224_IV[4]|0,this.F=fe.SHA224_IV[5]|0,this.G=fe.SHA224_IV[6]|0,this.H=fe.SHA224_IV[7]|0}};We.SHA224=ea;var T0=Ae.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),m1=T0[0],_1=T0[1],Mr=new Uint32Array(80),Lr=new Uint32Array(80),ai=class extends fe.HashMD{constructor(e=64){super(128,e,16,!1),this.Ah=fe.SHA512_IV[0]|0,this.Al=fe.SHA512_IV[1]|0,this.Bh=fe.SHA512_IV[2]|0,this.Bl=fe.SHA512_IV[3]|0,this.Ch=fe.SHA512_IV[4]|0,this.Cl=fe.SHA512_IV[5]|0,this.Dh=fe.SHA512_IV[6]|0,this.Dl=fe.SHA512_IV[7]|0,this.Eh=fe.SHA512_IV[8]|0,this.El=fe.SHA512_IV[9]|0,this.Fh=fe.SHA512_IV[10]|0,this.Fl=fe.SHA512_IV[11]|0,this.Gh=fe.SHA512_IV[12]|0,this.Gl=fe.SHA512_IV[13]|0,this.Hh=fe.SHA512_IV[14]|0,this.Hl=fe.SHA512_IV[15]|0}get(){let{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:u,Eh:f,El:d,Fh:m,Fl:_,Gh:g,Gl:E,Hh:S,Hl:k}=this;return[e,t,r,i,s,o,a,u,f,d,m,_,g,E,S,k]}set(e,t,r,i,s,o,a,u,f,d,m,_,g,E,S,k){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=f|0,this.El=d|0,this.Fh=m|0,this.Fl=_|0,this.Gh=g|0,this.Gl=E|0,this.Hh=S|0,this.Hl=k|0}process(e,t){for(let M=0;M<16;M++,t+=4)Mr[M]=e.getUint32(t),Lr[M]=e.getUint32(t+=4);for(let M=16;M<80;M++){let C=Mr[M-15]|0,$=Lr[M-15]|0,G=Ae.rotrSH(C,$,1)^Ae.rotrSH(C,$,8)^Ae.shrSH(C,$,7),q=Ae.rotrSL(C,$,1)^Ae.rotrSL(C,$,8)^Ae.shrSL(C,$,7),j=Mr[M-2]|0,H=Lr[M-2]|0,V=Ae.rotrSH(j,H,19)^Ae.rotrBH(j,H,61)^Ae.shrSH(j,H,6),K=Ae.rotrSL(j,H,19)^Ae.rotrBL(j,H,61)^Ae.shrSL(j,H,6),J=Ae.add4L(q,K,Lr[M-7],Lr[M-16]),w=Ae.add4H(J,G,V,Mr[M-7],Mr[M-16]);Mr[M]=w|0,Lr[M]=J|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:u,Dh:f,Dl:d,Eh:m,El:_,Fh:g,Fl:E,Gh:S,Gl:k,Hh:O,Hl:L}=this;for(let M=0;M<80;M++){let C=Ae.rotrSH(m,_,14)^Ae.rotrSH(m,_,18)^Ae.rotrBH(m,_,41),$=Ae.rotrSL(m,_,14)^Ae.rotrSL(m,_,18)^Ae.rotrBL(m,_,41),G=m&g^~m&S,q=_&E^~_&k,j=Ae.add5L(L,$,q,_1[M],Lr[M]),H=Ae.add5H(j,O,C,G,m1[M],Mr[M]),V=j|0,K=Ae.rotrSH(r,i,28)^Ae.rotrBH(r,i,34)^Ae.rotrBH(r,i,39),J=Ae.rotrSL(r,i,28)^Ae.rotrBL(r,i,34)^Ae.rotrBL(r,i,39),w=r&s^r&a^s&a,c=i&o^i&u^o&u;O=S|0,L=k|0,S=g|0,k=E|0,g=m|0,E=_|0,{h:m,l:_}=Ae.add(f|0,d|0,H|0,V|0),f=a|0,d=u|0,a=s|0,u=o|0,s=r|0,o=i|0;let h=Ae.add3L(V,J,c);r=Ae.add3H(h,H,K,w),i=h|0}({h:r,l:i}=Ae.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Ae.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:u}=Ae.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:f,l:d}=Ae.add(this.Dh|0,this.Dl|0,f|0,d|0),{h:m,l:_}=Ae.add(this.Eh|0,this.El|0,m|0,_|0),{h:g,l:E}=Ae.add(this.Fh|0,this.Fl|0,g|0,E|0),{h:S,l:k}=Ae.add(this.Gh|0,this.Gl|0,S|0,k|0),{h:O,l:L}=Ae.add(this.Hh|0,this.Hl|0,O|0,L|0),this.set(r,i,s,o,a,u,f,d,m,_,g,E,S,k,O,L)}roundClean(){(0,It.clean)(Mr,Lr)}destroy(){(0,It.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};We.SHA512=ai;var ta=class extends ai{constructor(){super(48),this.Ah=fe.SHA384_IV[0]|0,this.Al=fe.SHA384_IV[1]|0,this.Bh=fe.SHA384_IV[2]|0,this.Bl=fe.SHA384_IV[3]|0,this.Ch=fe.SHA384_IV[4]|0,this.Cl=fe.SHA384_IV[5]|0,this.Dh=fe.SHA384_IV[6]|0,this.Dl=fe.SHA384_IV[7]|0,this.Eh=fe.SHA384_IV[8]|0,this.El=fe.SHA384_IV[9]|0,this.Fh=fe.SHA384_IV[10]|0,this.Fl=fe.SHA384_IV[11]|0,this.Gh=fe.SHA384_IV[12]|0,this.Gl=fe.SHA384_IV[13]|0,this.Hh=fe.SHA384_IV[14]|0,this.Hl=fe.SHA384_IV[15]|0}};We.SHA384=ta;var Vt=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),$t=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]),na=class extends ai{constructor(){super(28),this.Ah=Vt[0]|0,this.Al=Vt[1]|0,this.Bh=Vt[2]|0,this.Bl=Vt[3]|0,this.Ch=Vt[4]|0,this.Cl=Vt[5]|0,this.Dh=Vt[6]|0,this.Dl=Vt[7]|0,this.Eh=Vt[8]|0,this.El=Vt[9]|0,this.Fh=Vt[10]|0,this.Fl=Vt[11]|0,this.Gh=Vt[12]|0,this.Gl=Vt[13]|0,this.Hh=Vt[14]|0,this.Hl=Vt[15]|0}};We.SHA512_224=na;var ra=class extends ai{constructor(){super(32),this.Ah=$t[0]|0,this.Al=$t[1]|0,this.Bh=$t[2]|0,this.Bl=$t[3]|0,this.Ch=$t[4]|0,this.Cl=$t[5]|0,this.Dh=$t[6]|0,this.Dl=$t[7]|0,this.Eh=$t[8]|0,this.El=$t[9]|0,this.Fh=$t[10]|0,this.Fl=$t[11]|0,this.Gh=$t[12]|0,this.Gl=$t[13]|0,this.Hh=$t[14]|0,this.Hl=$t[15]|0}};We.SHA512_256=ra;We.sha256=(0,It.createHasher)(()=>new Os);We.sha224=(0,It.createHasher)(()=>new ea);We.sha512=(0,It.createHasher)(()=>new ai);We.sha384=(0,It.createHasher)(()=>new ta);We.sha512_256=(0,It.createHasher)(()=>new ra);We.sha512_224=(0,It.createHasher)(()=>new na)});var pr=Ee(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.notImplemented=ge.bitMask=ge.utf8ToBytes=ge.randomBytes=ge.isBytes=ge.hexToBytes=ge.concatBytes=ge.bytesToUtf8=ge.bytesToHex=ge.anumber=ge.abytes=void 0;ge.abool=b1;ge._abool2=w1;ge._abytes2=E1;ge.numberToHexUnpadded=O0;ge.hexToNumber=sl;ge.bytesToNumberBE=A1;ge.bytesToNumberLE=R1;ge.numberToBytesBE=N0;ge.numberToBytesLE=v1;ge.numberToVarBytesBE=x1;ge.ensureBytes=S1;ge.equalBytes=I1;ge.copyBytes=k1;ge.asciiToBytes=T1;ge.inRange=B0;ge.aInRange=O1;ge.bitLen=N1;ge.bitGet=B1;ge.bitSet=C1;ge.createHmacDrbg=L1;ge.validateObject=U1;ge.isHash=D1;ge._validateObject=H1;ge.memoized=F1;var qn=Fn(),dr=Fn();Object.defineProperty(ge,"abytes",{enumerable:!0,get:function(){return dr.abytes}});Object.defineProperty(ge,"anumber",{enumerable:!0,get:function(){return dr.anumber}});Object.defineProperty(ge,"bytesToHex",{enumerable:!0,get:function(){return dr.bytesToHex}});Object.defineProperty(ge,"bytesToUtf8",{enumerable:!0,get:function(){return dr.bytesToUtf8}});Object.defineProperty(ge,"concatBytes",{enumerable:!0,get:function(){return dr.concatBytes}});Object.defineProperty(ge,"hexToBytes",{enumerable:!0,get:function(){return dr.hexToBytes}});Object.defineProperty(ge,"isBytes",{enumerable:!0,get:function(){return dr.isBytes}});Object.defineProperty(ge,"randomBytes",{enumerable:!0,get:function(){return dr.randomBytes}});Object.defineProperty(ge,"utf8ToBytes",{enumerable:!0,get:function(){return dr.utf8ToBytes}});var sa=BigInt(0),Ns=BigInt(1);function b1(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}function w1(n,e=""){if(typeof n!="boolean"){let t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof n)}return n}function E1(n,e,t=""){let r=(0,qn.isBytes)(n),i=n?.length,s=e!==void 0;if(!r||s&&i!==e){let o=t&&`"${t}" `,a=s?` of length ${e}`:"",u=r?`length=${i}`:`type=${typeof n}`;throw new Error(o+"expected Uint8Array"+a+", got "+u)}return n}function O0(n){let e=n.toString(16);return e.length&1?"0"+e:e}function sl(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?sa:BigInt("0x"+n)}function A1(n){return sl((0,qn.bytesToHex)(n))}function R1(n){return(0,qn.abytes)(n),sl((0,qn.bytesToHex)(Uint8Array.from(n).reverse()))}function N0(n,e){return(0,qn.hexToBytes)(n.toString(16).padStart(e*2,"0"))}function v1(n,e){return N0(n,e).reverse()}function x1(n){return(0,qn.hexToBytes)(O0(n))}function S1(n,e,t){let r;if(typeof e=="string")try{r=(0,qn.hexToBytes)(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if((0,qn.isBytes)(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");let i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}function I1(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}function k1(n){return Uint8Array.from(n)}function T1(n){return Uint8Array.from(n,(e,t)=>{let r=e.charCodeAt(0);if(e.length!==1||r>127)throw new Error(`string contains non-ASCII character "${n[t]}" with code ${r} at position ${t}`);return r})}var il=n=>typeof n=="bigint"&&sa<=n;function B0(n,e,t){return il(n)&&il(e)&&il(t)&&e<=n&&n<t}function O1(n,e,t,r){if(!B0(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function N1(n){let e;for(e=0;n>sa;n>>=Ns,e+=1);return e}function B1(n,e){return n>>BigInt(e)&Ns}function C1(n,e,t){return n|(t?Ns:sa)<<BigInt(e)}var M1=n=>(Ns<<BigInt(n))-Ns;ge.bitMask=M1;function L1(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=g=>new Uint8Array(g),i=g=>Uint8Array.of(g),s=r(n),o=r(n),a=0,u=()=>{s.fill(1),o.fill(0),a=0},f=(...g)=>t(o,s,...g),d=(g=r(0))=>{o=f(i(0),g),s=f(),g.length!==0&&(o=f(i(1),g),s=f())},m=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let g=0,E=[];for(;g<e;){s=f();let S=s.slice();E.push(S),g+=s.length}return(0,qn.concatBytes)(...E)};return(g,E)=>{u(),d(g);let S;for(;!(S=E(m()));)d();return u(),S}}var P1={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||(0,qn.isBytes)(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function U1(n,e,t={}){let r=(i,s,o)=>{let a=P1[s];if(typeof a!="function")throw new Error("invalid validator function");let u=n[i];if(!(o&&u===void 0)&&!a(u,n))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+u)};for(let[i,s]of Object.entries(e))r(i,s,!1);for(let[i,s]of Object.entries(t))r(i,s,!0);return n}function D1(n){return typeof n=="function"&&Number.isSafeInteger(n.outputLen)}function H1(n,e,t={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(i,s,o){let a=n[i];if(o&&a===void 0)return;let u=typeof a;if(u!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${u}`)}Object.entries(e).forEach(([i,s])=>r(i,s,!1)),Object.entries(t).forEach(([i,s])=>r(i,s,!0))}var z1=()=>{throw new Error("not implemented")};ge.notImplemented=z1;function F1(n){let e=new WeakMap;return(t,...r)=>{let i=e.get(t);if(i!==void 0)return i;let s=n(t,...r);return e.set(t,s),s}}});var Pr=Ee(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.isNegativeLE=void 0;et.mod=dn;et.pow=V1;et.pow2=$1;et.invert=oa;et.tonelliShanks=al;et.FpSqrt=H0;et.validateField=Y1;et.FpPow=cl;et.FpInvertBatch=z0;et.FpDiv=X1;et.FpLegendre=aa;et.FpIsSquare=J1;et.nLength=ul;et.Field=ca;et.FpSqrtOdd=Q1;et.FpSqrtEven=eE;et.hashToPrivateScalar=tE;et.getFieldBytesLength=ll;et.getMinHashLength=F0;et.mapHashToField=nE;var pn=pr(),on=BigInt(0),kt=BigInt(1),ci=BigInt(2),C0=BigInt(3),M0=BigInt(4),L0=BigInt(5),K1=BigInt(7),P0=BigInt(8),q1=BigInt(9),U0=BigInt(16);function dn(n,e){let t=n%e;return t>=on?t:e+t}function V1(n,e,t){return cl(ca(t),n,e)}function $1(n,e,t){let r=n;for(;e-- >on;)r*=r,r%=t;return r}function oa(n,e){if(n===on)throw new Error("invert: expected non-zero number");if(e<=on)throw new Error("invert: expected positive modulus, got "+e);let t=dn(n,e),r=e,i=on,s=kt,o=kt,a=on;for(;t!==on;){let f=r/t,d=r%t,m=i-o*f,_=s-a*f;r=t,t=d,i=o,s=a,o=m,a=_}if(r!==kt)throw new Error("invert: does not exist");return dn(i,e)}function ol(n,e,t){if(!n.eql(n.sqr(e),t))throw new Error("Cannot find square root")}function D0(n,e){let t=(n.ORDER+kt)/M0,r=n.pow(e,t);return ol(n,r,e),r}function W1(n,e){let t=(n.ORDER-L0)/P0,r=n.mul(e,ci),i=n.pow(r,t),s=n.mul(e,i),o=n.mul(n.mul(s,ci),i),a=n.mul(s,n.sub(o,n.ONE));return ol(n,a,e),a}function G1(n){let e=ca(n),t=al(n),r=t(e,e.neg(e.ONE)),i=t(e,r),s=t(e,e.neg(r)),o=(n+K1)/U0;return(a,u)=>{let f=a.pow(u,o),d=a.mul(f,r),m=a.mul(f,i),_=a.mul(f,s),g=a.eql(a.sqr(d),u),E=a.eql(a.sqr(m),u);f=a.cmov(f,d,g),d=a.cmov(_,m,E);let S=a.eql(a.sqr(d),u),k=a.cmov(f,d,S);return ol(a,k,u),k}}function al(n){if(n<C0)throw new Error("sqrt is not defined for small field");let e=n-kt,t=0;for(;e%ci===on;)e/=ci,t++;let r=ci,i=ca(n);for(;aa(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return D0;let s=i.pow(r,e),o=(e+kt)/ci;return function(u,f){if(u.is0(f))return f;if(aa(u,f)!==1)throw new Error("Cannot find square root");let d=t,m=u.mul(u.ONE,s),_=u.pow(f,e),g=u.pow(f,o);for(;!u.eql(_,u.ONE);){if(u.is0(_))return u.ZERO;let E=1,S=u.sqr(_);for(;!u.eql(S,u.ONE);)if(E++,S=u.sqr(S),E===d)throw new Error("Cannot find square root");let k=kt<<BigInt(d-E-1),O=u.pow(m,k);d=E,m=u.sqr(O),_=u.mul(_,m),g=u.mul(g,O)}return g}}function H0(n){return n%M0===C0?D0:n%P0===L0?W1:n%U0===q1?G1(n):al(n)}var j1=(n,e)=>(dn(n,e)&kt)===kt;et.isNegativeLE=j1;var Z1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Y1(n){let e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=Z1.reduce((r,i)=>(r[i]="function",r),e);return(0,pn._validateObject)(n,t),n}function cl(n,e,t){if(t<on)throw new Error("invalid exponent, negatives unsupported");if(t===on)return n.ONE;if(t===kt)return e;let r=n.ONE,i=e;for(;t>on;)t&kt&&(r=n.mul(r,i)),i=n.sqr(i),t>>=kt;return r}function z0(n,e,t=!1){let r=new Array(e.length).fill(t?n.ZERO:void 0),i=e.reduce((o,a,u)=>n.is0(a)?o:(r[u]=o,n.mul(o,a)),n.ONE),s=n.inv(i);return e.reduceRight((o,a,u)=>n.is0(a)?o:(r[u]=n.mul(o,r[u]),n.mul(o,a)),s),r}function X1(n,e,t){return n.mul(e,typeof t=="bigint"?oa(t,n.ORDER):n.inv(t))}function aa(n,e){let t=(n.ORDER-kt)/ci,r=n.pow(e,t),i=n.eql(r,n.ONE),s=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function J1(n,e){return aa(n,e)===1}function ul(n,e){e!==void 0&&(0,pn.anumber)(e);let t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function ca(n,e,t=!1,r={}){if(n<=on)throw new Error("invalid field: expected ORDER > 0, got "+n);let i,s,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||t)throw new Error("cannot specify opts in two arguments");let _=e;_.BITS&&(i=_.BITS),_.sqrt&&(s=_.sqrt),typeof _.isLE=="boolean"&&(t=_.isLE),typeof _.modFromBytes=="boolean"&&(o=_.modFromBytes),a=_.allowedLengths}else typeof e=="number"&&(i=e),r.sqrt&&(s=r.sqrt);let{nBitLength:u,nByteLength:f}=ul(n,i);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d,m=Object.freeze({ORDER:n,isLE:t,BITS:u,BYTES:f,MASK:(0,pn.bitMask)(u),ZERO:on,ONE:kt,allowedLengths:a,create:_=>dn(_,n),isValid:_=>{if(typeof _!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof _);return on<=_&&_<n},is0:_=>_===on,isValidNot0:_=>!m.is0(_)&&m.isValid(_),isOdd:_=>(_&kt)===kt,neg:_=>dn(-_,n),eql:(_,g)=>_===g,sqr:_=>dn(_*_,n),add:(_,g)=>dn(_+g,n),sub:(_,g)=>dn(_-g,n),mul:(_,g)=>dn(_*g,n),pow:(_,g)=>cl(m,_,g),div:(_,g)=>dn(_*oa(g,n),n),sqrN:_=>_*_,addN:(_,g)=>_+g,subN:(_,g)=>_-g,mulN:(_,g)=>_*g,inv:_=>oa(_,n),sqrt:s||(_=>(d||(d=H0(n)),d(m,_))),toBytes:_=>t?(0,pn.numberToBytesLE)(_,f):(0,pn.numberToBytesBE)(_,f),fromBytes:(_,g=!0)=>{if(a){if(!a.includes(_.length)||_.length>f)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+_.length);let S=new Uint8Array(f);S.set(_,t?0:S.length-_.length),_=S}if(_.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+_.length);let E=t?(0,pn.bytesToNumberLE)(_):(0,pn.bytesToNumberBE)(_);if(o&&(E=dn(E,n)),!g&&!m.isValid(E))throw new Error("invalid field element: outside of range 0..ORDER");return E},invertBatch:_=>z0(m,_),cmov:(_,g,E)=>E?g:_});return Object.freeze(m)}function Q1(n,e){if(!n.isOdd)throw new Error("Field doesn't have isOdd");let t=n.sqrt(e);return n.isOdd(t)?t:n.neg(t)}function eE(n,e){if(!n.isOdd)throw new Error("Field doesn't have isOdd");let t=n.sqrt(e);return n.isOdd(t)?n.neg(t):t}function tE(n,e,t=!1){n=(0,pn.ensureBytes)("privateHash",n);let r=n.length,i=ul(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error("hashToPrivateScalar: expected "+i+"-1024 bytes of input, got "+r);let s=t?(0,pn.bytesToNumberLE)(n):(0,pn.bytesToNumberBE)(n);return dn(s,e-kt)+kt}function ll(n){if(typeof n!="bigint")throw new Error("field order must be bigint");let e=n.toString(2).length;return Math.ceil(e/8)}function F0(n){let e=ll(n);return e+Math.ceil(e/2)}function nE(n,e,t=!1){let r=n.length,i=ll(e),s=F0(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);let o=t?(0,pn.bytesToNumberLE)(n):(0,pn.bytesToNumberBE)(n),a=dn(o,e-kt)+kt;return t?(0,pn.numberToBytesLE)(a,i):(0,pn.numberToBytesBE)(a,i)}});var ua=Ee(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.wNAF=void 0;Nn.negateCt=pl;Nn.normalizeZ=rE;Nn.mulEndoUnsafe=iE;Nn.pippenger=sE;Nn.precomputeMSMUnsafe=oE;Nn.validateBasic=aE;Nn._createCurveFields=cE;var Bs=pr(),Cs=Pr(),Vi=BigInt(0),ui=BigInt(1);function pl(n,e){let t=e.negate();return n?t:e}function rE(n,e){let t=(0,Cs.FpInvertBatch)(n.Fp,e.map(r=>r.Z));return e.map((r,i)=>n.fromAffine(r.toAffine(t[i])))}function gl(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function fl(n,e){gl(n,e);let t=Math.ceil(e/n)+1,r=2**(n-1),i=2**n,s=(0,Bs.bitMask)(n),o=BigInt(n);return{windows:t,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function K0(n,e,t){let{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=t,a=Number(n&i),u=n>>o;a>r&&(a-=s,u+=ui);let f=e*r,d=f+Math.abs(a)-1,m=a===0,_=a<0,g=e%2!==0;return{nextN:u,offset:d,isZero:m,isNeg:_,isNegF:g,offsetF:f}}function $0(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function W0(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}var hl=new WeakMap,G0=new WeakMap;function dl(n){return G0.get(n)||1}function q0(n){if(n!==Vi)throw new Error("invalid wNAF")}var yl=class{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let i=e;for(;t>Vi;)t&ui&&(r=r.add(i)),i=i.double(),t>>=ui;return r}precomputeWindow(e,t){let{windows:r,windowSize:i}=fl(t,this.bits),s=[],o=e,a=o;for(let u=0;u<r;u++){a=o,s.push(a);for(let f=1;f<i;f++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(e,t,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE,o=fl(e,this.bits);for(let a=0;a<o.windows;a++){let{nextN:u,offset:f,isZero:d,isNeg:m,isNegF:_,offsetF:g}=K0(r,a,o);r=u,d?s=s.add(pl(_,t[g])):i=i.add(pl(m,t[f]))}return q0(r),{p:i,f:s}}wNAFUnsafe(e,t,r,i=this.ZERO){let s=fl(e,this.bits);for(let o=0;o<s.windows&&r!==Vi;o++){let{nextN:a,offset:u,isZero:f,isNeg:d}=K0(r,o,s);if(r=a,!f){let m=t[u];i=i.add(d?m.negate():m)}}return q0(r),i}getPrecomputes(e,t,r){let i=hl.get(t);return i||(i=this.precomputeWindow(t,e),e!==1&&(typeof r=="function"&&(i=r(i)),hl.set(t,i))),i}cached(e,t,r){let i=dl(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)}unsafe(e,t,r,i){let s=dl(e);return s===1?this._unsafeLadder(e,t,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,r),t,i)}createCache(e,t){gl(t,this.bits),G0.set(e,t),hl.delete(e)}hasCache(e){return dl(e)!==1}};Nn.wNAF=yl;function iE(n,e,t,r){let i=e,s=n.ZERO,o=n.ZERO;for(;t>Vi||r>Vi;)t&ui&&(s=s.add(i)),r&ui&&(o=o.add(i)),i=i.double(),t>>=ui,r>>=ui;return{p1:s,p2:o}}function sE(n,e,t,r){$0(t,n),W0(r,e);let i=t.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");let o=n.ZERO,a=(0,Bs.bitLen)(BigInt(i)),u=1;a>12?u=a-3:a>4?u=a-2:a>0&&(u=2);let f=(0,Bs.bitMask)(u),d=new Array(Number(f)+1).fill(o),m=Math.floor((e.BITS-1)/u)*u,_=o;for(let g=m;g>=0;g-=u){d.fill(o);for(let S=0;S<s;S++){let k=r[S],O=Number(k>>BigInt(g)&f);d[O]=d[O].add(t[S])}let E=o;for(let S=d.length-1,k=o;S>0;S--)k=k.add(d[S]),E=E.add(k);if(_=_.add(E),g!==0)for(let S=0;S<u;S++)_=_.double()}return _}function oE(n,e,t,r){gl(r,e.BITS),$0(t,n);let i=n.ZERO,s=2**r-1,o=Math.ceil(e.BITS/r),a=(0,Bs.bitMask)(r),u=t.map(f=>{let d=[];for(let m=0,_=f;m<s;m++)d.push(_),_=_.add(f);return d});return f=>{if(W0(f,e),f.length>t.length)throw new Error("array of scalars must be smaller than array of points");let d=i;for(let m=0;m<o;m++){if(d!==i)for(let g=0;g<r;g++)d=d.double();let _=BigInt(o*r-(m+1)*r);for(let g=0;g<f.length;g++){let E=f[g],S=Number(E>>_&a);S&&(d=d.add(u[g][S-1]))}}return d}}function aE(n){return(0,Cs.validateField)(n.Fp),(0,Bs.validateObject)(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,Cs.nLength)(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}function V0(n,e,t){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return(0,Cs.validateField)(e),e}else return(0,Cs.Field)(n,{isLE:t})}function cE(n,e,t={},r){if(r===void 0&&(r=n==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(let u of["p","n","h"]){let f=e[u];if(!(typeof f=="bigint"&&f>Vi))throw new Error(`CURVE.${u} must be positive bigint`)}let i=V0(e.p,t.Fp,r),s=V0(e.n,t.Fn,r),a=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(let u of a)if(!i.isValid(e[u]))throw new Error(`CURVE.${u} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}});var Y0=Ee(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.PrimeEdwardsPoint=void 0;fi.edwards=j0;fi.eddsa=Z0;fi.twistedEdwards=pE;var Te=pr(),li=ua(),uE=Pr(),Ur=BigInt(0),Bt=BigInt(1),ml=BigInt(2),lE=BigInt(8);function fE(n,e,t,r){let i=n.sqr(t),s=n.sqr(r),o=n.add(n.mul(e.a,i),s),a=n.add(n.ONE,n.mul(e.d,n.mul(i,s)));return n.eql(o,a)}function j0(n,e={}){let t=(0,li._createCurveFields)("edwards",n,e,e.FpFnLE),{Fp:r,Fn:i}=t,s=t.CURVE,{h:o}=s;(0,Te._validateObject)(e,{},{uvRatio:"function"});let a=ml<<BigInt(i.BYTES*8)-Bt,u=k=>r.create(k),f=e.uvRatio||((k,O)=>{try{return{isValid:!0,value:r.sqrt(r.div(k,O))}}catch{return{isValid:!1,value:Ur}}});if(!fE(r,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function d(k,O,L=!1){let M=L?Bt:Ur;return(0,Te.aInRange)("coordinate "+k,O,M,a),O}function m(k){if(!(k instanceof E))throw new Error("ExtendedPoint expected")}let _=(0,Te.memoized)((k,O)=>{let{X:L,Y:M,Z:C}=k,$=k.is0();O==null&&(O=$?lE:r.inv(C));let G=u(L*O),q=u(M*O),j=r.mul(C,O);if($)return{x:Ur,y:Bt};if(j!==Bt)throw new Error("invZ was invalid");return{x:G,y:q}}),g=(0,Te.memoized)(k=>{let{a:O,d:L}=s;if(k.is0())throw new Error("bad point: ZERO");let{X:M,Y:C,Z:$,T:G}=k,q=u(M*M),j=u(C*C),H=u($*$),V=u(H*H),K=u(q*O),J=u(H*u(K+j)),w=u(V+u(L*u(q*j)));if(J!==w)throw new Error("bad point: equation left != right (1)");let c=u(M*C),h=u($*G);if(c!==h)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(O,L,M,C){this.X=d("x",O),this.Y=d("y",L),this.Z=d("z",M,!0),this.T=d("t",C),Object.freeze(this)}static CURVE(){return s}static fromAffine(O){if(O instanceof E)throw new Error("extended point not allowed");let{x:L,y:M}=O||{};return d("x",L),d("y",M),new E(L,M,Bt,u(L*M))}static fromBytes(O,L=!1){let M=r.BYTES,{a:C,d:$}=s;O=(0,Te.copyBytes)((0,Te._abytes2)(O,M,"point")),(0,Te._abool2)(L,"zip215");let G=(0,Te.copyBytes)(O),q=O[M-1];G[M-1]=q&-129;let j=(0,Te.bytesToNumberLE)(G),H=L?a:r.ORDER;(0,Te.aInRange)("point.y",j,Ur,H);let V=u(j*j),K=u(V-Bt),J=u($*V-C),{isValid:w,value:c}=f(K,J);if(!w)throw new Error("bad point: invalid y coordinate");let h=(c&Bt)===Bt,y=(q&128)!==0;if(!L&&c===Ur&&y)throw new Error("bad point: x=0 and x_0=1");return y!==h&&(c=u(-c)),E.fromAffine({x:c,y:j})}static fromHex(O,L=!1){return E.fromBytes((0,Te.ensureBytes)("point",O),L)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(O=8,L=!0){return S.createCache(this,O),L||this.multiply(ml),this}assertValidity(){g(this)}equals(O){m(O);let{X:L,Y:M,Z:C}=this,{X:$,Y:G,Z:q}=O,j=u(L*q),H=u($*C),V=u(M*q),K=u(G*C);return j===H&&V===K}is0(){return this.equals(E.ZERO)}negate(){return new E(u(-this.X),this.Y,this.Z,u(-this.T))}double(){let{a:O}=s,{X:L,Y:M,Z:C}=this,$=u(L*L),G=u(M*M),q=u(ml*u(C*C)),j=u(O*$),H=L+M,V=u(u(H*H)-$-G),K=j+G,J=K-q,w=j-G,c=u(V*J),h=u(K*w),y=u(V*w),b=u(J*K);return new E(c,h,b,y)}add(O){m(O);let{a:L,d:M}=s,{X:C,Y:$,Z:G,T:q}=this,{X:j,Y:H,Z:V,T:K}=O,J=u(C*j),w=u($*H),c=u(q*M*K),h=u(G*V),y=u((C+$)*(j+H)-J-w),b=h-c,A=h+c,v=u(w-L*J),I=u(y*b),R=u(A*v),p=u(y*v),x=u(b*A);return new E(I,R,x,p)}subtract(O){return this.add(O.negate())}multiply(O){if(!i.isValidNot0(O))throw new Error("invalid scalar: expected 1 <= sc < curve.n");let{p:L,f:M}=S.cached(this,O,C=>(0,li.normalizeZ)(E,C));return(0,li.normalizeZ)(E,[L,M])[0]}multiplyUnsafe(O,L=E.ZERO){if(!i.isValid(O))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return O===Ur?E.ZERO:this.is0()||O===Bt?this:S.unsafe(this,O,M=>(0,li.normalizeZ)(E,M),L)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return S.unsafe(this,s.n).is0()}toAffine(O){return _(this,O)}clearCofactor(){return o===Bt?this:this.multiplyUnsafe(o)}toBytes(){let{x:O,y:L}=this.toAffine(),M=r.toBytes(L);return M[M.length-1]|=O&Bt?128:0,M}toHex(){return(0,Te.bytesToHex)(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(O){return(0,li.normalizeZ)(E,O)}static msm(O,L){return(0,li.pippenger)(E,i,O,L)}_setWindowSize(O){this.precompute(O)}toRawBytes(){return this.toBytes()}}E.BASE=new E(s.Gx,s.Gy,Bt,u(s.Gx*s.Gy)),E.ZERO=new E(Ur,Bt,Bt,Ur),E.Fp=r,E.Fn=i;let S=new li.wNAF(E,i.BITS);return E.BASE.precompute(8),E}var _l=class{constructor(e){this.ep=e}static fromBytes(e){(0,Te.notImplemented)()}static fromHex(e){(0,Te.notImplemented)()}get x(){return this.toAffine().x}get y(){return this.toAffine().y}clearCofactor(){return this}assertValidity(){this.ep.assertValidity()}toAffine(e){return this.ep.toAffine(e)}toHex(){return(0,Te.bytesToHex)(this.toBytes())}toString(){return this.toHex()}isTorsionFree(){return!0}isSmallOrder(){return!1}add(e){return this.assertSame(e),this.init(this.ep.add(e.ep))}subtract(e){return this.assertSame(e),this.init(this.ep.subtract(e.ep))}multiply(e){return this.init(this.ep.multiply(e))}multiplyUnsafe(e){return this.init(this.ep.multiplyUnsafe(e))}double(){return this.init(this.ep.double())}negate(){return this.init(this.ep.negate())}precompute(e,t){return this.init(this.ep.precompute(e,t))}toRawBytes(){return this.toBytes()}};fi.PrimeEdwardsPoint=_l;function Z0(n,e,t={}){if(typeof e!="function")throw new Error('"hash" function param is required');(0,Te._validateObject)(t,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:r}=t,{BASE:i,Fp:s,Fn:o}=n,a=t.randomBytes||Te.randomBytes,u=t.adjustScalarBytes||(H=>H),f=t.domain||((H,V,K)=>{if((0,Te._abool2)(K,"phflag"),V.length||K)throw new Error("Contexts/pre-hash are not supported");return H});function d(H){return o.create((0,Te.bytesToNumberLE)(H))}function m(H){let V=M.secretKey;H=(0,Te.ensureBytes)("private key",H,V);let K=(0,Te.ensureBytes)("hashed private key",e(H),2*V),J=u(K.slice(0,V)),w=K.slice(V,2*V),c=d(J);return{head:J,prefix:w,scalar:c}}function _(H){let{head:V,prefix:K,scalar:J}=m(H),w=i.multiply(J),c=w.toBytes();return{head:V,prefix:K,scalar:J,point:w,pointBytes:c}}function g(H){return _(H).pointBytes}function E(H=Uint8Array.of(),...V){let K=(0,Te.concatBytes)(...V);return d(e(f(K,(0,Te.ensureBytes)("context",H),!!r)))}function S(H,V,K={}){H=(0,Te.ensureBytes)("message",H),r&&(H=r(H));let{prefix:J,scalar:w,pointBytes:c}=_(V),h=E(K.context,J,H),y=i.multiply(h).toBytes(),b=E(K.context,y,c,H),A=o.create(h+b*w);if(!o.isValid(A))throw new Error("sign failed: invalid s");let v=(0,Te.concatBytes)(y,o.toBytes(A));return(0,Te._abytes2)(v,M.signature,"result")}let k={zip215:!0};function O(H,V,K,J=k){let{context:w,zip215:c}=J,h=M.signature;H=(0,Te.ensureBytes)("signature",H,h),V=(0,Te.ensureBytes)("message",V),K=(0,Te.ensureBytes)("publicKey",K,M.publicKey),c!==void 0&&(0,Te._abool2)(c,"zip215"),r&&(V=r(V));let y=h/2,b=H.subarray(0,y),A=(0,Te.bytesToNumberLE)(H.subarray(y,h)),v,I,R;try{v=n.fromBytes(K,c),I=n.fromBytes(b,c),R=i.multiplyUnsafe(A)}catch{return!1}if(!c&&v.isSmallOrder())return!1;let p=E(w,I.toBytes(),v.toBytes(),V);return I.add(v.multiplyUnsafe(p)).subtract(R).clearCofactor().is0()}let L=s.BYTES,M={secretKey:L,publicKey:L,signature:2*L,seed:L};function C(H=a(M.seed)){return(0,Te._abytes2)(H,M.seed,"seed")}function $(H){let V=j.randomSecretKey(H);return{secretKey:V,publicKey:g(V)}}function G(H){return(0,Te.isBytes)(H)&&H.length===o.BYTES}function q(H,V){try{return!!n.fromBytes(H,V)}catch{return!1}}let j={getExtendedPublicKey:_,randomSecretKey:C,isValidSecretKey:G,isValidPublicKey:q,toMontgomery(H){let{y:V}=n.fromBytes(H),K=M.publicKey,J=K===32;if(!J&&K!==57)throw new Error("only defined for 25519 and 448");let w=J?s.div(Bt+V,Bt-V):s.div(V-Bt,V+Bt);return s.toBytes(w)},toMontgomerySecret(H){let V=M.secretKey;(0,Te._abytes2)(H,V);let K=e(H.subarray(0,V));return u(K).subarray(0,V)},randomPrivateKey:C,precompute(H=8,V=n.BASE){return V.precompute(H,!1)}};return Object.freeze({keygen:$,getPublicKey:g,sign:S,verify:O,utils:j,Point:n,lengths:M})}function hE(n){let e={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp,r=(0,uE.Field)(e.n,n.nBitLength,!0),i={Fp:t,Fn:r,uvRatio:n.uvRatio},s={randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:e,curveOpts:i,hash:n.hash,eddsaOpts:s}}function dE(n,e){let t=e.Point;return Object.assign({},e,{ExtendedPoint:t,CURVE:n,nBitLength:t.Fn.BITS,nByteLength:t.Fn.BYTES})}function pE(n){let{CURVE:e,curveOpts:t,hash:r,eddsaOpts:i}=hE(n),s=j0(e,t),o=Z0(s,r,i);return dE(n,o)}});var bl=Ee(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn._DST_scalar=void 0;Vn.expand_message_xmd=Q0;Vn.expand_message_xof=ep;Vn.hash_to_field=la;Vn.isogenyMap=mE;Vn.createHasher=_E;var Pt=pr(),X0=Pr(),yE=Pt.bytesToNumberBE;function Dr(n,e){if(Ms(n),Ms(e),n<0||n>=1<<8*e)throw new Error("invalid I2OSP input: "+n);let t=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)t[r]=n&255,n>>>=8;return new Uint8Array(t)}function gE(n,e){let t=new Uint8Array(n.length);for(let r=0;r<n.length;r++)t[r]=n[r]^e[r];return t}function Ms(n){if(!Number.isSafeInteger(n))throw new Error("number expected")}function J0(n){if(!(0,Pt.isBytes)(n)&&typeof n!="string")throw new Error("DST must be Uint8Array or string");return typeof n=="string"?(0,Pt.utf8ToBytes)(n):n}function Q0(n,e,t,r){(0,Pt.abytes)(n),Ms(t),e=J0(e),e.length>255&&(e=r((0,Pt.concatBytes)((0,Pt.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));let{outputLen:i,blockLen:s}=r,o=Math.ceil(t/i);if(t>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");let a=(0,Pt.concatBytes)(e,Dr(e.length,1)),u=Dr(0,s),f=Dr(t,2),d=new Array(o),m=r((0,Pt.concatBytes)(u,n,f,Dr(0,1),a));d[0]=r((0,Pt.concatBytes)(m,Dr(1,1),a));for(let g=1;g<=o;g++){let E=[gE(m,d[g-1]),Dr(g+1,1),a];d[g]=r((0,Pt.concatBytes)(...E))}return(0,Pt.concatBytes)(...d).slice(0,t)}function ep(n,e,t,r,i){if((0,Pt.abytes)(n),Ms(t),e=J0(e),e.length>255){let s=Math.ceil(2*r/8);e=i.create({dkLen:s}).update((0,Pt.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(t>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:t}).update(n).update(Dr(t,2)).update(e).update(Dr(e.length,1)).digest()}function la(n,e,t){(0,Pt._validateObject)(t,{p:"bigint",m:"number",k:"number",hash:"function"});let{p:r,k:i,m:s,hash:o,expand:a,DST:u}=t;if(!(0,Pt.isHash)(t.hash))throw new Error("expected valid hash");(0,Pt.abytes)(n),Ms(e);let f=r.toString(2).length,d=Math.ceil((f+i)/8),m=e*s*d,_;if(a==="xmd")_=Q0(n,u,m,o);else if(a==="xof")_=ep(n,u,m,i,o);else if(a==="_internal_pass")_=n;else throw new Error('expand must be "xmd" or "xof"');let g=new Array(e);for(let E=0;E<e;E++){let S=new Array(s);for(let k=0;k<s;k++){let O=d*(k+E*s),L=_.subarray(O,O+d);S[k]=(0,X0.mod)(yE(L),r)}g[E]=S}return g}function mE(n,e){let t=e.map(r=>Array.from(r).reverse());return(r,i)=>{let[s,o,a,u]=t.map(m=>m.reduce((_,g)=>n.add(n.mul(_,r),g))),[f,d]=(0,X0.FpInvertBatch)(n,[o,u],!0);return r=n.mul(s,f),i=n.mul(i,n.mul(a,d)),{x:r,y:i}}}Vn._DST_scalar=(0,Pt.utf8ToBytes)("HashToScalar-");function _E(n,e,t){if(typeof e!="function")throw new Error("mapToCurve() must be defined");function r(s){return n.fromAffine(e(s))}function i(s){let o=s.clearCofactor();return o.equals(n.ZERO)?n.ZERO:(o.assertValidity(),o)}return{defaults:t,hashToCurve(s,o){let a=Object.assign({},t,o),u=la(s,2,a),f=r(u[0]),d=r(u[1]);return i(f.add(d))},encodeToCurve(s,o){let a=t.encodeDST?{DST:t.encodeDST}:{},u=Object.assign({},t,a,o),f=la(s,1,u),d=r(f[0]);return i(d)},mapToCurve(s){if(!Array.isArray(s))throw new Error("expected array of bigints");for(let o of s)if(typeof o!="bigint")throw new Error("expected array of bigints");return i(r(s))},hashToScalar(s,o){let a=n.Fn.ORDER,u=Object.assign({},t,{p:a,m:1,DST:Vn._DST_scalar},o);return la(s,1,u)[0][0]}}}});var tp=Ee(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.montgomery=EE;var $n=pr(),bE=Pr(),Ls=BigInt(0),$i=BigInt(1),fa=BigInt(2);function wE(n){return(0,$n._validateObject)(n,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...n})}function EE(n){let e=wE(n),{P:t,type:r,adjustScalarBytes:i,powPminus2:s,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");let u=o||$n.randomBytes,f=a?255:448,d=a?32:56,m=BigInt(a?9:5),_=BigInt(a?121665:39081),g=a?fa**BigInt(254):fa**BigInt(447),E=a?BigInt(8)*fa**BigInt(251)-$i:BigInt(4)*fa**BigInt(445)-$i,S=g+E+$i,k=w=>(0,bE.mod)(w,t),O=L(m);function L(w){return(0,$n.numberToBytesLE)(k(w),d)}function M(w){let c=(0,$n.ensureBytes)("u coordinate",w,d);return a&&(c[31]&=127),k((0,$n.bytesToNumberLE)(c))}function C(w){return(0,$n.bytesToNumberLE)(i((0,$n.ensureBytes)("scalar",w,d)))}function $(w,c){let h=j(M(c),C(w));if(h===Ls)throw new Error("invalid private or public key received");return L(h)}function G(w){return $(w,O)}function q(w,c,h){let y=k(w*(c-h));return c=k(c-y),h=k(h+y),{x_2:c,x_3:h}}function j(w,c){(0,$n.aInRange)("u",w,Ls,t),(0,$n.aInRange)("scalar",c,g,S);let h=c,y=w,b=$i,A=Ls,v=w,I=$i,R=Ls;for(let x=BigInt(f-1);x>=Ls;x--){let Z=h>>x&$i;R^=Z,{x_2:b,x_3:v}=q(R,b,v),{x_2:A,x_3:I}=q(R,A,I),R=Z;let W=b+A,X=k(W*W),ie=b-A,pe=k(ie*ie),ce=X-pe,He=v+I,Ie=v-I,Se=k(Ie*W),Un=k(He*ie),$e=Se+Un,Ve=Se-Un;v=k($e*$e),I=k(y*k(Ve*Ve)),b=k(X*pe),A=k(ce*(X+k(_*ce)))}({x_2:b,x_3:v}=q(R,b,v)),{x_2:A,x_3:I}=q(R,A,I);let p=s(A);return k(b*p)}let H={secretKey:d,publicKey:d,seed:d},V=(w=u(d))=>((0,$n.abytes)(w,H.seed),w);function K(w){let c=V(w);return{secretKey:c,publicKey:G(c)}}return{keygen:K,getSharedSecret:(w,c)=>$(w,c),getPublicKey:w=>G(w),scalarMult:$,scalarMultBase:G,utils:{randomSecretKey:V,randomPrivateKey:V},GuBytes:O.slice(),lengths:H}}});var dp=Ee(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.hash_to_ristretto255=me.hashToRistretto255=me.encodeToCurve=me.hashToCurve=me.RistrettoPoint=me.edwardsToMontgomery=me.ED25519_TORSION_SUBGROUP=me.ristretto255_hasher=me.ristretto255=me.ed25519_hasher=me.x25519=me.ed25519ph=me.ed25519ctx=me.ed25519=void 0;me.edwardsToMontgomeryPub=hp;me.edwardsToMontgomeryPriv=LE;var Ps=ia(),da=Fn(),AE=ua(),ya=Y0(),ha=bl(),Ce=Pr(),RE=tp(),hi=pr(),vE=BigInt(0),Wn=BigInt(1),pa=BigInt(2),sp=BigInt(3),op=BigInt(5),vl=BigInt(8),yr=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Us={p:yr,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:vl,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function ap(n){let e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),s=yr,a=n*n%s*n%s,u=(0,Ce.pow2)(a,pa,s)*a%s,f=(0,Ce.pow2)(u,Wn,s)*n%s,d=(0,Ce.pow2)(f,op,s)*f%s,m=(0,Ce.pow2)(d,e,s)*d%s,_=(0,Ce.pow2)(m,t,s)*m%s,g=(0,Ce.pow2)(_,r,s)*_%s,E=(0,Ce.pow2)(g,i,s)*g%s,S=(0,Ce.pow2)(E,i,s)*g%s,k=(0,Ce.pow2)(S,e,s)*d%s;return{pow_p_5_8:(0,Ce.pow2)(k,pa,s)*n%s,b2:a}}function cp(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}var El=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function xl(n,e){let t=yr,r=(0,Ce.mod)(e*e*e,t),i=(0,Ce.mod)(r*r*e,t),s=ap(n*i).pow_p_5_8,o=(0,Ce.mod)(n*r*s,t),a=(0,Ce.mod)(e*o*o,t),u=o,f=(0,Ce.mod)(o*El,t),d=a===n,m=a===(0,Ce.mod)(-n,t),_=a===(0,Ce.mod)(-n*El,t);return d&&(o=u),(m||_)&&(o=f),(0,Ce.isNegativeLE)(o,t)&&(o=(0,Ce.mod)(-o,t)),{isValid:d||m,value:o}}var ne=(0,Ce.Field)(Us.p,{isLE:!0}),up=(0,Ce.Field)(Us.n,{isLE:!0}),Sl={...Us,Fp:ne,hash:Ps.sha512,adjustScalarBytes:cp,uvRatio:xl};me.ed25519=(0,ya.twistedEdwards)(Sl);function lp(n,e,t){if(e.length>255)throw new Error("Context is too big");return(0,da.concatBytes)((0,da.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([t?1:0,e.length]),e,n)}me.ed25519ctx=(0,ya.twistedEdwards)({...Sl,domain:lp});me.ed25519ph=(0,ya.twistedEdwards)(Object.assign({},Sl,{domain:lp,prehash:Ps.sha512}));me.x25519=(()=>{let n=ne.ORDER;return(0,RE.montgomery)({P:n,type:"x25519",powPminus2:e=>{let{pow_p_5_8:t,b2:r}=ap(e);return(0,Ce.mod)((0,Ce.pow2)(t,sp,n)*r,n)},adjustScalarBytes:cp})})();var xE=(yr+sp)/vl,SE=ne.pow(pa,xE),np=ne.sqrt(ne.neg(ne.ONE));function IE(n){let e=(yr-op)/vl,t=BigInt(486662),r=ne.sqr(n);r=ne.mul(r,pa);let i=ne.add(r,ne.ONE),s=ne.neg(t),o=ne.sqr(i),a=ne.mul(o,i),u=ne.mul(r,t);u=ne.mul(u,s),u=ne.add(u,o),u=ne.mul(u,s);let f=ne.sqr(a);o=ne.sqr(f),f=ne.mul(f,a),f=ne.mul(f,u),o=ne.mul(o,f);let d=ne.pow(o,e);d=ne.mul(d,f);let m=ne.mul(d,np);o=ne.sqr(d),o=ne.mul(o,a);let _=ne.eql(o,u),g=ne.cmov(m,d,_),E=ne.mul(s,r),S=ne.mul(d,n);S=ne.mul(S,SE);let k=ne.mul(S,np),O=ne.mul(u,r);o=ne.sqr(S),o=ne.mul(o,a);let L=ne.eql(o,O),M=ne.cmov(k,S,L);o=ne.sqr(g),o=ne.mul(o,a);let C=ne.eql(o,u),$=ne.cmov(E,s,C),G=ne.cmov(M,g,C),q=ne.isOdd(G);return G=ne.cmov(G,ne.neg(G),C!==q),{xMn:$,xMd:i,yMn:G,yMd:Wn}}var kE=(0,Ce.FpSqrtEven)(ne,ne.neg(BigInt(486664)));function TE(n){let{xMn:e,xMd:t,yMn:r,yMd:i}=IE(n),s=ne.mul(e,i);s=ne.mul(s,kE);let o=ne.mul(t,r),a=ne.sub(e,t),u=ne.add(e,t),f=ne.mul(o,u),d=ne.eql(f,ne.ZERO);s=ne.cmov(s,ne.ZERO,d),o=ne.cmov(o,ne.ONE,d),a=ne.cmov(a,ne.ONE,d),u=ne.cmov(u,ne.ONE,d);let[m,_]=(0,Ce.FpInvertBatch)(ne,[o,u],!0);return{x:ne.mul(s,m),y:ne.mul(a,_)}}me.ed25519_hasher=(0,ha.createHasher)(me.ed25519.Point,n=>TE(n[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:yr,m:1,k:128,expand:"xmd",hash:Ps.sha512});var Al=El,OE=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),NE=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),BE=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),CE=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),rp=n=>xl(Wn,n),ME=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Rl=n=>me.ed25519.Point.Fp.create((0,hi.bytesToNumberLE)(n)&ME);function ip(n){let{d:e}=Us,t=yr,r=O=>ne.create(O),i=r(Al*n*n),s=r((i+Wn)*BE),o=BigInt(-1),a=r((o-e*i)*r(i+e)),{isValid:u,value:f}=xl(s,a),d=r(f*n);(0,Ce.isNegativeLE)(d,t)||(d=r(-d)),u||(f=d),u||(o=i);let m=r(o*(i-Wn)*CE-a),_=f*f,g=r((f+f)*a),E=r(m*OE),S=r(Wn-_),k=r(Wn+_);return new me.ed25519.Point(r(g*k),r(S*E),r(E*k),r(g*S))}function fp(n){(0,da.abytes)(n,64);let e=Rl(n.subarray(0,32)),t=ip(e),r=Rl(n.subarray(32,64)),i=ip(r);return new Bn(t.add(i))}var Bn=class n extends ya.PrimeEdwardsPoint{constructor(e){super(e)}static fromAffine(e){return new n(me.ed25519.Point.fromAffine(e))}assertSame(e){if(!(e instanceof n))throw new Error("RistrettoPoint expected")}init(e){return new n(e)}static hashToCurve(e){return fp((0,hi.ensureBytes)("ristrettoHash",e,64))}static fromBytes(e){(0,da.abytes)(e,32);let{a:t,d:r}=Us,i=yr,s=C=>ne.create(C),o=Rl(e);if(!(0,hi.equalBytes)(ne.toBytes(o),e)||(0,Ce.isNegativeLE)(o,i))throw new Error("invalid ristretto255 encoding 1");let a=s(o*o),u=s(Wn+t*a),f=s(Wn-t*a),d=s(u*u),m=s(f*f),_=s(t*r*d-m),{isValid:g,value:E}=rp(s(_*m)),S=s(E*f),k=s(E*S*_),O=s((o+o)*S);(0,Ce.isNegativeLE)(O,i)&&(O=s(-O));let L=s(u*k),M=s(O*L);if(!g||(0,Ce.isNegativeLE)(M,i)||L===vE)throw new Error("invalid ristretto255 encoding 2");return new n(new me.ed25519.Point(O,L,Wn,M))}static fromHex(e){return n.fromBytes((0,hi.ensureBytes)("ristrettoHex",e,32))}static msm(e,t){return(0,AE.pippenger)(n,me.ed25519.Point.Fn,e,t)}toBytes(){let{X:e,Y:t,Z:r,T:i}=this.ep,s=yr,o=k=>ne.create(k),a=o(o(r+t)*o(r-t)),u=o(e*t),f=o(u*u),{value:d}=rp(o(a*f)),m=o(d*a),_=o(d*u),g=o(m*_*i),E;if((0,Ce.isNegativeLE)(i*g,s)){let k=o(t*Al),O=o(e*Al);e=k,t=O,E=o(m*NE)}else E=_;(0,Ce.isNegativeLE)(e*g,s)&&(t=o(-t));let S=o((r-t)*E);return(0,Ce.isNegativeLE)(S,s)&&(S=o(-S)),ne.toBytes(S)}equals(e){this.assertSame(e);let{X:t,Y:r}=this.ep,{X:i,Y:s}=e.ep,o=f=>ne.create(f),a=o(t*s)===o(r*i),u=o(r*s)===o(t*i);return a||u}is0(){return this.equals(n.ZERO)}};Bn.BASE=new Bn(me.ed25519.Point.BASE);Bn.ZERO=new Bn(me.ed25519.Point.ZERO);Bn.Fp=ne;Bn.Fn=up;me.ristretto255={Point:Bn};me.ristretto255_hasher={hashToCurve(n,e){let t=e?.DST||"ristretto255_XMD:SHA-512_R255MAP_RO_",r=(0,ha.expand_message_xmd)(n,t,64,Ps.sha512);return fp(r)},hashToScalar(n,e={DST:ha._DST_scalar}){let t=(0,ha.expand_message_xmd)(n,e.DST,64,Ps.sha512);return up.create((0,hi.bytesToNumberLE)(t))}};me.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];function hp(n){return me.ed25519.utils.toMontgomery((0,hi.ensureBytes)("pub",n))}me.edwardsToMontgomery=hp;function LE(n){return me.ed25519.utils.toMontgomerySecret((0,hi.ensureBytes)("pub",n))}me.RistrettoPoint=Bn;me.hashToCurve=me.ed25519_hasher.hashToCurve;me.encodeToCurve=me.ed25519_hasher.encodeToCurve;me.hashToRistretto255=me.ristretto255_hasher.hashToCurve;me.hash_to_ristretto255=me.ristretto255_hasher.hashToCurve});var pp=Ee(()=>{});var Wi=Ee((yp,Il)=>{(function(n,e){"use strict";function t(w,c){if(!w)throw new Error(c||"Assertion failed")}function r(w,c){w.super_=c;var h=function(){};h.prototype=c.prototype,w.prototype=new h,w.prototype.constructor=w}function i(w,c,h){if(i.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&((c==="le"||c==="be")&&(h=c,c=10),this._init(w||0,c||10,h||"be"))}typeof n=="object"?n.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=pp().Buffer}catch{}i.isBN=function(c){return c instanceof i?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===i.wordSize&&Array.isArray(c.words)},i.max=function(c,h){return c.cmp(h)>0?c:h},i.min=function(c,h){return c.cmp(h)<0?c:h},i.prototype._init=function(c,h,y){if(typeof c=="number")return this._initNumber(c,h,y);if(typeof c=="object")return this._initArray(c,h,y);h==="hex"&&(h=16),t(h===(h|0)&&h>=2&&h<=36),c=c.toString().replace(/\s+/g,"");var b=0;c[0]==="-"&&(b++,this.negative=1),b<c.length&&(h===16?this._parseHex(c,b,y):(this._parseBase(c,h,b),y==="le"&&this._initArray(this.toArray(),h,y)))},i.prototype._initNumber=function(c,h,y){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(t(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),h,y)},i.prototype._initArray=function(c,h,y){if(t(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var A,v,I=0;if(y==="be")for(b=c.length-1,A=0;b>=0;b-=3)v=c[b]|c[b-1]<<8|c[b-2]<<16,this.words[A]|=v<<I&67108863,this.words[A+1]=v>>>26-I&67108863,I+=24,I>=26&&(I-=26,A++);else if(y==="le")for(b=0,A=0;b<c.length;b+=3)v=c[b]|c[b+1]<<8|c[b+2]<<16,this.words[A]|=v<<I&67108863,this.words[A+1]=v>>>26-I&67108863,I+=24,I>=26&&(I-=26,A++);return this._strip()};function o(w,c){var h=w.charCodeAt(c);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;t(!1,"Invalid character in "+w)}function a(w,c,h){var y=o(w,h);return h-1>=c&&(y|=o(w,h-1)<<4),y}i.prototype._parseHex=function(c,h,y){this.length=Math.ceil((c.length-h)/6),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var A=0,v=0,I;if(y==="be")for(b=c.length-1;b>=h;b-=2)I=a(c,h,b)<<A,this.words[v]|=I&67108863,A>=18?(A-=18,v+=1,this.words[v]|=I>>>26):A+=8;else{var R=c.length-h;for(b=R%2===0?h+1:h;b<c.length;b+=2)I=a(c,h,b)<<A,this.words[v]|=I&67108863,A>=18?(A-=18,v+=1,this.words[v]|=I>>>26):A+=8}this._strip()};function u(w,c,h,y){for(var b=0,A=0,v=Math.min(w.length,h),I=c;I<v;I++){var R=w.charCodeAt(I)-48;b*=y,R>=49?A=R-49+10:R>=17?A=R-17+10:A=R,t(R>=0&&A<y,"Invalid character"),b+=A}return b}i.prototype._parseBase=function(c,h,y){this.words=[0],this.length=1;for(var b=0,A=1;A<=67108863;A*=h)b++;b--,A=A/h|0;for(var v=c.length-y,I=v%b,R=Math.min(v,v-I)+y,p=0,x=y;x<R;x+=b)p=u(c,x,x+b,h),this.imuln(A),this.words[0]+p<67108864?this.words[0]+=p:this._iaddn(p);if(I!==0){var Z=1;for(p=u(c,x,c.length,h),x=0;x<I;x++)Z*=h;this.imuln(Z),this.words[0]+p<67108864?this.words[0]+=p:this._iaddn(p)}this._strip()},i.prototype.copy=function(c){c.words=new Array(this.length);for(var h=0;h<this.length;h++)c.words[h]=this.words[h];c.length=this.length,c.negative=this.negative,c.red=this.red};function f(w,c){w.words=c.words,w.length=c.length,w.negative=c.negative,w.red=c.red}if(i.prototype._move=function(c){f(c,this)},i.prototype.clone=function(){var c=new i(null);return this.copy(c),c},i.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch{i.prototype.inspect=d}else i.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(c,h){c=c||10,h=h|0||1;var y;if(c===16||c==="hex"){y="";for(var b=0,A=0,v=0;v<this.length;v++){var I=this.words[v],R=((I<<b|A)&16777215).toString(16);A=I>>>24-b&16777215,b+=2,b>=26&&(b-=26,v--),A!==0||v!==this.length-1?y=m[6-R.length]+R+y:y=R+y}for(A!==0&&(y=A.toString(16)+y);y.length%h!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(c===(c|0)&&c>=2&&c<=36){var p=_[c],x=g[c];y="";var Z=this.clone();for(Z.negative=0;!Z.isZero();){var W=Z.modrn(x).toString(c);Z=Z.idivn(x),Z.isZero()?y=W+y:y=m[p-W.length]+W+y}for(this.isZero()&&(y="0"+y);y.length%h!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}t(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},i.prototype.toJSON=function(){return this.toString(16,2)},s&&(i.prototype.toBuffer=function(c,h){return this.toArrayLike(s,c,h)}),i.prototype.toArray=function(c,h){return this.toArrayLike(Array,c,h)};var E=function(c,h){return c.allocUnsafe?c.allocUnsafe(h):new c(h)};i.prototype.toArrayLike=function(c,h,y){this._strip();var b=this.byteLength(),A=y||Math.max(1,b);t(b<=A,"byte array longer than desired length"),t(A>0,"Requested array length <= 0");var v=E(c,A),I=h==="le"?"LE":"BE";return this["_toArrayLike"+I](v,b),v},i.prototype._toArrayLikeLE=function(c,h){for(var y=0,b=0,A=0,v=0;A<this.length;A++){var I=this.words[A]<<v|b;c[y++]=I&255,y<c.length&&(c[y++]=I>>8&255),y<c.length&&(c[y++]=I>>16&255),v===6?(y<c.length&&(c[y++]=I>>24&255),b=0,v=0):(b=I>>>24,v+=2)}if(y<c.length)for(c[y++]=b;y<c.length;)c[y++]=0},i.prototype._toArrayLikeBE=function(c,h){for(var y=c.length-1,b=0,A=0,v=0;A<this.length;A++){var I=this.words[A]<<v|b;c[y--]=I&255,y>=0&&(c[y--]=I>>8&255),y>=0&&(c[y--]=I>>16&255),v===6?(y>=0&&(c[y--]=I>>24&255),b=0,v=0):(b=I>>>24,v+=2)}if(y>=0)for(c[y--]=b;y>=0;)c[y--]=0},Math.clz32?i.prototype._countBits=function(c){return 32-Math.clz32(c)}:i.prototype._countBits=function(c){var h=c,y=0;return h>=4096&&(y+=13,h>>>=13),h>=64&&(y+=7,h>>>=7),h>=8&&(y+=4,h>>>=4),h>=2&&(y+=2,h>>>=2),y+h},i.prototype._zeroBits=function(c){if(c===0)return 26;var h=c,y=0;return(h&8191)===0&&(y+=13,h>>>=13),(h&127)===0&&(y+=7,h>>>=7),(h&15)===0&&(y+=4,h>>>=4),(h&3)===0&&(y+=2,h>>>=2),(h&1)===0&&y++,y},i.prototype.bitLength=function(){var c=this.words[this.length-1],h=this._countBits(c);return(this.length-1)*26+h};function S(w){for(var c=new Array(w.bitLength()),h=0;h<c.length;h++){var y=h/26|0,b=h%26;c[h]=w.words[y]>>>b&1}return c}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,h=0;h<this.length;h++){var y=this._zeroBits(this.words[h]);if(c+=y,y!==26)break}return c},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},i.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]|c.words[h];return this._strip()},i.prototype.ior=function(c){return t((this.negative|c.negative)===0),this.iuor(c)},i.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},i.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},i.prototype.iuand=function(c){var h;this.length>c.length?h=c:h=this;for(var y=0;y<h.length;y++)this.words[y]=this.words[y]&c.words[y];return this.length=h.length,this._strip()},i.prototype.iand=function(c){return t((this.negative|c.negative)===0),this.iuand(c)},i.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},i.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},i.prototype.iuxor=function(c){var h,y;this.length>c.length?(h=this,y=c):(h=c,y=this);for(var b=0;b<y.length;b++)this.words[b]=h.words[b]^y.words[b];if(this!==h)for(;b<h.length;b++)this.words[b]=h.words[b];return this.length=h.length,this._strip()},i.prototype.ixor=function(c){return t((this.negative|c.negative)===0),this.iuxor(c)},i.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},i.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},i.prototype.inotn=function(c){t(typeof c=="number"&&c>=0);var h=Math.ceil(c/26)|0,y=c%26;this._expand(h),y>0&&h--;for(var b=0;b<h;b++)this.words[b]=~this.words[b]&67108863;return y>0&&(this.words[b]=~this.words[b]&67108863>>26-y),this._strip()},i.prototype.notn=function(c){return this.clone().inotn(c)},i.prototype.setn=function(c,h){t(typeof c=="number"&&c>=0);var y=c/26|0,b=c%26;return this._expand(y+1),h?this.words[y]=this.words[y]|1<<b:this.words[y]=this.words[y]&~(1<<b),this._strip()},i.prototype.iadd=function(c){var h;if(this.negative!==0&&c.negative===0)return this.negative=0,h=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,h=this.isub(c),c.negative=1,h._normSign();var y,b;this.length>c.length?(y=this,b=c):(y=c,b=this);for(var A=0,v=0;v<b.length;v++)h=(y.words[v]|0)+(b.words[v]|0)+A,this.words[v]=h&67108863,A=h>>>26;for(;A!==0&&v<y.length;v++)h=(y.words[v]|0)+A,this.words[v]=h&67108863,A=h>>>26;if(this.length=y.length,A!==0)this.words[this.length]=A,this.length++;else if(y!==this)for(;v<y.length;v++)this.words[v]=y.words[v];return this},i.prototype.add=function(c){var h;return c.negative!==0&&this.negative===0?(c.negative=0,h=this.sub(c),c.negative^=1,h):c.negative===0&&this.negative!==0?(this.negative=0,h=c.sub(this),this.negative=1,h):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},i.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var h=this.iadd(c);return c.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var y=this.cmp(c);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var b,A;y>0?(b=this,A=c):(b=c,A=this);for(var v=0,I=0;I<A.length;I++)h=(b.words[I]|0)-(A.words[I]|0)+v,v=h>>26,this.words[I]=h&67108863;for(;v!==0&&I<b.length;I++)h=(b.words[I]|0)+v,v=h>>26,this.words[I]=h&67108863;if(v===0&&I<b.length&&b!==this)for(;I<b.length;I++)this.words[I]=b.words[I];return this.length=Math.max(this.length,I),b!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(c){return this.clone().isub(c)};function k(w,c,h){h.negative=c.negative^w.negative;var y=w.length+c.length|0;h.length=y,y=y-1|0;var b=w.words[0]|0,A=c.words[0]|0,v=b*A,I=v&67108863,R=v/67108864|0;h.words[0]=I;for(var p=1;p<y;p++){for(var x=R>>>26,Z=R&67108863,W=Math.min(p,c.length-1),X=Math.max(0,p-w.length+1);X<=W;X++){var ie=p-X|0;b=w.words[ie]|0,A=c.words[X]|0,v=b*A+Z,x+=v/67108864|0,Z=v&67108863}h.words[p]=Z|0,R=x|0}return R!==0?h.words[p]=R|0:h.length--,h._strip()}var O=function(c,h,y){var b=c.words,A=h.words,v=y.words,I=0,R,p,x,Z=b[0]|0,W=Z&8191,X=Z>>>13,ie=b[1]|0,pe=ie&8191,ce=ie>>>13,He=b[2]|0,Ie=He&8191,Se=He>>>13,Un=b[3]|0,$e=Un&8191,Ve=Un>>>13,$o=b[4]|0,rt=$o&8191,it=$o>>>13,Is=b[5]|0,st=Is&8191,ot=Is>>>13,Wo=b[6]|0,at=Wo&8191,ct=Wo>>>13,Dn=b[7]|0,N=Dn&8191,B=Dn>>>13,P=b[8]|0,D=P&8191,Y=P>>>13,he=b[9]|0,ue=he&8191,be=he>>>13,Qe=A[0]|0,we=Qe&8191,Ne=Qe>>>13,Go=A[1]|0,ut=Go&8191,Ze=Go>>>13,Ed=A[2]|0,ft=Ed&8191,ht=Ed>>>13,Ad=A[3]|0,dt=Ad&8191,pt=Ad>>>13,Rd=A[4]|0,yt=Rd&8191,gt=Rd>>>13,vd=A[5]|0,mt=vd&8191,_t=vd>>>13,xd=A[6]|0,bt=xd&8191,wt=xd>>>13,Sd=A[7]|0,Et=Sd&8191,At=Sd>>>13,Id=A[8]|0,Rt=Id&8191,vt=Id>>>13,kd=A[9]|0,xt=kd&8191,St=kd>>>13;y.negative=c.negative^h.negative,y.length=19,R=Math.imul(W,we),p=Math.imul(W,Ne),p=p+Math.imul(X,we)|0,x=Math.imul(X,Ne);var Eu=(I+R|0)+((p&8191)<<13)|0;I=(x+(p>>>13)|0)+(Eu>>>26)|0,Eu&=67108863,R=Math.imul(pe,we),p=Math.imul(pe,Ne),p=p+Math.imul(ce,we)|0,x=Math.imul(ce,Ne),R=R+Math.imul(W,ut)|0,p=p+Math.imul(W,Ze)|0,p=p+Math.imul(X,ut)|0,x=x+Math.imul(X,Ze)|0;var Au=(I+R|0)+((p&8191)<<13)|0;I=(x+(p>>>13)|0)+(Au>>>26)|0,Au&=67108863,R=Math.imul(Ie,we),p=Math.imul(Ie,Ne),p=p+Math.imul(Se,we)|0,x=Math.imul(Se,Ne),R=R+Math.imul(pe,ut)|0,p=p+Math.imul(pe,Ze)|0,p=p+Math.imul(ce,ut)|0,x=x+Math.imul(ce,Ze)|0,R=R+Math.imul(W,ft)|0,p=p+Math.imul(W,ht)|0,p=p+Math.imul(X,ft)|0,x=x+Math.imul(X,ht)|0;var Ru=(I+R|0)+((p&8191)<<13)|0;I=(x+(p>>>13)|0)+(Ru>>>26)|0,Ru&=67108863,R=Math.imul($e,we),p=Math.imul($e,Ne),p=p+Math.imul(Ve,we)|0,x=Math.imul(Ve,Ne),R=R+Math.imul(Ie,ut)|0,p=p+Math.imul(Ie,Ze)|0,p=p+Math.imul(Se,ut)|0,x=x+Math.imul(Se,Ze)|0,R=R+Math.imul(pe,ft)|0,p=p+Math.imul(pe,ht)|0,p=p+Math.imul(ce,ft)|0,x=x+Math.imul(ce,ht)|0,R=R+Math.imul(W,dt)|0,p=p+Math.imul(W,pt)|0,p=p+Math.imul(X,dt)|0,x=x+Math.imul(X,pt)|0;var vu=(I+R|0)+((p&8191)<<13)|0;I=(x+(p>>>13)|0)+(vu>>>26)|0,vu&=67108863,R=Math.imul(rt,we),p=Math.imul(rt,Ne),p=p+Math.imul(it,we)|0,x=Math.imul(it,Ne),R=R+Math.imul($e,ut)|0,p=p+Math.imul($e,Ze)|0,p=p+Math.imul(Ve,ut)|0,x=x+Math.imul(Ve,Ze)|0,R=R+Math.imul(Ie,ft)|0,p=p+Math.imul(Ie,ht)|0,p=p+Math.imul(Se,ft)|0,x=x+Math.imul(Se,ht)|0,R=R+Math.imul(pe,dt)|0,p=p+Math.imul(pe,pt)|0,p=p+Math.imul(ce,dt)|0,x=x+Math.imul(ce,pt)|0,R=R+Math.imul(W,yt)|0,p=p+Math.imul(W,gt)|0,p=p+Math.imul(X,yt)|0,x=x+Math.imul(X,gt)|0;var xu=(I+R|0)+((p&8191)<<13)|0;I=(x+(p>>>13)|0)+(xu>>>26)|0,xu&=67108863,R=Math.imul(st,we),p=Math.imul(st,Ne),p=p+Math.imul(ot,we)|0,x=Math.imul(ot,Ne),R=R+Math.imul(rt,ut)|0,p=p+Math.imul(rt,Ze)|0,p=p+Math.imul(it,ut)|0,x=x+Math.imul(it,Ze)|0,R=R+Math.imul($e,ft)|0,p=p+Math.imul($e,ht)|0,p=p+Math.imul(Ve,ft)|0,x=x+Math.imul(Ve,ht)|0,R=R+Math.imul(Ie,dt)|0,p=p+Math.imul(Ie,pt)|0,p=p+Math.imul(Se,dt)|0,x=x+Math.imul(Se,pt)|0,R=R+Math.imul(pe,yt)|0,p=p+Math.imul(pe,gt)|0,p=p+Math.imul(ce,yt)|0,x=x+Math.imul(ce,gt)|0,R=R+Math.imul(W,mt)|0,p=p+Math.imul(W,_t)|0,p=p+Math.imul(X,mt)|0,x=x+Math.imul(X,_t)|0;var Su=(I+R|0)+((p&8191)<<13)|0;I=(x+(p>>>13)|0)+(Su>>>26)|0,Su&=67108863,R=Math.imul(at,we),p=Math.imul(at,Ne),p=p+Math.imul(ct,we)|0,x=Math.imul(ct,Ne),R=R+Math.imul(st,ut)|0,p=p+Math.imul(st,Ze)|0,p=p+Math.imul(ot,ut)|0,x=x+Math.imul(ot,Ze)|0,R=R+Math.imul(rt,ft)|0,p=p+Math.imul(rt,ht)|0,p=p+Math.imul(it,ft)|0,x=x+Math.imul(it,ht)|0,R=R+Math.imul($e,dt)|0,p=p+Math.imul($e,pt)|0,p=p+Math.imul(Ve,dt)|0,x=x+Math.imul(Ve,pt)|0,R=R+Math.imul(Ie,yt)|0,p=p+Math.imul(Ie,gt)|0,p=p+Math.imul(Se,yt)|0,x=x+Math.imul(Se,gt)|0,R=R+Math.imul(pe,mt)|0,p=p+Math.imul(pe,_t)|0,p=p+Math.imul(ce,mt)|0,x=x+Math.imul(ce,_t)|0,R=R+Math.imul(W,bt)|0,p=p+Math.imul(W,wt)|0,p=p+Math.imul(X,bt)|0,x=x+Math.imul(X,wt)|0;var Iu=(I+R|0)+((p&8191)<<13)|0;I=(x+(p>>>13)|0)+(Iu>>>26)|0,Iu&=67108863,R=Math.imul(N,we),p=Math.imul(N,Ne),p=p+Math.imul(B,we)|0,x=Math.imul(B,Ne),R=R+Math.imul(at,ut)|0,p=p+Math.imul(at,Ze)|0,p=p+Math.imul(ct,ut)|0,x=x+Math.imul(ct,Ze)|0,R=R+Math.imul(st,ft)|0,p=p+Math.imul(st,ht)|0,p=p+Math.imul(ot,ft)|0,x=x+Math.imul(ot,ht)|0,R=R+Math.imul(rt,dt)|0,p=p+Math.imul(rt,pt)|0,p=p+Math.imul(it,dt)|0,x=x+Math.imul(it,pt)|0,R=R+Math.imul($e,yt)|0,p=p+Math.imul($e,gt)|0,p=p+Math.imul(Ve,yt)|0,x=x+Math.imul(Ve,gt)|0,R=R+Math.imul(Ie,mt)|0,p=p+Math.imul(Ie,_t)|0,p=p+Math.imul(Se,mt)|0,x=x+Math.imul(Se,_t)|0,R=R+Math.imul(pe,bt)|0,p=p+Math.imul(pe,wt)|0,p=p+Math.imul(ce,bt)|0,x=x+Math.imul(ce,wt)|0,R=R+Math.imul(W,Et)|0,p=p+Math.imul(W,At)|0,p=p+Math.imul(X,Et)|0,x=x+Math.imul(X,At)|0;var ku=(I+R|0)+((p&8191)<<13)|0;I=(x+(p>>>13)|0)+(ku>>>26)|0,ku&=67108863,R=Math.imul(D,we),p=Math.imul(D,Ne),p=p+Math.imul(Y,we)|0,x=Math.imul(Y,Ne),R=R+Math.imul(N,ut)|0,p=p+Math.imul(N,Ze)|0,p=p+Math.imul(B,ut)|0,x=x+Math.imul(B,Ze)|0,R=R+Math.imul(at,ft)|0,p=p+Math.imul(at,ht)|0,p=p+Math.imul(ct,ft)|0,x=x+Math.imul(ct,ht)|0,R=R+Math.imul(st,dt)|0,p=p+Math.imul(st,pt)|0,p=p+Math.imul(ot,dt)|0,x=x+Math.imul(ot,pt)|0,R=R+Math.imul(rt,yt)|0,p=p+Math.imul(rt,gt)|0,p=p+Math.imul(it,yt)|0,x=x+Math.imul(it,gt)|0,R=R+Math.imul($e,mt)|0,p=p+Math.imul($e,_t)|0,p=p+Math.imul(Ve,mt)|0,x=x+Math.imul(Ve,_t)|0,R=R+Math.imul(Ie,bt)|0,p=p+Math.imul(Ie,wt)|0,p=p+Math.imul(Se,bt)|0,x=x+Math.imul(Se,wt)|0,R=R+Math.imul(pe,Et)|0,p=p+Math.imul(pe,At)|0,p=p+Math.imul(ce,Et)|0,x=x+Math.imul(ce,At)|0,R=R+Math.imul(W,Rt)|0,p=p+Math.imul(W,vt)|0,p=p+Math.imul(X,Rt)|0,x=x+Math.imul(X,vt)|0;var Tu=(I+R|0)+((p&8191)<<13)|0;I=(x+(p>>>13)|0)+(Tu>>>26)|0,Tu&=67108863,R=Math.imul(ue,we),p=Math.imul(ue,Ne),p=p+Math.imul(be,we)|0,x=Math.imul(be,Ne),R=R+Math.imul(D,ut)|0,p=p+Math.imul(D,Ze)|0,p=p+Math.imul(Y,ut)|0,x=x+Math.imul(Y,Ze)|0,R=R+Math.imul(N,ft)|0,p=p+Math.imul(N,ht)|0,p=p+Math.imul(B,ft)|0,x=x+Math.imul(B,ht)|0,R=R+Math.imul(at,dt)|0,p=p+Math.imul(at,pt)|0,p=p+Math.imul(ct,dt)|0,x=x+Math.imul(ct,pt)|0,R=R+Math.imul(st,yt)|0,p=p+Math.imul(st,gt)|0,p=p+Math.imul(ot,yt)|0,x=x+Math.imul(ot,gt)|0,R=R+Math.imul(rt,mt)|0,p=p+Math.imul(rt,_t)|0,p=p+Math.imul(it,mt)|0,x=x+Math.imul(it,_t)|0,R=R+Math.imul($e,bt)|0,p=p+Math.imul($e,wt)|0,p=p+Math.imul(Ve,bt)|0,x=x+Math.imul(Ve,wt)|0,R=R+Math.imul(Ie,Et)|0,p=p+Math.imul(Ie,At)|0,p=p+Math.imul(Se,Et)|0,x=x+Math.imul(Se,At)|0,R=R+Math.imul(pe,Rt)|0,p=p+Math.imul(pe,vt)|0,p=p+Math.imul(ce,Rt)|0,x=x+Math.imul(ce,vt)|0,R=R+Math.imul(W,xt)|0,p=p+Math.imul(W,St)|0,p=p+Math.imul(X,xt)|0,x=x+Math.imul(X,St)|0;var Ou=(I+R|0)+((p&8191)<<13)|0;I=(x+(p>>>13)|0)+(Ou>>>26)|0,Ou&=67108863,R=Math.imul(ue,ut),p=Math.imul(ue,Ze),p=p+Math.imul(be,ut)|0,x=Math.imul(be,Ze),R=R+Math.imul(D,ft)|0,p=p+Math.imul(D,ht)|0,p=p+Math.imul(Y,ft)|0,x=x+Math.imul(Y,ht)|0,R=R+Math.imul(N,dt)|0,p=p+Math.imul(N,pt)|0,p=p+Math.imul(B,dt)|0,x=x+Math.imul(B,pt)|0,R=R+Math.imul(at,yt)|0,p=p+Math.imul(at,gt)|0,p=p+Math.imul(ct,yt)|0,x=x+Math.imul(ct,gt)|0,R=R+Math.imul(st,mt)|0,p=p+Math.imul(st,_t)|0,p=p+Math.imul(ot,mt)|0,x=x+Math.imul(ot,_t)|0,R=R+Math.imul(rt,bt)|0,p=p+Math.imul(rt,wt)|0,p=p+Math.imul(it,bt)|0,x=x+Math.imul(it,wt)|0,R=R+Math.imul($e,Et)|0,p=p+Math.imul($e,At)|0,p=p+Math.imul(Ve,Et)|0,x=x+Math.imul(Ve,At)|0,R=R+Math.imul(Ie,Rt)|0,p=p+Math.imul(Ie,vt)|0,p=p+Math.imul(Se,Rt)|0,x=x+Math.imul(Se,vt)|0,R=R+Math.imul(pe,xt)|0,p=p+Math.imul(pe,St)|0,p=p+Math.imul(ce,xt)|0,x=x+Math.imul(ce,St)|0;var Nu=(I+R|0)+((p&8191)<<13)|0;I=(x+(p>>>13)|0)+(Nu>>>26)|0,Nu&=67108863,R=Math.imul(ue,ft),p=Math.imul(ue,ht),p=p+Math.imul(be,ft)|0,x=Math.imul(be,ht),R=R+Math.imul(D,dt)|0,p=p+Math.imul(D,pt)|0,p=p+Math.imul(Y,dt)|0,x=x+Math.imul(Y,pt)|0,R=R+Math.imul(N,yt)|0,p=p+Math.imul(N,gt)|0,p=p+Math.imul(B,yt)|0,x=x+Math.imul(B,gt)|0,R=R+Math.imul(at,mt)|0,p=p+Math.imul(at,_t)|0,p=p+Math.imul(ct,mt)|0,x=x+Math.imul(ct,_t)|0,R=R+Math.imul(st,bt)|0,p=p+Math.imul(st,wt)|0,p=p+Math.imul(ot,bt)|0,x=x+Math.imul(ot,wt)|0,R=R+Math.imul(rt,Et)|0,p=p+Math.imul(rt,At)|0,p=p+Math.imul(it,Et)|0,x=x+Math.imul(it,At)|0,R=R+Math.imul($e,Rt)|0,p=p+Math.imul($e,vt)|0,p=p+Math.imul(Ve,Rt)|0,x=x+Math.imul(Ve,vt)|0,R=R+Math.imul(Ie,xt)|0,p=p+Math.imul(Ie,St)|0,p=p+Math.imul(Se,xt)|0,x=x+Math.imul(Se,St)|0;var Bu=(I+R|0)+((p&8191)<<13)|0;I=(x+(p>>>13)|0)+(Bu>>>26)|0,Bu&=67108863,R=Math.imul(ue,dt),p=Math.imul(ue,pt),p=p+Math.imul(be,dt)|0,x=Math.imul(be,pt),R=R+Math.imul(D,yt)|0,p=p+Math.imul(D,gt)|0,p=p+Math.imul(Y,yt)|0,x=x+Math.imul(Y,gt)|0,R=R+Math.imul(N,mt)|0,p=p+Math.imul(N,_t)|0,p=p+Math.imul(B,mt)|0,x=x+Math.imul(B,_t)|0,R=R+Math.imul(at,bt)|0,p=p+Math.imul(at,wt)|0,p=p+Math.imul(ct,bt)|0,x=x+Math.imul(ct,wt)|0,R=R+Math.imul(st,Et)|0,p=p+Math.imul(st,At)|0,p=p+Math.imul(ot,Et)|0,x=x+Math.imul(ot,At)|0,R=R+Math.imul(rt,Rt)|0,p=p+Math.imul(rt,vt)|0,p=p+Math.imul(it,Rt)|0,x=x+Math.imul(it,vt)|0,R=R+Math.imul($e,xt)|0,p=p+Math.imul($e,St)|0,p=p+Math.imul(Ve,xt)|0,x=x+Math.imul(Ve,St)|0;var Cu=(I+R|0)+((p&8191)<<13)|0;I=(x+(p>>>13)|0)+(Cu>>>26)|0,Cu&=67108863,R=Math.imul(ue,yt),p=Math.imul(ue,gt),p=p+Math.imul(be,yt)|0,x=Math.imul(be,gt),R=R+Math.imul(D,mt)|0,p=p+Math.imul(D,_t)|0,p=p+Math.imul(Y,mt)|0,x=x+Math.imul(Y,_t)|0,R=R+Math.imul(N,bt)|0,p=p+Math.imul(N,wt)|0,p=p+Math.imul(B,bt)|0,x=x+Math.imul(B,wt)|0,R=R+Math.imul(at,Et)|0,p=p+Math.imul(at,At)|0,p=p+Math.imul(ct,Et)|0,x=x+Math.imul(ct,At)|0,R=R+Math.imul(st,Rt)|0,p=p+Math.imul(st,vt)|0,p=p+Math.imul(ot,Rt)|0,x=x+Math.imul(ot,vt)|0,R=R+Math.imul(rt,xt)|0,p=p+Math.imul(rt,St)|0,p=p+Math.imul(it,xt)|0,x=x+Math.imul(it,St)|0;var Mu=(I+R|0)+((p&8191)<<13)|0;I=(x+(p>>>13)|0)+(Mu>>>26)|0,Mu&=67108863,R=Math.imul(ue,mt),p=Math.imul(ue,_t),p=p+Math.imul(be,mt)|0,x=Math.imul(be,_t),R=R+Math.imul(D,bt)|0,p=p+Math.imul(D,wt)|0,p=p+Math.imul(Y,bt)|0,x=x+Math.imul(Y,wt)|0,R=R+Math.imul(N,Et)|0,p=p+Math.imul(N,At)|0,p=p+Math.imul(B,Et)|0,x=x+Math.imul(B,At)|0,R=R+Math.imul(at,Rt)|0,p=p+Math.imul(at,vt)|0,p=p+Math.imul(ct,Rt)|0,x=x+Math.imul(ct,vt)|0,R=R+Math.imul(st,xt)|0,p=p+Math.imul(st,St)|0,p=p+Math.imul(ot,xt)|0,x=x+Math.imul(ot,St)|0;var Lu=(I+R|0)+((p&8191)<<13)|0;I=(x+(p>>>13)|0)+(Lu>>>26)|0,Lu&=67108863,R=Math.imul(ue,bt),p=Math.imul(ue,wt),p=p+Math.imul(be,bt)|0,x=Math.imul(be,wt),R=R+Math.imul(D,Et)|0,p=p+Math.imul(D,At)|0,p=p+Math.imul(Y,Et)|0,x=x+Math.imul(Y,At)|0,R=R+Math.imul(N,Rt)|0,p=p+Math.imul(N,vt)|0,p=p+Math.imul(B,Rt)|0,x=x+Math.imul(B,vt)|0,R=R+Math.imul(at,xt)|0,p=p+Math.imul(at,St)|0,p=p+Math.imul(ct,xt)|0,x=x+Math.imul(ct,St)|0;var Pu=(I+R|0)+((p&8191)<<13)|0;I=(x+(p>>>13)|0)+(Pu>>>26)|0,Pu&=67108863,R=Math.imul(ue,Et),p=Math.imul(ue,At),p=p+Math.imul(be,Et)|0,x=Math.imul(be,At),R=R+Math.imul(D,Rt)|0,p=p+Math.imul(D,vt)|0,p=p+Math.imul(Y,Rt)|0,x=x+Math.imul(Y,vt)|0,R=R+Math.imul(N,xt)|0,p=p+Math.imul(N,St)|0,p=p+Math.imul(B,xt)|0,x=x+Math.imul(B,St)|0;var Uu=(I+R|0)+((p&8191)<<13)|0;I=(x+(p>>>13)|0)+(Uu>>>26)|0,Uu&=67108863,R=Math.imul(ue,Rt),p=Math.imul(ue,vt),p=p+Math.imul(be,Rt)|0,x=Math.imul(be,vt),R=R+Math.imul(D,xt)|0,p=p+Math.imul(D,St)|0,p=p+Math.imul(Y,xt)|0,x=x+Math.imul(Y,St)|0;var Du=(I+R|0)+((p&8191)<<13)|0;I=(x+(p>>>13)|0)+(Du>>>26)|0,Du&=67108863,R=Math.imul(ue,xt),p=Math.imul(ue,St),p=p+Math.imul(be,xt)|0,x=Math.imul(be,St);var Hu=(I+R|0)+((p&8191)<<13)|0;return I=(x+(p>>>13)|0)+(Hu>>>26)|0,Hu&=67108863,v[0]=Eu,v[1]=Au,v[2]=Ru,v[3]=vu,v[4]=xu,v[5]=Su,v[6]=Iu,v[7]=ku,v[8]=Tu,v[9]=Ou,v[10]=Nu,v[11]=Bu,v[12]=Cu,v[13]=Mu,v[14]=Lu,v[15]=Pu,v[16]=Uu,v[17]=Du,v[18]=Hu,I!==0&&(v[19]=I,y.length++),y};Math.imul||(O=k);function L(w,c,h){h.negative=c.negative^w.negative,h.length=w.length+c.length;for(var y=0,b=0,A=0;A<h.length-1;A++){var v=b;b=0;for(var I=y&67108863,R=Math.min(A,c.length-1),p=Math.max(0,A-w.length+1);p<=R;p++){var x=A-p,Z=w.words[x]|0,W=c.words[p]|0,X=Z*W,ie=X&67108863;v=v+(X/67108864|0)|0,ie=ie+I|0,I=ie&67108863,v=v+(ie>>>26)|0,b+=v>>>26,v&=67108863}h.words[A]=I,y=v,v=b}return y!==0?h.words[A]=y:h.length--,h._strip()}function M(w,c,h){return L(w,c,h)}i.prototype.mulTo=function(c,h){var y,b=this.length+c.length;return this.length===10&&c.length===10?y=O(this,c,h):b<63?y=k(this,c,h):b<1024?y=L(this,c,h):y=M(this,c,h),y};function C(w,c){this.x=w,this.y=c}C.prototype.makeRBT=function(c){for(var h=new Array(c),y=i.prototype._countBits(c)-1,b=0;b<c;b++)h[b]=this.revBin(b,y,c);return h},C.prototype.revBin=function(c,h,y){if(c===0||c===y-1)return c;for(var b=0,A=0;A<h;A++)b|=(c&1)<<h-A-1,c>>=1;return b},C.prototype.permute=function(c,h,y,b,A,v){for(var I=0;I<v;I++)b[I]=h[c[I]],A[I]=y[c[I]]},C.prototype.transform=function(c,h,y,b,A,v){this.permute(v,c,h,y,b,A);for(var I=1;I<A;I<<=1)for(var R=I<<1,p=Math.cos(2*Math.PI/R),x=Math.sin(2*Math.PI/R),Z=0;Z<A;Z+=R)for(var W=p,X=x,ie=0;ie<I;ie++){var pe=y[Z+ie],ce=b[Z+ie],He=y[Z+ie+I],Ie=b[Z+ie+I],Se=W*He-X*Ie;Ie=W*Ie+X*He,He=Se,y[Z+ie]=pe+He,b[Z+ie]=ce+Ie,y[Z+ie+I]=pe-He,b[Z+ie+I]=ce-Ie,ie!==R&&(Se=p*W-x*X,X=p*X+x*W,W=Se)}},C.prototype.guessLen13b=function(c,h){var y=Math.max(h,c)|1,b=y&1,A=0;for(y=y/2|0;y;y=y>>>1)A++;return 1<<A+1+b},C.prototype.conjugate=function(c,h,y){if(!(y<=1))for(var b=0;b<y/2;b++){var A=c[b];c[b]=c[y-b-1],c[y-b-1]=A,A=h[b],h[b]=-h[y-b-1],h[y-b-1]=-A}},C.prototype.normalize13b=function(c,h){for(var y=0,b=0;b<h/2;b++){var A=Math.round(c[2*b+1]/h)*8192+Math.round(c[2*b]/h)+y;c[b]=A&67108863,A<67108864?y=0:y=A/67108864|0}return c},C.prototype.convert13b=function(c,h,y,b){for(var A=0,v=0;v<h;v++)A=A+(c[v]|0),y[2*v]=A&8191,A=A>>>13,y[2*v+1]=A&8191,A=A>>>13;for(v=2*h;v<b;++v)y[v]=0;t(A===0),t((A&-8192)===0)},C.prototype.stub=function(c){for(var h=new Array(c),y=0;y<c;y++)h[y]=0;return h},C.prototype.mulp=function(c,h,y){var b=2*this.guessLen13b(c.length,h.length),A=this.makeRBT(b),v=this.stub(b),I=new Array(b),R=new Array(b),p=new Array(b),x=new Array(b),Z=new Array(b),W=new Array(b),X=y.words;X.length=b,this.convert13b(c.words,c.length,I,b),this.convert13b(h.words,h.length,x,b),this.transform(I,v,R,p,b,A),this.transform(x,v,Z,W,b,A);for(var ie=0;ie<b;ie++){var pe=R[ie]*Z[ie]-p[ie]*W[ie];p[ie]=R[ie]*W[ie]+p[ie]*Z[ie],R[ie]=pe}return this.conjugate(R,p,b),this.transform(R,p,X,v,b,A),this.conjugate(X,v,b),this.normalize13b(X,b),y.negative=c.negative^h.negative,y.length=c.length+h.length,y._strip()},i.prototype.mul=function(c){var h=new i(null);return h.words=new Array(this.length+c.length),this.mulTo(c,h)},i.prototype.mulf=function(c){var h=new i(null);return h.words=new Array(this.length+c.length),M(this,c,h)},i.prototype.imul=function(c){return this.clone().mulTo(c,this)},i.prototype.imuln=function(c){var h=c<0;h&&(c=-c),t(typeof c=="number"),t(c<67108864);for(var y=0,b=0;b<this.length;b++){var A=(this.words[b]|0)*c,v=(A&67108863)+(y&67108863);y>>=26,y+=A/67108864|0,y+=v>>>26,this.words[b]=v&67108863}return y!==0&&(this.words[b]=y,this.length++),this.length=c===0?1:this.length,h?this.ineg():this},i.prototype.muln=function(c){return this.clone().imuln(c)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(c){var h=S(c);if(h.length===0)return new i(1);for(var y=this,b=0;b<h.length&&h[b]===0;b++,y=y.sqr());if(++b<h.length)for(var A=y.sqr();b<h.length;b++,A=A.sqr())h[b]!==0&&(y=y.mul(A));return y},i.prototype.iushln=function(c){t(typeof c=="number"&&c>=0);var h=c%26,y=(c-h)/26,b=67108863>>>26-h<<26-h,A;if(h!==0){var v=0;for(A=0;A<this.length;A++){var I=this.words[A]&b,R=(this.words[A]|0)-I<<h;this.words[A]=R|v,v=I>>>26-h}v&&(this.words[A]=v,this.length++)}if(y!==0){for(A=this.length-1;A>=0;A--)this.words[A+y]=this.words[A];for(A=0;A<y;A++)this.words[A]=0;this.length+=y}return this._strip()},i.prototype.ishln=function(c){return t(this.negative===0),this.iushln(c)},i.prototype.iushrn=function(c,h,y){t(typeof c=="number"&&c>=0);var b;h?b=(h-h%26)/26:b=0;var A=c%26,v=Math.min((c-A)/26,this.length),I=67108863^67108863>>>A<<A,R=y;if(b-=v,b=Math.max(0,b),R){for(var p=0;p<v;p++)R.words[p]=this.words[p];R.length=v}if(v!==0)if(this.length>v)for(this.length-=v,p=0;p<this.length;p++)this.words[p]=this.words[p+v];else this.words[0]=0,this.length=1;var x=0;for(p=this.length-1;p>=0&&(x!==0||p>=b);p--){var Z=this.words[p]|0;this.words[p]=x<<26-A|Z>>>A,x=Z&I}return R&&x!==0&&(R.words[R.length++]=x),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(c,h,y){return t(this.negative===0),this.iushrn(c,h,y)},i.prototype.shln=function(c){return this.clone().ishln(c)},i.prototype.ushln=function(c){return this.clone().iushln(c)},i.prototype.shrn=function(c){return this.clone().ishrn(c)},i.prototype.ushrn=function(c){return this.clone().iushrn(c)},i.prototype.testn=function(c){t(typeof c=="number"&&c>=0);var h=c%26,y=(c-h)/26,b=1<<h;if(this.length<=y)return!1;var A=this.words[y];return!!(A&b)},i.prototype.imaskn=function(c){t(typeof c=="number"&&c>=0);var h=c%26,y=(c-h)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(h!==0&&y++,this.length=Math.min(y,this.length),h!==0){var b=67108863^67108863>>>h<<h;this.words[this.length-1]&=b}return this._strip()},i.prototype.maskn=function(c){return this.clone().imaskn(c)},i.prototype.iaddn=function(c){return t(typeof c=="number"),t(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},i.prototype._iaddn=function(c){this.words[0]+=c;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(c){if(t(typeof c=="number"),t(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},i.prototype.addn=function(c){return this.clone().iaddn(c)},i.prototype.subn=function(c){return this.clone().isubn(c)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(c,h,y){var b=c.length+y,A;this._expand(b);var v,I=0;for(A=0;A<c.length;A++){v=(this.words[A+y]|0)+I;var R=(c.words[A]|0)*h;v-=R&67108863,I=(v>>26)-(R/67108864|0),this.words[A+y]=v&67108863}for(;A<this.length-y;A++)v=(this.words[A+y]|0)+I,I=v>>26,this.words[A+y]=v&67108863;if(I===0)return this._strip();for(t(I===-1),I=0,A=0;A<this.length;A++)v=-(this.words[A]|0)+I,I=v>>26,this.words[A]=v&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(c,h){var y=this.length-c.length,b=this.clone(),A=c,v=A.words[A.length-1]|0,I=this._countBits(v);y=26-I,y!==0&&(A=A.ushln(y),b.iushln(y),v=A.words[A.length-1]|0);var R=b.length-A.length,p;if(h!=="mod"){p=new i(null),p.length=R+1,p.words=new Array(p.length);for(var x=0;x<p.length;x++)p.words[x]=0}var Z=b.clone()._ishlnsubmul(A,1,R);Z.negative===0&&(b=Z,p&&(p.words[R]=1));for(var W=R-1;W>=0;W--){var X=(b.words[A.length+W]|0)*67108864+(b.words[A.length+W-1]|0);for(X=Math.min(X/v|0,67108863),b._ishlnsubmul(A,X,W);b.negative!==0;)X--,b.negative=0,b._ishlnsubmul(A,1,W),b.isZero()||(b.negative^=1);p&&(p.words[W]=X)}return p&&p._strip(),b._strip(),h!=="div"&&y!==0&&b.iushrn(y),{div:p||null,mod:b}},i.prototype.divmod=function(c,h,y){if(t(!c.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var b,A,v;return this.negative!==0&&c.negative===0?(v=this.neg().divmod(c,h),h!=="mod"&&(b=v.div.neg()),h!=="div"&&(A=v.mod.neg(),y&&A.negative!==0&&A.iadd(c)),{div:b,mod:A}):this.negative===0&&c.negative!==0?(v=this.divmod(c.neg(),h),h!=="mod"&&(b=v.div.neg()),{div:b,mod:v.mod}):(this.negative&c.negative)!==0?(v=this.neg().divmod(c.neg(),h),h!=="div"&&(A=v.mod.neg(),y&&A.negative!==0&&A.isub(c)),{div:v.div,mod:A}):c.length>this.length||this.cmp(c)<0?{div:new i(0),mod:this}:c.length===1?h==="div"?{div:this.divn(c.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new i(this.modrn(c.words[0]))}:this._wordDiv(c,h)},i.prototype.div=function(c){return this.divmod(c,"div",!1).div},i.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},i.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},i.prototype.divRound=function(c){var h=this.divmod(c);if(h.mod.isZero())return h.div;var y=h.div.negative!==0?h.mod.isub(c):h.mod,b=c.ushrn(1),A=c.andln(1),v=y.cmp(b);return v<0||A===1&&v===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modrn=function(c){var h=c<0;h&&(c=-c),t(c<=67108863);for(var y=(1<<26)%c,b=0,A=this.length-1;A>=0;A--)b=(y*b+(this.words[A]|0))%c;return h?-b:b},i.prototype.modn=function(c){return this.modrn(c)},i.prototype.idivn=function(c){var h=c<0;h&&(c=-c),t(c<=67108863);for(var y=0,b=this.length-1;b>=0;b--){var A=(this.words[b]|0)+y*67108864;this.words[b]=A/c|0,y=A%c}return this._strip(),h?this.ineg():this},i.prototype.divn=function(c){return this.clone().idivn(c)},i.prototype.egcd=function(c){t(c.negative===0),t(!c.isZero());var h=this,y=c.clone();h.negative!==0?h=h.umod(c):h=h.clone();for(var b=new i(1),A=new i(0),v=new i(0),I=new i(1),R=0;h.isEven()&&y.isEven();)h.iushrn(1),y.iushrn(1),++R;for(var p=y.clone(),x=h.clone();!h.isZero();){for(var Z=0,W=1;(h.words[0]&W)===0&&Z<26;++Z,W<<=1);if(Z>0)for(h.iushrn(Z);Z-- >0;)(b.isOdd()||A.isOdd())&&(b.iadd(p),A.isub(x)),b.iushrn(1),A.iushrn(1);for(var X=0,ie=1;(y.words[0]&ie)===0&&X<26;++X,ie<<=1);if(X>0)for(y.iushrn(X);X-- >0;)(v.isOdd()||I.isOdd())&&(v.iadd(p),I.isub(x)),v.iushrn(1),I.iushrn(1);h.cmp(y)>=0?(h.isub(y),b.isub(v),A.isub(I)):(y.isub(h),v.isub(b),I.isub(A))}return{a:v,b:I,gcd:y.iushln(R)}},i.prototype._invmp=function(c){t(c.negative===0),t(!c.isZero());var h=this,y=c.clone();h.negative!==0?h=h.umod(c):h=h.clone();for(var b=new i(1),A=new i(0),v=y.clone();h.cmpn(1)>0&&y.cmpn(1)>0;){for(var I=0,R=1;(h.words[0]&R)===0&&I<26;++I,R<<=1);if(I>0)for(h.iushrn(I);I-- >0;)b.isOdd()&&b.iadd(v),b.iushrn(1);for(var p=0,x=1;(y.words[0]&x)===0&&p<26;++p,x<<=1);if(p>0)for(y.iushrn(p);p-- >0;)A.isOdd()&&A.iadd(v),A.iushrn(1);h.cmp(y)>=0?(h.isub(y),b.isub(A)):(y.isub(h),A.isub(b))}var Z;return h.cmpn(1)===0?Z=b:Z=A,Z.cmpn(0)<0&&Z.iadd(c),Z},i.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var h=this.clone(),y=c.clone();h.negative=0,y.negative=0;for(var b=0;h.isEven()&&y.isEven();b++)h.iushrn(1),y.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;y.isEven();)y.iushrn(1);var A=h.cmp(y);if(A<0){var v=h;h=y,y=v}else if(A===0||y.cmpn(1)===0)break;h.isub(y)}while(!0);return y.iushln(b)},i.prototype.invm=function(c){return this.egcd(c).a.umod(c)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(c){return this.words[0]&c},i.prototype.bincn=function(c){t(typeof c=="number");var h=c%26,y=(c-h)/26,b=1<<h;if(this.length<=y)return this._expand(y+1),this.words[y]|=b,this;for(var A=b,v=y;A!==0&&v<this.length;v++){var I=this.words[v]|0;I+=A,A=I>>>26,I&=67108863,this.words[v]=I}return A!==0&&(this.words[v]=A,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(c){var h=c<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var y;if(this.length>1)y=1;else{h&&(c=-c),t(c<=67108863,"Number is too big");var b=this.words[0]|0;y=b===c?0:b<c?-1:1}return this.negative!==0?-y|0:y},i.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var h=this.ucmp(c);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var h=0,y=this.length-1;y>=0;y--){var b=this.words[y]|0,A=c.words[y]|0;if(b!==A){b<A?h=-1:b>A&&(h=1);break}}return h},i.prototype.gtn=function(c){return this.cmpn(c)===1},i.prototype.gt=function(c){return this.cmp(c)===1},i.prototype.gten=function(c){return this.cmpn(c)>=0},i.prototype.gte=function(c){return this.cmp(c)>=0},i.prototype.ltn=function(c){return this.cmpn(c)===-1},i.prototype.lt=function(c){return this.cmp(c)===-1},i.prototype.lten=function(c){return this.cmpn(c)<=0},i.prototype.lte=function(c){return this.cmp(c)<=0},i.prototype.eqn=function(c){return this.cmpn(c)===0},i.prototype.eq=function(c){return this.cmp(c)===0},i.red=function(c){return new K(c)},i.prototype.toRed=function(c){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},i.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(c){return this.red=c,this},i.prototype.forceRed=function(c){return t(!this.red,"Already a number in reduction context"),this._forceRed(c)},i.prototype.redAdd=function(c){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},i.prototype.redIAdd=function(c){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},i.prototype.redSub=function(c){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},i.prototype.redISub=function(c){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},i.prototype.redShl=function(c){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},i.prototype.redMul=function(c){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},i.prototype.redIMul=function(c){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},i.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(c){return t(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var $={k256:null,p224:null,p192:null,p25519:null};function G(w,c){this.name=w,this.p=new i(c,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}G.prototype._tmp=function(){var c=new i(null);return c.words=new Array(Math.ceil(this.n/13)),c},G.prototype.ireduce=function(c){var h=c,y;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),y=h.bitLength();while(y>this.n);var b=y<this.n?-1:h.ucmp(this.p);return b===0?(h.words[0]=0,h.length=1):b>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},G.prototype.split=function(c,h){c.iushrn(this.n,0,h)},G.prototype.imulK=function(c){return c.imul(this.k)};function q(){G.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(q,G),q.prototype.split=function(c,h){for(var y=4194303,b=Math.min(c.length,9),A=0;A<b;A++)h.words[A]=c.words[A];if(h.length=b,c.length<=9){c.words[0]=0,c.length=1;return}var v=c.words[9];for(h.words[h.length++]=v&y,A=10;A<c.length;A++){var I=c.words[A]|0;c.words[A-10]=(I&y)<<4|v>>>22,v=I}v>>>=22,c.words[A-10]=v,v===0&&c.length>10?c.length-=10:c.length-=9},q.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var h=0,y=0;y<c.length;y++){var b=c.words[y]|0;h+=b*977,c.words[y]=h&67108863,h=b*64+(h/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function j(){G.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(j,G);function H(){G.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(H,G);function V(){G.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(V,G),V.prototype.imulK=function(c){for(var h=0,y=0;y<c.length;y++){var b=(c.words[y]|0)*19+h,A=b&67108863;b>>>=26,c.words[y]=A,h=b}return h!==0&&(c.words[c.length++]=h),c},i._prime=function(c){if($[c])return $[c];var h;if(c==="k256")h=new q;else if(c==="p224")h=new j;else if(c==="p192")h=new H;else if(c==="p25519")h=new V;else throw new Error("Unknown prime "+c);return $[c]=h,h};function K(w){if(typeof w=="string"){var c=i._prime(w);this.m=c.p,this.prime=c}else t(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}K.prototype._verify1=function(c){t(c.negative===0,"red works only with positives"),t(c.red,"red works only with red numbers")},K.prototype._verify2=function(c,h){t((c.negative|h.negative)===0,"red works only with positives"),t(c.red&&c.red===h.red,"red works only with red numbers")},K.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(f(c,c.umod(this.m)._forceRed(this)),c)},K.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},K.prototype.add=function(c,h){this._verify2(c,h);var y=c.add(h);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},K.prototype.iadd=function(c,h){this._verify2(c,h);var y=c.iadd(h);return y.cmp(this.m)>=0&&y.isub(this.m),y},K.prototype.sub=function(c,h){this._verify2(c,h);var y=c.sub(h);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},K.prototype.isub=function(c,h){this._verify2(c,h);var y=c.isub(h);return y.cmpn(0)<0&&y.iadd(this.m),y},K.prototype.shl=function(c,h){return this._verify1(c),this.imod(c.ushln(h))},K.prototype.imul=function(c,h){return this._verify2(c,h),this.imod(c.imul(h))},K.prototype.mul=function(c,h){return this._verify2(c,h),this.imod(c.mul(h))},K.prototype.isqr=function(c){return this.imul(c,c.clone())},K.prototype.sqr=function(c){return this.mul(c,c)},K.prototype.sqrt=function(c){if(c.isZero())return c.clone();var h=this.m.andln(3);if(t(h%2===1),h===3){var y=this.m.add(new i(1)).iushrn(2);return this.pow(c,y)}for(var b=this.m.subn(1),A=0;!b.isZero()&&b.andln(1)===0;)A++,b.iushrn(1);t(!b.isZero());var v=new i(1).toRed(this),I=v.redNeg(),R=this.m.subn(1).iushrn(1),p=this.m.bitLength();for(p=new i(2*p*p).toRed(this);this.pow(p,R).cmp(I)!==0;)p.redIAdd(I);for(var x=this.pow(p,b),Z=this.pow(c,b.addn(1).iushrn(1)),W=this.pow(c,b),X=A;W.cmp(v)!==0;){for(var ie=W,pe=0;ie.cmp(v)!==0;pe++)ie=ie.redSqr();t(pe<X);var ce=this.pow(x,new i(1).iushln(X-pe-1));Z=Z.redMul(ce),x=ce.redSqr(),W=W.redMul(x),X=pe}return Z},K.prototype.invm=function(c){var h=c._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},K.prototype.pow=function(c,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return c.clone();var y=4,b=new Array(1<<y);b[0]=new i(1).toRed(this),b[1]=c;for(var A=2;A<b.length;A++)b[A]=this.mul(b[A-1],c);var v=b[0],I=0,R=0,p=h.bitLength()%26;for(p===0&&(p=26),A=h.length-1;A>=0;A--){for(var x=h.words[A],Z=p-1;Z>=0;Z--){var W=x>>Z&1;if(v!==b[0]&&(v=this.sqr(v)),W===0&&I===0){R=0;continue}I<<=1,I|=W,R++,!(R!==y&&(A!==0||Z!==0))&&(v=this.mul(v,b[I]),R=0,I=0)}p=26}return v},K.prototype.convertTo=function(c){var h=c.umod(this.m);return h===c?h.clone():h},K.prototype.convertFrom=function(c){var h=c.clone();return h.red=null,h},i.mont=function(c){return new J(c)};function J(w){K.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(J,K),J.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},J.prototype.convertFrom=function(c){var h=this.imod(c.mul(this.rinv));return h.red=null,h},J.prototype.imul=function(c,h){if(c.isZero()||h.isZero())return c.words[0]=0,c.length=1,c;var y=c.imul(h),b=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),A=y.isub(b).iushrn(this.shift),v=A;return A.cmp(this.m)>=0?v=A.isub(this.m):A.cmpn(0)<0&&(v=A.iadd(this.m)),v._forceRed(this)},J.prototype.mul=function(c,h){if(c.isZero()||h.isZero())return new i(0)._forceRed(this);var y=c.mul(h),b=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),A=y.isub(b).iushrn(this.shift),v=A;return A.cmp(this.m)>=0?v=A.isub(this.m):A.cmpn(0)<0&&(v=A.iadd(this.m)),v._forceRed(this)},J.prototype.invm=function(c){var h=this.imod(c._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(typeof Il>"u"||Il,yp)});var _p=Ee((kl,mp)=>{var ga=Fi(),Gn=ga.Buffer;function gp(n,e){for(var t in n)e[t]=n[t]}Gn.from&&Gn.alloc&&Gn.allocUnsafe&&Gn.allocUnsafeSlow?mp.exports=ga:(gp(ga,kl),kl.Buffer=di);function di(n,e,t){return Gn(n,e,t)}di.prototype=Object.create(Gn.prototype);gp(Gn,di);di.from=function(n,e,t){if(typeof n=="number")throw new TypeError("Argument must not be a number");return Gn(n,e,t)};di.alloc=function(n,e,t){if(typeof n!="number")throw new TypeError("Argument must be a number");var r=Gn(n);return e!==void 0?typeof t=="string"?r.fill(e,t):r.fill(e):r.fill(0),r};di.allocUnsafe=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return Gn(n)};di.allocUnsafeSlow=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return ga.SlowBuffer(n)}});var wp=Ee((yT,bp)=>{"use strict";var ma=_p().Buffer;function PE(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var i=n.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=n.length,a=n.charAt(0),u=Math.log(o)/Math.log(256),f=Math.log(256)/Math.log(o);function d(g){if((Array.isArray(g)||g instanceof Uint8Array)&&(g=ma.from(g)),!ma.isBuffer(g))throw new TypeError("Expected Buffer");if(g.length===0)return"";for(var E=0,S=0,k=0,O=g.length;k!==O&&g[k]===0;)k++,E++;for(var L=(O-k)*f+1>>>0,M=new Uint8Array(L);k!==O;){for(var C=g[k],$=0,G=L-1;(C!==0||$<S)&&G!==-1;G--,$++)C+=256*M[G]>>>0,M[G]=C%o>>>0,C=C/o>>>0;if(C!==0)throw new Error("Non-zero carry");S=$,k++}for(var q=L-S;q!==L&&M[q]===0;)q++;for(var j=a.repeat(E);q<L;++q)j+=n.charAt(M[q]);return j}function m(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return ma.alloc(0);for(var E=0,S=0,k=0;g[E]===a;)S++,E++;for(var O=(g.length-E)*u+1>>>0,L=new Uint8Array(O);E<g.length;){var M=g.charCodeAt(E);if(M>255)return;var C=e[M];if(C===255)return;for(var $=0,G=O-1;(C!==0||$<k)&&G!==-1;G--,$++)C+=o*L[G]>>>0,L[G]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");k=$,E++}for(var q=O-k;q!==O&&L[q]===0;)q++;var j=ma.allocUnsafe(S+(O-q));j.fill(0,0,S);for(var H=S;q!==O;)j[H++]=L[q++];return j}function _(g){var E=m(g);if(E)return E;throw new Error("Non-base"+o+" character")}return{encode:d,decodeUnsafe:m,decode:_}}bp.exports=PE});var _a=Ee((gT,Ep)=>{var UE=wp(),DE="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Ep.exports=UE(DE)});var Ap=Ee(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.sha224=jn.SHA224=jn.sha256=jn.SHA256=void 0;var ba=ia();jn.SHA256=ba.SHA256;jn.sha256=ba.sha256;jn.SHA224=ba.SHA224;jn.sha224=ba.sha224});var Rp=Ee(Nl=>{"use strict";function gr(n,e,t){return e<=n&&n<=t}function va(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function HE(n){for(var e=String(n),t=e.length,r=0,i=[];r<t;){var s=e.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===t-1)i.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=s&1023,u=o&1023;i.push(65536+(a<<10)+u),r+=1}else i.push(65533)}r+=1}return i}function zE(n){for(var e="",t=0;t<n.length;++t){var r=n[t];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var wa=-1;function Ol(n){this.tokens=[].slice.call(n)}Ol.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():wa},prepend:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.push(e.shift());else this.tokens.push(n)}};var Gi=-1;function Tl(n,e){if(n)throw TypeError("Decoder error");return e||65533}var Ea="utf-8";function Aa(n,e){if(!(this instanceof Aa))return new Aa(n,e);if(n=n!==void 0?String(n).toLowerCase():Ea,n!==Ea)throw new Error("Encoding not supported. Only utf-8 is supported");e=va(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Aa.prototype={decode:function(e,t){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),t=va(t),this._streaming||(this._decoder=new FE({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var i=new Ol(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==Gi);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===Gi)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),zE(s)}};function Ra(n,e){if(!(this instanceof Ra))return new Ra(n,e);if(n=n!==void 0?String(n).toLowerCase():Ea,n!==Ea)throw new Error("Encoding not supported. Only utf-8 is supported");e=va(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Ra.prototype={encode:function(e,t){e=e?String(e):"",t=va(t),this._streaming||(this._encoder=new KE(this._options)),this._streaming=!!t.stream;for(var r=[],i=new Ol(HE(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==Gi);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==Gi;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function FE(n){var e=n.fatal,t=0,r=0,i=0,s=128,o=191;this.handler=function(a,u){if(u===wa&&i!==0)return i=0,Tl(e);if(u===wa)return Gi;if(i===0){if(gr(u,0,127))return u;if(gr(u,194,223))i=1,t=u-192;else if(gr(u,224,239))u===224&&(s=160),u===237&&(o=159),i=2,t=u-224;else if(gr(u,240,244))u===240&&(s=144),u===244&&(o=143),i=3,t=u-240;else return Tl(e);return t=t<<6*i,null}if(!gr(u,s,o))return t=i=r=0,s=128,o=191,a.prepend(u),Tl(e);if(s=128,o=191,r+=1,t+=u-128<<6*(i-r),r!==i)return null;var f=t;return t=i=r=0,f}}function KE(n){var e=n.fatal;this.handler=function(t,r){if(r===wa)return Gi;if(gr(r,0,127))return r;var i,s;gr(r,128,2047)?(i=1,s=192):gr(r,2048,65535)?(i=2,s=224):gr(r,65536,1114111)&&(i=3,s=240);for(var o=[(r>>6*i)+s];i>0;){var a=r>>6*(i-1);o.push(128|a&63),i-=1}return o}}Nl.TextEncoder=Ra;Nl.TextDecoder=Aa});var kp=Ee(qe=>{"use strict";var qE=qe&&qe.__createBinding||(Object.create?(function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}):(function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]})),VE=qe&&qe.__setModuleDefault||(Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e}),Zn=qe&&qe.__decorate||function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},$E=qe&&qe.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.hasOwnProperty.call(n,t)&&qE(e,n,t);return VE(e,n),e},vp=qe&&qe.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(qe,"__esModule",{value:!0});qe.deserializeUnchecked=qe.deserialize=qe.serialize=qe.BinaryReader=qe.BinaryWriter=qe.BorshError=qe.baseDecode=qe.baseEncode=void 0;var Hr=vp(Wi()),xp=vp(_a()),WE=$E(Rp()),GE=typeof TextDecoder!="function"?WE.TextDecoder:TextDecoder,jE=new GE("utf-8",{fatal:!0});function ZE(n){return typeof n=="string"&&(n=Buffer.from(n,"utf8")),xp.default.encode(Buffer.from(n))}qe.baseEncode=ZE;function YE(n){return Buffer.from(xp.default.decode(n))}qe.baseDecode=YE;var Bl=1024,Ut=class extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};qe.BorshError=Ut;var xa=class{constructor(){this.buf=Buffer.alloc(Bl),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Bl)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Hr.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Hr.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Hr.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Hr.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(Bl)]),this.length+=e.length}writeString(e){this.maybeResize();let t=Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(let r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}};qe.BinaryWriter=xa;function Yn(n,e,t){let r=t.value;t.value=function(...i){try{return r.apply(this,i)}catch(s){if(s instanceof RangeError){let o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Ut("Reached the end of buffer when deserializing")}throw s}}}var an=class{constructor(e){this.buf=e,this.offset=0}readU8(){let e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){let e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){let e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){let e=this.readBuffer(8);return new Hr.default(e,"le")}readU128(){let e=this.readBuffer(16);return new Hr.default(e,"le")}readU256(){let e=this.readBuffer(32);return new Hr.default(e,"le")}readU512(){let e=this.readBuffer(64);return new Hr.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new Ut(`Expected buffer length ${e} isn't within bounds`);let t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){let e=this.readU32(),t=this.readBuffer(e);try{return jE.decode(t)}catch(r){throw new Ut(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){let t=this.readU32(),r=Array();for(let i=0;i<t;++i)r.push(e());return r}};Zn([Yn],an.prototype,"readU8",null);Zn([Yn],an.prototype,"readU16",null);Zn([Yn],an.prototype,"readU32",null);Zn([Yn],an.prototype,"readU64",null);Zn([Yn],an.prototype,"readU128",null);Zn([Yn],an.prototype,"readU256",null);Zn([Yn],an.prototype,"readU512",null);Zn([Yn],an.prototype,"readString",null);Zn([Yn],an.prototype,"readFixedArray",null);Zn([Yn],an.prototype,"readArray",null);qe.BinaryReader=an;function Sp(n){return n.charAt(0).toUpperCase()+n.slice(1)}function pi(n,e,t,r,i){try{if(typeof r=="string")i[`write${Sp(r)}`](t);else if(r instanceof Array)if(typeof r[0]=="number"){if(t.length!==r[0])throw new Ut(`Expecting byte array of length ${r[0]}, but got ${t.length} bytes`);i.writeFixedArray(t)}else if(r.length===2&&typeof r[1]=="number"){if(t.length!==r[1])throw new Ut(`Expecting byte array of length ${r[1]}, but got ${t.length} bytes`);for(let s=0;s<r[1];s++)pi(n,null,t[s],r[0],i)}else i.writeArray(t,s=>{pi(n,e,s,r[0],i)});else if(r.kind!==void 0)switch(r.kind){case"option":{t==null?i.writeU8(0):(i.writeU8(1),pi(n,e,t,r.type,i));break}case"map":{i.writeU32(t.size),t.forEach((s,o)=>{pi(n,e,o,r.key,i),pi(n,e,s,r.value,i)});break}default:throw new Ut(`FieldType ${r} unrecognized`)}else Ip(n,t,i)}catch(s){throw s instanceof Ut&&s.addToFieldPath(e),s}}function Ip(n,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}let r=n.get(e.constructor);if(!r)throw new Ut(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([i,s])=>{pi(n,i,e[i],s,t)});else if(r.kind==="enum"){let i=e[r.field];for(let s=0;s<r.values.length;++s){let[o,a]=r.values[s];if(o===i){t.writeU8(s),pi(n,o,e[o],a,t);break}}}else throw new Ut(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function XE(n,e,t=xa){let r=new t;return Ip(n,e,r),r.toArray()}qe.serialize=XE;function yi(n,e,t,r){try{if(typeof t=="string")return r[`read${Sp(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return r.readFixedArray(t[0]);if(typeof t[1]=="number"){let i=[];for(let s=0;s<t[1];s++)i.push(yi(n,null,t[0],r));return i}else return r.readArray(()=>yi(n,e,t[0],r))}if(t.kind==="option")return r.readU8()?yi(n,e,t.type,r):void 0;if(t.kind==="map"){let i=new Map,s=r.readU32();for(let o=0;o<s;o++){let a=yi(n,e,t.key,r),u=yi(n,e,t.value,r);i.set(a,u)}return i}return Cl(n,t,r)}catch(i){throw i instanceof Ut&&i.addToFieldPath(e),i}}function Cl(n,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);let r=n.get(e);if(!r)throw new Ut(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){let i={};for(let[s,o]of n.get(e).fields)i[s]=yi(n,s,o,t);return new e(i)}if(r.kind==="enum"){let i=t.readU8();if(i>=r.values.length)throw new Ut(`Enum index: ${i} is out of range`);let[s,o]=r.values[i],a=yi(n,s,o,t);return new e({[s]:a})}throw new Ut(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function JE(n,e,t,r=an){let i=new r(t),s=Cl(n,e,i);if(i.offset<t.length)throw new Ut(`Unexpected ${t.length-i.offset} bytes after deserialized data`);return s}qe.deserialize=JE;function QE(n,e,t,r=an){let i=new r(t);return Cl(n,e,i)}qe.deserializeUnchecked=QE});var Tp=Ee(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.s16=z.s8=z.nu64be=z.u48be=z.u40be=z.u32be=z.u24be=z.u16be=z.nu64=z.u48=z.u40=z.u32=z.u24=z.u16=z.u8=z.offset=z.greedy=z.Constant=z.UTF8=z.CString=z.Blob=z.Boolean=z.BitField=z.BitStructure=z.VariantLayout=z.Union=z.UnionLayoutDiscriminator=z.UnionDiscriminator=z.Structure=z.Sequence=z.DoubleBE=z.Double=z.FloatBE=z.Float=z.NearInt64BE=z.NearInt64=z.NearUInt64BE=z.NearUInt64=z.IntBE=z.Int=z.UIntBE=z.UInt=z.OffsetLayout=z.GreedyCount=z.ExternalLayout=z.bindConstructorLayout=z.nameWithProperty=z.Layout=z.uint8ArrayToBuffer=z.checkUint8Array=void 0;z.constant=z.utf8=z.cstr=z.blob=z.unionLayoutDiscriminator=z.union=z.seq=z.bits=z.struct=z.f64be=z.f64=z.f32be=z.f32=z.ns64be=z.s48be=z.s40be=z.s32be=z.s24be=z.s16be=z.ns64=z.s48=z.s40=z.s32=z.s24=void 0;var Ll=Fi();function Yi(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}z.checkUint8Array=Yi;function Me(n){return Yi(n),Ll.Buffer.from(n.buffer,n.byteOffset,n.length)}z.uint8ArrayToBuffer=Me;var Pe=class{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){let t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}};z.Layout=Pe;function Pl(n,e){return e.property?n+"["+e.property+"]":n}z.nameWithProperty=Pl;function e2(n,e){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Pe))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=e,e.boundConstructor_=n,e.makeDestinationObject=(()=>new n),Object.defineProperty(n.prototype,"encode",{value(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(n,"decode",{value(t,r){return e.decode(t,r)},writable:!0})}z.bindConstructorLayout=e2;var Wt=class extends Pe{isCount(){throw new Error("ExternalLayout is abstract")}};z.ExternalLayout=Wt;var Sa=class extends Wt{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){Yi(e);let r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}};z.GreedyCount=Sa;var Ds=class extends Wt{constructor(e,t=0,r){if(!(e instanceof Pe))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof yn||this.layout instanceof bn}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}};z.OffsetLayout=Ds;var yn=class extends Pe{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Me(e).readUIntLE(t,this.span)}encode(e,t,r=0){return Me(t).writeUIntLE(e,r,this.span),this.span}};z.UInt=yn;var bn=class extends Pe{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Me(e).readUIntBE(t,this.span)}encode(e,t,r=0){return Me(t).writeUIntBE(e,r,this.span),this.span}};z.UIntBE=bn;var mr=class extends Pe{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Me(e).readIntLE(t,this.span)}encode(e,t,r=0){return Me(t).writeIntLE(e,r,this.span),this.span}};z.Int=mr;var zr=class extends Pe{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Me(e).readIntBE(t,this.span)}encode(e,t,r=0){return Me(t).writeIntBE(e,r,this.span),this.span}};z.IntBE=zr;var Ml=Math.pow(2,32);function qa(n){let e=Math.floor(n/Ml),t=n-e*Ml;return{hi32:e,lo32:t}}function Va(n,e){return n*Ml+e}var Ia=class extends Pe{constructor(e){super(8,e)}decode(e,t=0){let r=Me(e),i=r.readUInt32LE(t),s=r.readUInt32LE(t+4);return Va(s,i)}encode(e,t,r=0){let i=qa(e),s=Me(t);return s.writeUInt32LE(i.lo32,r),s.writeUInt32LE(i.hi32,r+4),8}};z.NearUInt64=Ia;var ka=class extends Pe{constructor(e){super(8,e)}decode(e,t=0){let r=Me(e),i=r.readUInt32BE(t),s=r.readUInt32BE(t+4);return Va(i,s)}encode(e,t,r=0){let i=qa(e),s=Me(t);return s.writeUInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}};z.NearUInt64BE=ka;var Ta=class extends Pe{constructor(e){super(8,e)}decode(e,t=0){let r=Me(e),i=r.readUInt32LE(t),s=r.readInt32LE(t+4);return Va(s,i)}encode(e,t,r=0){let i=qa(e),s=Me(t);return s.writeUInt32LE(i.lo32,r),s.writeInt32LE(i.hi32,r+4),8}};z.NearInt64=Ta;var Oa=class extends Pe{constructor(e){super(8,e)}decode(e,t=0){let r=Me(e),i=r.readInt32BE(t),s=r.readUInt32BE(t+4);return Va(i,s)}encode(e,t,r=0){let i=qa(e),s=Me(t);return s.writeInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}};z.NearInt64BE=Oa;var Na=class extends Pe{constructor(e){super(4,e)}decode(e,t=0){return Me(e).readFloatLE(t)}encode(e,t,r=0){return Me(t).writeFloatLE(e,r),4}};z.Float=Na;var Ba=class extends Pe{constructor(e){super(4,e)}decode(e,t=0){return Me(e).readFloatBE(t)}encode(e,t,r=0){return Me(t).writeFloatBE(e,r),4}};z.FloatBE=Ba;var Ca=class extends Pe{constructor(e){super(8,e)}decode(e,t=0){return Me(e).readDoubleLE(t)}encode(e,t,r=0){return Me(t).writeDoubleLE(e,r),8}};z.Double=Ca;var Ma=class extends Pe{constructor(e){super(8,e)}decode(e,t=0){return Me(e).readDoubleBE(t)}encode(e,t,r=0){return Me(t).writeDoubleBE(e,r),8}};z.DoubleBE=Ma;var La=class extends Pe{constructor(e,t,r){if(!(e instanceof Pe))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof Wt&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(t instanceof Wt)&&0<e.span&&(i=t*e.span),super(i,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,i=this.count;if(i instanceof Wt&&(i=i.decode(e,t)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let s=0;for(;s<i;)r+=this.elementLayout.getSpan(e,t+r),++s}return r}decode(e,t=0){let r=[],i=0,s=this.count;for(s instanceof Wt&&(s=s.decode(e,t));i<s;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),i+=1;return r}encode(e,t,r=0){let i=this.elementLayout,s=e.reduce((o,a)=>o+i.encode(a,t,r+o),0);return this.count instanceof Wt&&this.count.encode(e.length,t,r),s}};z.Sequence=La;var Pa=class extends Pe{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((s,o)=>s&&o instanceof Pe,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&r===void 0&&(r=t,t=void 0);for(let s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((i,s)=>{let o=s.getSpan(e,t);return t+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,t=0){Yi(e);let r=this.makeDestinationObject();for(let i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){let i=r,s=0,o=0;for(let a of this.fields){let u=a.span;if(o=0<u?u:0,a.property!==void 0){let f=e[a.property];f!==void 0&&(o=a.encode(f,t,r),0>u&&(u=a.getSpan(t,r)))}s=r,r+=u}return s+o-i}fromArray(e){let t=this.makeDestinationObject();for(let r of this.fields)r.property!==void 0&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(let r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}};z.Structure=Pa;var Hs=class{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,r){throw new Error("UnionDiscriminator is abstract")}};z.UnionDiscriminator=Hs;var Zi=class extends Hs{constructor(e,t){if(!(e instanceof Wt&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}};z.UnionLayoutDiscriminator=Zi;var zs=class extends Pe{constructor(e,t,r){let i;if(e instanceof yn||e instanceof bn)i=new Zi(new Ds(e));else if(e instanceof Wt&&e.isCount())i=new Zi(e);else if(e instanceof Hs)i=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof Pe))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&(e instanceof yn||e instanceof bn)&&(s+=i.layout.span)),super(s,r),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof yn||e instanceof bn,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;let r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;let t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(let t in this.registry){let r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,t=0){let r,i=this.discriminator,s=i.decode(e,t),o=this.registry[s];if(o===void 0){let a=this.defaultLayout,u=0;this.usesPrefixDiscriminator&&(u=i.layout.span),r=this.makeDestinationObject(),r[i.property]=s,r[a.property]=a.decode(e,t+u)}else r=o.decode(e,t);return r}encode(e,t,r=0){let i=this.getSourceVariant(e);if(i===void 0){let s=this.discriminator,o=this.defaultLayout,a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(e[s.property],t,r),a+o.encode(e[o.property],t,r+a)}return i.encode(e,t,r)}addVariant(e,t,r){let i=new Ua(this,e,t,r);return this.registry[e]=i,i}getVariant(e,t=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,t):r=e,this.registry[r]}};z.Union=zs;var Ua=class extends Pe{constructor(e,t,r,i){if(!(e instanceof zs))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof Pe))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=r?r.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,t+r)),r+i}decode(e,t=0){let r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let s=i;if(this.layout&&(this.layout.encode(e[this.property],t,r+i),s+=this.layout.getSpan(t,r+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}};z.VariantLayout=Ua;function ji(n){return 0>n&&(n+=4294967296),n}var Fs=class extends Pe{constructor(e,t,r){if(!(e instanceof yn||e instanceof bn))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&r===void 0&&(r=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let i=0;this._packedSetValue=function(s){return i=ji(s),this},this._packedGetValue=function(){return i}}decode(e,t=0){let r=this.makeDestinationObject(),i=this.word.decode(e,t);this._packedSetValue(i);for(let s of this.fields)s.property!==void 0&&(r[s.property]=s.decode(e));return r}encode(e,t,r=0){let i=this.word.decode(t,r);this._packedSetValue(i);for(let s of this.fields)if(s.property!==void 0){let o=e[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){let r=new Ks(this,e,t);return this.fields.push(r),r}addBoolean(e){let t=new Da(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}};z.BitStructure=Fs;var Ks=class{constructor(e,t,r){if(!(e instanceof Fs))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");let i=8*e.span,s=e.fields.reduce((o,a)=>o+a.bits,0);if(t+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-t),this.wordMask=ji(this.valueMask<<this.start),this.property=r}decode(e,t){let r=this.container._packedGetValue();return ji(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==ji(e&this.valueMask))throw new TypeError(Pl("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let t=this.container._packedGetValue(),r=ji(e<<this.start);this.container._packedSetValue(ji(t&~this.wordMask)|r)}};z.BitField=Ks;var Da=class extends Ks{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};z.Boolean=Da;var Ha=class extends Pe{constructor(e,t){if(!(e instanceof Wt&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof Wt||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),Me(e).slice(t,t+r)}encode(e,t,r){let i=this.length;if(this.length instanceof Wt&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw new TypeError(Pl("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(r+i>t.length)throw new RangeError("encoding overruns Uint8Array");let s=Me(e);return Me(t).write(s.toString("hex"),r,i,"hex"),this.length instanceof Wt&&this.length.encode(i,t,r),i}};z.Blob=Ha;var za=class extends Pe{constructor(e){super(-1,e)}getSpan(e,t=0){Yi(e);let r=t;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-t}decode(e,t=0){let r=this.getSpan(e,t);return Me(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));let i=Ll.Buffer.from(e,"utf8"),s=i.length;if(r+s>t.length)throw new RangeError("encoding overruns Buffer");let o=Me(t);return i.copy(o,r),o[r+s]=0,s+1}};z.CString=za;var Fa=class extends Pe{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return Yi(e),e.length-t}decode(e,t=0){let r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return Me(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));let i=Ll.Buffer.from(e,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(r+s>t.length)throw new RangeError("encoding overruns Buffer");return i.copy(Me(t),r),s}};z.UTF8=Fa;var Ka=class extends Pe{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}};z.Constant=Ka;z.greedy=((n,e)=>new Sa(n,e));z.offset=((n,e,t)=>new Ds(n,e,t));z.u8=(n=>new yn(1,n));z.u16=(n=>new yn(2,n));z.u24=(n=>new yn(3,n));z.u32=(n=>new yn(4,n));z.u40=(n=>new yn(5,n));z.u48=(n=>new yn(6,n));z.nu64=(n=>new Ia(n));z.u16be=(n=>new bn(2,n));z.u24be=(n=>new bn(3,n));z.u32be=(n=>new bn(4,n));z.u40be=(n=>new bn(5,n));z.u48be=(n=>new bn(6,n));z.nu64be=(n=>new ka(n));z.s8=(n=>new mr(1,n));z.s16=(n=>new mr(2,n));z.s24=(n=>new mr(3,n));z.s32=(n=>new mr(4,n));z.s40=(n=>new mr(5,n));z.s48=(n=>new mr(6,n));z.ns64=(n=>new Ta(n));z.s16be=(n=>new zr(2,n));z.s24be=(n=>new zr(3,n));z.s32be=(n=>new zr(4,n));z.s40be=(n=>new zr(5,n));z.s48be=(n=>new zr(6,n));z.ns64be=(n=>new Oa(n));z.f32=(n=>new Na(n));z.f32be=(n=>new Ba(n));z.f64=(n=>new Ca(n));z.f64be=(n=>new Ma(n));z.struct=((n,e,t)=>new Pa(n,e,t));z.bits=((n,e,t)=>new Fs(n,e,t));z.seq=((n,e,t)=>new La(n,e,t));z.union=((n,e,t)=>new zs(n,e,t));z.unionLayoutDiscriminator=((n,e)=>new Zi(n,e));z.blob=((n,e)=>new Ha(n,e));z.cstr=(n=>new za(n));z.utf8=((n,e)=>new Fa(n,e));z.constant=((n,e)=>new Ka(n,e))});var Op=Ee(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});var $a;function t2(n){{let e=Buffer.from(n);e.reverse();let t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}return $a.toBigInt(n,!1)}Xi.toBigIntLE=t2;function n2(n){{let e=n.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}return $a.toBigInt(n,!0)}Xi.toBigIntBE=n2;function r2(n,e){{let t=n.toString(16),r=Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex");return r.reverse(),r}return $a.fromBigInt(n,Buffer.allocUnsafe(e),!1)}Xi.toBufferLE=r2;function i2(n,e){{let t=n.toString(16);return Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex")}return $a.fromBigInt(n,Buffer.allocUnsafe(e),!0)}Xi.toBufferBE=i2});var Bp=Ee((Wa,Np)=>{(function(n,e){typeof Wa=="object"&&typeof Np<"u"?e(Wa):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.Superstruct={}))})(Wa,(function(n){"use strict";class e extends TypeError{constructor(B,P){let D,{message:Y,explanation:he,...ue}=B,{path:be}=B,Qe=be.length===0?Y:`At path: ${be.join(".")} -- ${Y}`;super(he??Qe),he!=null&&(this.cause=Qe),Object.assign(this,ue),this.name=this.constructor.name,this.failures=()=>D??(D=[B,...P()])}}function t(N){return r(N)&&typeof N[Symbol.iterator]=="function"}function r(N){return typeof N=="object"&&N!=null}function i(N){return r(N)&&!Array.isArray(N)}function s(N){if(Object.prototype.toString.call(N)!=="[object Object]")return!1;let B=Object.getPrototypeOf(N);return B===null||B===Object.prototype}function o(N){return typeof N=="symbol"?N.toString():typeof N=="string"?JSON.stringify(N):`${N}`}function a(N){let{done:B,value:P}=N.next();return B?void 0:P}function u(N,B,P,D){if(N===!0)return;N===!1?N={}:typeof N=="string"&&(N={message:N});let{path:Y,branch:he}=B,{type:ue}=P,{refinement:be,message:Qe=`Expected a value of type \`${ue}\`${be?` with refinement \`${be}\``:""}, but received: \`${o(D)}\``}=N;return{value:D,type:ue,refinement:be,key:Y[Y.length-1],path:Y,branch:he,...N,message:Qe}}function*f(N,B,P,D){t(N)||(N=[N]);for(let Y of N){let he=u(Y,B,P,D);he&&(yield he)}}function*d(N,B,P={}){let{path:D=[],branch:Y=[N],coerce:he=!1,mask:ue=!1}=P,be={path:D,branch:Y,mask:ue};he&&(N=B.coercer(N,be));let Qe="valid";for(let we of B.validator(N,be))we.explanation=P.message,Qe="not_valid",yield[we,void 0];for(let[we,Ne,Go]of B.entries(N,be)){let ut=d(Ne,Go,{path:we===void 0?D:[...D,we],branch:we===void 0?Y:[...Y,Ne],coerce:he,mask:ue,message:P.message});for(let Ze of ut)Ze[0]?(Qe=Ze[0].refinement!=null?"not_refined":"not_valid",yield[Ze[0],void 0]):he&&(Ne=Ze[1],we===void 0?N=Ne:N instanceof Map?N.set(we,Ne):N instanceof Set?N.add(Ne):r(N)&&(Ne!==void 0||we in N)&&(N[we]=Ne))}if(Qe!=="not_valid")for(let we of B.refiner(N,be))we.explanation=P.message,Qe="not_refined",yield[we,void 0];Qe==="valid"&&(yield[void 0,N])}class m{constructor(B){let{type:P,schema:D,validator:Y,refiner:he,coercer:ue=Qe=>Qe,entries:be=function*(){}}=B;this.type=P,this.schema=D,this.entries=be,this.coercer=ue,Y?this.validator=(Qe,we)=>{let Ne=Y(Qe,we);return f(Ne,we,this,Qe)}:this.validator=()=>[],he?this.refiner=(Qe,we)=>{let Ne=he(Qe,we);return f(Ne,we,this,Qe)}:this.refiner=()=>[]}assert(B,P){return _(B,this,P)}create(B,P){return g(B,this,P)}is(B){return S(B,this)}mask(B,P){return E(B,this,P)}validate(B,P={}){return k(B,this,P)}}function _(N,B,P){let D=k(N,B,{message:P});if(D[0])throw D[0]}function g(N,B,P){let D=k(N,B,{coerce:!0,message:P});if(D[0])throw D[0];return D[1]}function E(N,B,P){let D=k(N,B,{coerce:!0,mask:!0,message:P});if(D[0])throw D[0];return D[1]}function S(N,B){return!k(N,B)[0]}function k(N,B,P={}){let D=d(N,B,P),Y=a(D);return Y[0]?[new e(Y[0],function*(){for(let ue of D)ue[0]&&(yield ue[0])}),void 0]:[void 0,Y[1]]}function O(...N){let B=N[0].type==="type",P=N.map(Y=>Y.schema),D=Object.assign({},...P);return B?Se(D):W(D)}function L(N,B){return new m({type:N,schema:null,validator:B})}function M(N,B){return new m({...N,refiner:(P,D)=>P===void 0||N.refiner(P,D),validator(P,D){return P===void 0?!0:(B(P,D),N.validator(P,D))}})}function C(N){return new m({type:"dynamic",schema:null,*entries(B,P){yield*N(B,P).entries(B,P)},validator(B,P){return N(B,P).validator(B,P)},coercer(B,P){return N(B,P).coercer(B,P)},refiner(B,P){return N(B,P).refiner(B,P)}})}function $(N){let B;return new m({type:"lazy",schema:null,*entries(P,D){B??(B=N()),yield*B.entries(P,D)},validator(P,D){return B??(B=N()),B.validator(P,D)},coercer(P,D){return B??(B=N()),B.coercer(P,D)},refiner(P,D){return B??(B=N()),B.refiner(P,D)}})}function G(N,B){let{schema:P}=N,D={...P};for(let Y of B)delete D[Y];switch(N.type){case"type":return Se(D);default:return W(D)}}function q(N){let B=N instanceof m,P=B?{...N.schema}:{...N};for(let D in P)P[D]=X(P[D]);return B&&N.type==="type"?Se(P):W(P)}function j(N,B){let{schema:P}=N,D={};for(let Y of B)D[Y]=P[Y];switch(N.type){case"type":return Se(D);default:return W(D)}}function H(N,B){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),L(N,B)}function V(){return L("any",()=>!0)}function K(N){return new m({type:"array",schema:N,*entries(B){if(N&&Array.isArray(B))for(let[P,D]of B.entries())yield[P,D,N]},coercer(B){return Array.isArray(B)?B.slice():B},validator(B){return Array.isArray(B)||`Expected an array value, but received: ${o(B)}`}})}function J(){return L("bigint",N=>typeof N=="bigint")}function w(){return L("boolean",N=>typeof N=="boolean")}function c(){return L("date",N=>N instanceof Date&&!isNaN(N.getTime())||`Expected a valid \`Date\` object, but received: ${o(N)}`)}function h(N){let B={},P=N.map(D=>o(D)).join();for(let D of N)B[D]=D;return new m({type:"enums",schema:B,validator(D){return N.includes(D)||`Expected one of \`${P}\`, but received: ${o(D)}`}})}function y(){return L("func",N=>typeof N=="function"||`Expected a function, but received: ${o(N)}`)}function b(N){return L("instance",B=>B instanceof N||`Expected a \`${N.name}\` instance, but received: ${o(B)}`)}function A(){return L("integer",N=>typeof N=="number"&&!isNaN(N)&&Number.isInteger(N)||`Expected an integer, but received: ${o(N)}`)}function v(N){return new m({type:"intersection",schema:null,*entries(B,P){for(let D of N)yield*D.entries(B,P)},*validator(B,P){for(let D of N)yield*D.validator(B,P)},*refiner(B,P){for(let D of N)yield*D.refiner(B,P)}})}function I(N){let B=o(N),P=typeof N;return new m({type:"literal",schema:P==="string"||P==="number"||P==="boolean"?N:null,validator(D){return D===N||`Expected the literal \`${B}\`, but received: ${o(D)}`}})}function R(N,B){return new m({type:"map",schema:null,*entries(P){if(N&&B&&P instanceof Map)for(let[D,Y]of P.entries())yield[D,D,N],yield[D,Y,B]},coercer(P){return P instanceof Map?new Map(P):P},validator(P){return P instanceof Map||`Expected a \`Map\` object, but received: ${o(P)}`}})}function p(){return L("never",()=>!1)}function x(N){return new m({...N,validator:(B,P)=>B===null||N.validator(B,P),refiner:(B,P)=>B===null||N.refiner(B,P)})}function Z(){return L("number",N=>typeof N=="number"&&!isNaN(N)||`Expected a number, but received: ${o(N)}`)}function W(N){let B=N?Object.keys(N):[],P=p();return new m({type:"object",schema:N||null,*entries(D){if(N&&r(D)){let Y=new Set(Object.keys(D));for(let he of B)Y.delete(he),yield[he,D[he],N[he]];for(let he of Y)yield[he,D[he],P]}},validator(D){return i(D)||`Expected an object, but received: ${o(D)}`},coercer(D,Y){if(!i(D))return D;let he={...D};if(Y.mask&&N)for(let ue in he)N[ue]===void 0&&delete he[ue];return he}})}function X(N){return new m({...N,validator:(B,P)=>B===void 0||N.validator(B,P),refiner:(B,P)=>B===void 0||N.refiner(B,P)})}function ie(N,B){return new m({type:"record",schema:null,*entries(P){if(r(P))for(let D in P){let Y=P[D];yield[D,D,N],yield[D,Y,B]}},validator(P){return i(P)||`Expected an object, but received: ${o(P)}`},coercer(P){return i(P)?{...P}:P}})}function pe(){return L("regexp",N=>N instanceof RegExp)}function ce(N){return new m({type:"set",schema:null,*entries(B){if(N&&B instanceof Set)for(let P of B)yield[P,P,N]},coercer(B){return B instanceof Set?new Set(B):B},validator(B){return B instanceof Set||`Expected a \`Set\` object, but received: ${o(B)}`}})}function He(){return L("string",N=>typeof N=="string"||`Expected a string, but received: ${o(N)}`)}function Ie(N){let B=p();return new m({type:"tuple",schema:null,*entries(P){if(Array.isArray(P)){let D=Math.max(N.length,P.length);for(let Y=0;Y<D;Y++)yield[Y,P[Y],N[Y]||B]}},validator(P){return Array.isArray(P)||`Expected an array, but received: ${o(P)}`},coercer(P){return Array.isArray(P)?P.slice():P}})}function Se(N){let B=Object.keys(N);return new m({type:"type",schema:N,*entries(P){if(r(P))for(let D of B)yield[D,P[D],N[D]]},validator(P){return i(P)||`Expected an object, but received: ${o(P)}`},coercer(P){return i(P)?{...P}:P}})}function Un(N){let B=N.map(P=>P.type).join(" | ");return new m({type:"union",schema:null,coercer(P,D){for(let Y of N){let[he,ue]=Y.validate(P,{coerce:!0,mask:D.mask});if(!he)return ue}return P},validator(P,D){let Y=[];for(let he of N){let[...ue]=d(P,he,D),[be]=ue;if(be[0])for(let[Qe]of ue)Qe&&Y.push(Qe);else return[]}return[`Expected the value to satisfy a union of \`${B}\`, but received: ${o(P)}`,...Y]}})}function $e(){return L("unknown",()=>!0)}function Ve(N,B,P){return new m({...N,coercer:(D,Y)=>S(D,B)?N.coercer(P(D,Y),Y):N.coercer(D,Y)})}function $o(N,B,P={}){return Ve(N,$e(),D=>{let Y=typeof B=="function"?B():B;if(D===void 0)return Y;if(!P.strict&&s(D)&&s(Y)){let he={...D},ue=!1;for(let be in Y)he[be]===void 0&&(he[be]=Y[be],ue=!0);if(ue)return he}return D})}function rt(N){return Ve(N,He(),B=>B.trim())}function it(N){return Dn(N,"empty",B=>{let P=Is(B);return P===0||`Expected an empty ${N.type} but received one with a size of \`${P}\``})}function Is(N){return N instanceof Map||N instanceof Set?N.size:N.length}function st(N,B,P={}){let{exclusive:D}=P;return Dn(N,"max",Y=>D?Y<B:Y<=B||`Expected a ${N.type} less than ${D?"":"or equal to "}${B} but received \`${Y}\``)}function ot(N,B,P={}){let{exclusive:D}=P;return Dn(N,"min",Y=>D?Y>B:Y>=B||`Expected a ${N.type} greater than ${D?"":"or equal to "}${B} but received \`${Y}\``)}function Wo(N){return Dn(N,"nonempty",B=>Is(B)>0||`Expected a nonempty ${N.type} but received an empty one`)}function at(N,B){return Dn(N,"pattern",P=>B.test(P)||`Expected a ${N.type} matching \`/${B.source}/\` but received "${P}"`)}function ct(N,B,P=B){let D=`Expected a ${N.type}`,Y=B===P?`of \`${B}\``:`between \`${B}\` and \`${P}\``;return Dn(N,"size",he=>{if(typeof he=="number"||he instanceof Date)return B<=he&&he<=P||`${D} ${Y} but received \`${he}\``;if(he instanceof Map||he instanceof Set){let{size:ue}=he;return B<=ue&&ue<=P||`${D} with a size ${Y} but received one with a size of \`${ue}\``}else{let{length:ue}=he;return B<=ue&&ue<=P||`${D} with a length ${Y} but received one with a length of \`${ue}\``}})}function Dn(N,B,P){return new m({...N,*refiner(D,Y){yield*N.refiner(D,Y);let he=P(D,Y),ue=f(he,Y,N,D);for(let be of ue)yield{...be,refinement:B}}})}n.Struct=m,n.StructError=e,n.any=V,n.array=K,n.assert=_,n.assign=O,n.bigint=J,n.boolean=w,n.coerce=Ve,n.create=g,n.date=c,n.defaulted=$o,n.define=L,n.deprecated=M,n.dynamic=C,n.empty=it,n.enums=h,n.func=y,n.instance=b,n.integer=A,n.intersection=v,n.is=S,n.lazy=$,n.literal=I,n.map=R,n.mask=E,n.max=st,n.min=ot,n.never=p,n.nonempty=Wo,n.nullable=x,n.number=Z,n.object=W,n.omit=G,n.optional=X,n.partial=q,n.pattern=at,n.pick=j,n.record=ie,n.refine=Dn,n.regexp=pe,n.set=ce,n.size=ct,n.string=He,n.struct=H,n.trimmed=rt,n.tuple=Ie,n.type=Se,n.union=Un,n.unknown=$e,n.validate=k}))});function qs(){if(!Ga&&(Ga=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ga))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ga(s2)}var Ga,s2,Ul=rn(()=>{s2=new Uint8Array(16)});var Cp,Mp=rn(()=>{Cp=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function o2(n){return typeof n=="string"&&Cp.test(n)}var Fr,Vs=rn(()=>{Mp();Fr=o2});function a2(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Dt[n[e+0]]+Dt[n[e+1]]+Dt[n[e+2]]+Dt[n[e+3]]+"-"+Dt[n[e+4]]+Dt[n[e+5]]+"-"+Dt[n[e+6]]+Dt[n[e+7]]+"-"+Dt[n[e+8]]+Dt[n[e+9]]+"-"+Dt[n[e+10]]+Dt[n[e+11]]+Dt[n[e+12]]+Dt[n[e+13]]+Dt[n[e+14]]+Dt[n[e+15]]).toLowerCase();if(!Fr(t))throw TypeError("Stringified UUID is invalid");return t}var Dt,ja,Kr,$s=rn(()=>{Vs();Dt=[];for(ja=0;ja<256;++ja)Dt.push((ja+256).toString(16).substr(1));Kr=a2});function c2(n,e,t){var r=e&&t||0,i=e||new Array(16);n=n||{};var s=n.node||Lp,o=n.clockseq!==void 0?n.clockseq:Dl;if(s==null||o==null){var a=n.random||(n.rng||qs)();s==null&&(s=Lp=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=Dl=(a[6]<<8|a[7])&16383)}var u=n.msecs!==void 0?n.msecs:Date.now(),f=n.nsecs!==void 0?n.nsecs:zl+1,d=u-Hl+(f-zl)/1e4;if(d<0&&n.clockseq===void 0&&(o=o+1&16383),(d<0||u>Hl)&&n.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Hl=u,zl=f,Dl=o,u+=122192928e5;var m=((u&268435455)*1e4+f)%4294967296;i[r++]=m>>>24&255,i[r++]=m>>>16&255,i[r++]=m>>>8&255,i[r++]=m&255;var _=u/4294967296*1e4&268435455;i[r++]=_>>>8&255,i[r++]=_&255,i[r++]=_>>>24&15|16,i[r++]=_>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var g=0;g<6;++g)i[r+g]=s[g];return e||Kr(i)}var Lp,Dl,Hl,zl,Pp,Up=rn(()=>{Ul();$s();Hl=0,zl=0;Pp=c2});function u2(n){if(!Fr(n))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(n.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(n.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(n.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(n.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(n.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}var Za,Fl=rn(()=>{Vs();Za=u2});function l2(n){n=unescape(encodeURIComponent(n));for(var e=[],t=0;t<n.length;++t)e.push(n.charCodeAt(t));return e}function Ya(n,e,t){function r(i,s,o,a){if(typeof i=="string"&&(i=l2(i)),typeof s=="string"&&(s=Za(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+i.length);if(u.set(s),u.set(i,s.length),u=t(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,o){a=a||0;for(var f=0;f<16;++f)o[a+f]=u[f];return o}return Kr(u)}try{r.name=n}catch{}return r.DNS=f2,r.URL=h2,r}var f2,h2,Kl=rn(()=>{$s();Fl();f2="6ba7b810-9dad-11d1-80b4-00c04fd430c8",h2="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function d2(n){if(typeof n=="string"){var e=unescape(encodeURIComponent(n));n=new Uint8Array(e.length);for(var t=0;t<e.length;++t)n[t]=e.charCodeAt(t)}return p2(y2(g2(n),n.length*8))}function p2(n){for(var e=[],t=n.length*32,r="0123456789abcdef",i=0;i<t;i+=8){var s=n[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);e.push(o)}return e}function Dp(n){return(n+64>>>9<<4)+14+1}function y2(n,e){n[e>>5]|=128<<e%32,n[Dp(e)-1]=e;for(var t=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<n.length;o+=16){var a=t,u=r,f=i,d=s;t=Gt(t,r,i,s,n[o],7,-680876936),s=Gt(s,t,r,i,n[o+1],12,-389564586),i=Gt(i,s,t,r,n[o+2],17,606105819),r=Gt(r,i,s,t,n[o+3],22,-1044525330),t=Gt(t,r,i,s,n[o+4],7,-176418897),s=Gt(s,t,r,i,n[o+5],12,1200080426),i=Gt(i,s,t,r,n[o+6],17,-1473231341),r=Gt(r,i,s,t,n[o+7],22,-45705983),t=Gt(t,r,i,s,n[o+8],7,1770035416),s=Gt(s,t,r,i,n[o+9],12,-1958414417),i=Gt(i,s,t,r,n[o+10],17,-42063),r=Gt(r,i,s,t,n[o+11],22,-1990404162),t=Gt(t,r,i,s,n[o+12],7,1804603682),s=Gt(s,t,r,i,n[o+13],12,-40341101),i=Gt(i,s,t,r,n[o+14],17,-1502002290),r=Gt(r,i,s,t,n[o+15],22,1236535329),t=jt(t,r,i,s,n[o+1],5,-165796510),s=jt(s,t,r,i,n[o+6],9,-1069501632),i=jt(i,s,t,r,n[o+11],14,643717713),r=jt(r,i,s,t,n[o],20,-373897302),t=jt(t,r,i,s,n[o+5],5,-701558691),s=jt(s,t,r,i,n[o+10],9,38016083),i=jt(i,s,t,r,n[o+15],14,-660478335),r=jt(r,i,s,t,n[o+4],20,-405537848),t=jt(t,r,i,s,n[o+9],5,568446438),s=jt(s,t,r,i,n[o+14],9,-1019803690),i=jt(i,s,t,r,n[o+3],14,-187363961),r=jt(r,i,s,t,n[o+8],20,1163531501),t=jt(t,r,i,s,n[o+13],5,-1444681467),s=jt(s,t,r,i,n[o+2],9,-51403784),i=jt(i,s,t,r,n[o+7],14,1735328473),r=jt(r,i,s,t,n[o+12],20,-1926607734),t=Zt(t,r,i,s,n[o+5],4,-378558),s=Zt(s,t,r,i,n[o+8],11,-2022574463),i=Zt(i,s,t,r,n[o+11],16,1839030562),r=Zt(r,i,s,t,n[o+14],23,-35309556),t=Zt(t,r,i,s,n[o+1],4,-1530992060),s=Zt(s,t,r,i,n[o+4],11,1272893353),i=Zt(i,s,t,r,n[o+7],16,-155497632),r=Zt(r,i,s,t,n[o+10],23,-1094730640),t=Zt(t,r,i,s,n[o+13],4,681279174),s=Zt(s,t,r,i,n[o],11,-358537222),i=Zt(i,s,t,r,n[o+3],16,-722521979),r=Zt(r,i,s,t,n[o+6],23,76029189),t=Zt(t,r,i,s,n[o+9],4,-640364487),s=Zt(s,t,r,i,n[o+12],11,-421815835),i=Zt(i,s,t,r,n[o+15],16,530742520),r=Zt(r,i,s,t,n[o+2],23,-995338651),t=Yt(t,r,i,s,n[o],6,-198630844),s=Yt(s,t,r,i,n[o+7],10,1126891415),i=Yt(i,s,t,r,n[o+14],15,-1416354905),r=Yt(r,i,s,t,n[o+5],21,-57434055),t=Yt(t,r,i,s,n[o+12],6,1700485571),s=Yt(s,t,r,i,n[o+3],10,-1894986606),i=Yt(i,s,t,r,n[o+10],15,-1051523),r=Yt(r,i,s,t,n[o+1],21,-2054922799),t=Yt(t,r,i,s,n[o+8],6,1873313359),s=Yt(s,t,r,i,n[o+15],10,-30611744),i=Yt(i,s,t,r,n[o+6],15,-1560198380),r=Yt(r,i,s,t,n[o+13],21,1309151649),t=Yt(t,r,i,s,n[o+4],6,-145523070),s=Yt(s,t,r,i,n[o+11],10,-1120210379),i=Yt(i,s,t,r,n[o+2],15,718787259),r=Yt(r,i,s,t,n[o+9],21,-343485551),t=qr(t,a),r=qr(r,u),i=qr(i,f),s=qr(s,d)}return[t,r,i,s]}function g2(n){if(n.length===0)return[];for(var e=n.length*8,t=new Uint32Array(Dp(e)),r=0;r<e;r+=8)t[r>>5]|=(n[r/8]&255)<<r%32;return t}function qr(n,e){var t=(n&65535)+(e&65535),r=(n>>16)+(e>>16)+(t>>16);return r<<16|t&65535}function m2(n,e){return n<<e|n>>>32-e}function Xa(n,e,t,r,i,s){return qr(m2(qr(qr(e,n),qr(r,s)),i),t)}function Gt(n,e,t,r,i,s,o){return Xa(e&t|~e&r,n,e,i,s,o)}function jt(n,e,t,r,i,s,o){return Xa(e&r|t&~r,n,e,i,s,o)}function Zt(n,e,t,r,i,s,o){return Xa(e^t^r,n,e,i,s,o)}function Yt(n,e,t,r,i,s,o){return Xa(t^(e|~r),n,e,i,s,o)}var Hp,zp=rn(()=>{Hp=d2});var _2,Fp,Kp=rn(()=>{Kl();zp();_2=Ya("v3",48,Hp),Fp=_2});function b2(n,e,t){n=n||{};var r=n.random||(n.rng||qs)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=r[i];return e}return Kr(r)}var qp,Vp=rn(()=>{Ul();$s();qp=b2});function w2(n,e,t,r){switch(n){case 0:return e&t^~e&r;case 1:return e^t^r;case 2:return e&t^e&r^t&r;case 3:return e^t^r}}function ql(n,e){return n<<e|n>>>32-e}function E2(n){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var i=0;i<r.length;++i)n.push(r.charCodeAt(i))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var s=n.length/4+2,o=Math.ceil(s/16),a=new Array(o),u=0;u<o;++u){for(var f=new Uint32Array(16),d=0;d<16;++d)f[d]=n[u*64+d*4]<<24|n[u*64+d*4+1]<<16|n[u*64+d*4+2]<<8|n[u*64+d*4+3];a[u]=f}a[o-1][14]=(n.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(n.length-1)*8&4294967295;for(var m=0;m<o;++m){for(var _=new Uint32Array(80),g=0;g<16;++g)_[g]=a[m][g];for(var E=16;E<80;++E)_[E]=ql(_[E-3]^_[E-8]^_[E-14]^_[E-16],1);for(var S=t[0],k=t[1],O=t[2],L=t[3],M=t[4],C=0;C<80;++C){var $=Math.floor(C/20),G=ql(S,5)+w2($,k,O,L)+M+e[$]+_[C]>>>0;M=L,L=O,O=ql(k,30)>>>0,k=S,S=G}t[0]=t[0]+S>>>0,t[1]=t[1]+k>>>0,t[2]=t[2]+O>>>0,t[3]=t[3]+L>>>0,t[4]=t[4]+M>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var $p,Wp=rn(()=>{$p=E2});var A2,Gp,jp=rn(()=>{Kl();Wp();A2=Ya("v5",80,$p),Gp=A2});var Zp,Yp=rn(()=>{Zp="00000000-0000-0000-0000-000000000000"});function R2(n){if(!Fr(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}var Xp,Jp=rn(()=>{Vs();Xp=R2});var Vl={};Td(Vl,{NIL:()=>Zp,parse:()=>Za,stringify:()=>Kr,v1:()=>Pp,v3:()=>Fp,v4:()=>qp,v5:()=>Gp,validate:()=>Fr,version:()=>Xp});var $l=rn(()=>{Up();Kp();Vp();jp();Yp();Jp();Vs();$s();Fl()});var ey=Ee((sO,Qp)=>{"use strict";var v2=($l(),Nd(Vl)).v4,x2=function(n,e,t,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};let i=typeof r.version=="number"?r.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");let s={method:n};if(i===2&&(s.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");s.params=e}if(typeof t>"u"){let o=typeof r.generator=="function"?r.generator:function(){return v2()};s.id=o(s,r)}else i===2&&t===null?r.notificationIdNull&&(s.id=null):s.id=t;return s};Qp.exports=x2});var ny=Ee((oO,ty)=>{"use strict";var S2=($l(),Nd(Vl)).v4,I2=ey(),Ws=function(n,e){if(!(this instanceof Ws))return new Ws(n,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return S2()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=n};ty.exports=Ws;Ws.prototype.request=function(n,e,t,r){let i=this,s=null,o=Array.isArray(n)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&n&&typeof n=="object"&&typeof e=="function")r=e,s=n;else{typeof t=="function"&&(r=t,t=void 0);let f=typeof r=="function";try{s=I2(n,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(d){if(f)return r(d);throw d}if(!f)return s}let u;try{u=JSON.stringify(s,this.options.replacer)}catch(f){return r(f)}return this.callServer(u,function(f,d){i._parseResponse(f,d,r)}),s};Ws.prototype._parseResponse=function(n,e,t){if(n){t(n);return}if(!e)return t();let r;try{r=JSON.parse(e,this.options.reviver)}catch(i){return t(i)}if(t.length===3)if(Array.isArray(r)){let i=function(o){return typeof o.error<"u"},s=function(o){return!i(o)};return t(null,r.filter(i),r.filter(s))}else return t(null,r.error,r.result);t(null,r)}});var iy=Ee((aO,Wl)=>{"use strict";var k2=Object.prototype.hasOwnProperty,cn="~";function Gs(){}Object.create&&(Gs.prototype=Object.create(null),new Gs().__proto__||(cn=!1));function T2(n,e,t){this.fn=n,this.context=e,this.once=t||!1}function ry(n,e,t,r,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var s=new T2(t,r||n,i),o=cn?cn+e:e;return n._events[o]?n._events[o].fn?n._events[o]=[n._events[o],s]:n._events[o].push(s):(n._events[o]=s,n._eventsCount++),n}function Ja(n,e){--n._eventsCount===0?n._events=new Gs:delete n._events[e]}function Xt(){this._events=new Gs,this._eventsCount=0}Xt.prototype.eventNames=function(){var e=[],t,r;if(this._eventsCount===0)return e;for(r in t=this._events)k2.call(t,r)&&e.push(cn?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Xt.prototype.listeners=function(e){var t=cn?cn+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o};Xt.prototype.listenerCount=function(e){var t=cn?cn+e:e,r=this._events[t];return r?r.fn?1:r.length:0};Xt.prototype.emit=function(e,t,r,i,s,o){var a=cn?cn+e:e;if(!this._events[a])return!1;var u=this._events[a],f=arguments.length,d,m;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),f){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,s),!0;case 6:return u.fn.call(u.context,t,r,i,s,o),!0}for(m=1,d=new Array(f-1);m<f;m++)d[m-1]=arguments[m];u.fn.apply(u.context,d)}else{var _=u.length,g;for(m=0;m<_;m++)switch(u[m].once&&this.removeListener(e,u[m].fn,void 0,!0),f){case 1:u[m].fn.call(u[m].context);break;case 2:u[m].fn.call(u[m].context,t);break;case 3:u[m].fn.call(u[m].context,t,r);break;case 4:u[m].fn.call(u[m].context,t,r,i);break;default:if(!d)for(g=1,d=new Array(f-1);g<f;g++)d[g-1]=arguments[g];u[m].fn.apply(u[m].context,d)}}return!0};Xt.prototype.on=function(e,t,r){return ry(this,e,t,r,!1)};Xt.prototype.once=function(e,t,r){return ry(this,e,t,r,!0)};Xt.prototype.removeListener=function(e,t,r,i){var s=cn?cn+e:e;if(!this._events[s])return this;if(!t)return Ja(this,s),this;var o=this._events[s];if(o.fn)o.fn===t&&(!i||o.once)&&(!r||o.context===r)&&Ja(this,s);else{for(var a=0,u=[],f=o.length;a<f;a++)(o[a].fn!==t||i&&!o[a].once||r&&o[a].context!==r)&&u.push(o[a]);u.length?this._events[s]=u.length===1?u[0]:u:Ja(this,s)}return this};Xt.prototype.removeAllListeners=function(e){var t;return e?(t=cn?cn+e:e,this._events[t]&&Ja(this,t)):(this._events=new Gs,this._eventsCount=0),this};Xt.prototype.off=Xt.prototype.removeListener;Xt.prototype.addListener=Xt.prototype.on;Xt.prefixed=cn;Xt.EventEmitter=Xt;typeof Wl<"u"&&(Wl.exports=Xt)});var uy=Ee(js=>{"use strict";var O2=Fi(),sy=iy(),N2=class extends sy.EventEmitter{constructor(e,t,r){super();Ot(this,"socket");this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(e,t,r){let i=r||t;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}};function oy(n,e){return new N2(n,e)}var ay=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},cy=class extends sy.EventEmitter{constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},u,f){super();Ot(this,"address");Ot(this,"rpc_id");Ot(this,"queue");Ot(this,"options");Ot(this,"autoconnect");Ot(this,"ready");Ot(this,"reconnect");Ot(this,"reconnect_timer_id");Ot(this,"reconnect_interval");Ot(this,"max_reconnects");Ot(this,"rest_options");Ot(this,"current_reconnects");Ot(this,"generate_request_id");Ot(this,"socket");Ot(this,"webSocketFactory");Ot(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=u||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),f?this.dataPack=f:this.dataPack=new ay,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,i){return!i&&typeof r=="object"&&(i=r,r=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));let a=this.generate_request_id(e,t),u={jsonrpc:"2.0",method:e,params:t||void 0,id:a};this.socket.send(this.dataPack.encode(u),i,f=>{if(f)return o(f);this.queue[a]={promise:[s,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){let t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((r,i)=>{if(!this.ready)return i(new Error("socket not ready"));let s={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);let t=await this.call("rpc.on",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){typeof e=="string"&&(e=[e]);let t=await this.call("rpc.off",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket&&this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=O2.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);let i=[r.notification];if(r.params.constructor===Object)i.push(r.params);else for(let s=0;s<r.params.length;s++)i.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r?.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,i),1))})}},B2=class extends cy{constructor(n="ws://localhost:8080",{autoconnect:e=!0,reconnect:t=!0,reconnect_interval:r=1e3,max_reconnects:i=5}={},s){super(oy,n,{autoconnect:e,reconnect:t,reconnect_interval:r,max_reconnects:i},s)}};js.Client=B2;js.CommonClient=cy;js.DefaultDataPack=ay;js.WebSocket=oy});var _y=Ee(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.shake256=Ye.shake128=Ye.keccak_512=Ye.keccak_384=Ye.keccak_256=Ye.keccak_224=Ye.sha3_512=Ye.sha3_384=Ye.sha3_256=Ye.sha3_224=Ye.Keccak=void 0;Ye.keccakP=gy;var Ys=rl(),Jt=Fn(),C2=BigInt(0),Zs=BigInt(1),M2=BigInt(2),L2=BigInt(7),P2=BigInt(256),U2=BigInt(113),hy=[],dy=[],py=[];for(let n=0,e=Zs,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],hy.push(2*(5*r+t)),dy.push((n+1)*(n+2)/2%64);let i=C2;for(let s=0;s<7;s++)e=(e<<Zs^(e>>L2)*U2)%P2,e&M2&&(i^=Zs<<(Zs<<BigInt(s))-Zs);py.push(i)}var yy=(0,Ys.split)(py,!0),D2=yy[0],H2=yy[1],ly=(n,e,t)=>t>32?(0,Ys.rotlBH)(n,e,t):(0,Ys.rotlSH)(n,e,t),fy=(n,e,t)=>t>32?(0,Ys.rotlBL)(n,e,t):(0,Ys.rotlSL)(n,e,t);function gy(n,e=24){let t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){let a=(o+8)%10,u=(o+2)%10,f=t[u],d=t[u+1],m=ly(f,d,1)^t[a],_=fy(f,d,1)^t[a+1];for(let g=0;g<50;g+=10)n[o+g]^=m,n[o+g+1]^=_}let i=n[2],s=n[3];for(let o=0;o<24;o++){let a=dy[o],u=ly(i,s,a),f=fy(i,s,a),d=hy[o];i=n[d],s=n[d+1],n[d]=u,n[d+1]=f}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}n[0]^=D2[r],n[1]^=H2[r]}(0,Jt.clean)(t)}var Xs=class n extends Jt.Hash{constructor(e,t,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,(0,Jt.anumber)(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,Jt.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,Jt.swap32IfBE)(this.state32),gy(this.state32,this.rounds),(0,Jt.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(e){(0,Jt.aexists)(this),e=(0,Jt.toBytes)(e),(0,Jt.abytes)(e);let{blockLen:t,state:r}=this,i=e.length;for(let s=0;s<i;){let o=Math.min(t-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(t&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){(0,Jt.aexists)(this,!1),(0,Jt.abytes)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();let o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,Jt.anumber)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,Jt.aoutput)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,Jt.clean)(this.state)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new n(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};Ye.Keccak=Xs;var Vr=(n,e,t)=>(0,Jt.createHasher)(()=>new Xs(e,n,t));Ye.sha3_224=Vr(6,144,224/8);Ye.sha3_256=Vr(6,136,256/8);Ye.sha3_384=Vr(6,104,384/8);Ye.sha3_512=Vr(6,72,512/8);Ye.keccak_224=Vr(1,144,224/8);Ye.keccak_256=Vr(1,136,256/8);Ye.keccak_384=Vr(1,104,384/8);Ye.keccak_512=Vr(1,72,512/8);var my=(n,e,t)=>(0,Jt.createXOFer)((r={})=>new Xs(e,n,r.dkLen===void 0?t:r.dkLen,!0));Ye.shake128=my(31,168,128/8);Ye.shake256=my(31,136,256/8)});var by=Ee(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});mi.hmac=mi.HMAC=void 0;var gi=Fn(),Js=class extends gi.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,gi.ahash)(e);let r=(0,gi.toBytes)(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),(0,gi.clean)(s)}update(e){return(0,gi.aexists)(this),this.iHash.update(e),this}digestInto(e){(0,gi.aexists)(this),(0,gi.abytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};mi.HMAC=Js;var z2=(n,e,t)=>new Js(n,e).update(t).digest();mi.hmac=z2;mi.hmac.create=(n,e)=>new Js(n,e)});var Xl=Ee(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.DER=Xe.DERErr=void 0;Xe._splitEndoScalar=Ey;Xe._normFnElement=$r;Xe.weierstrassN=Yl;Xe.SWUFpSqrtRatio=Ry;Xe.mapToCurveSimpleSWU=q2;Xe.ecdh=xy;Xe.ecdsa=Sy;Xe.weierstrassPoints=V2;Xe._legacyHelperEquat=ky;Xe.weierstrass=j2;var F2=by(),K2=Fn(),ae=pr(),_r=ua(),Qi=Pr(),wy=(n,e)=>(n+(n>=0?e:-e)/Xn)/e;function Ey(n,e,t){let[[r,i],[s,o]]=e,a=wy(o*n,t),u=wy(-i*n,t),f=n-a*r-u*s,d=-a*i-u*o,m=f<Cn,_=d<Cn;m&&(f=-f),_&&(d=-d);let g=(0,ae.bitMask)(Math.ceil((0,ae.bitLen)(t)/2))+Ht;if(f<Cn||f>=g||d<Cn||d>=g)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:m,k1:f,k2neg:_,k2:d}}function jl(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function Gl(n,e){let t={};for(let r of Object.keys(e))t[r]=n[r]===void 0?e[r]:n[r];return(0,ae._abool2)(t.lowS,"lowS"),(0,ae._abool2)(t.prehash,"prehash"),t.format!==void 0&&jl(t.format),t}var Qa=class extends Error{constructor(e=""){super(e)}};Xe.DERErr=Qa;Xe.DER={Err:Qa,_tlv:{encode:(n,e)=>{let{Err:t}=Xe.DER;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");let r=e.length/2,i=(0,ae.numberToHexUnpadded)(r);if(i.length/2&128)throw new t("tlv.encode: long form length too big");let s=r>127?(0,ae.numberToHexUnpadded)(i.length/2|128):"";return(0,ae.numberToHexUnpadded)(n)+s+i+e},decode(n,e){let{Err:t}=Xe.DER,r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");let i=e[r++],s=!!(i&128),o=0;if(!s)o=i;else{let u=i&127;if(!u)throw new t("tlv.decode(long): indefinite length not supported");if(u>4)throw new t("tlv.decode(long): byte length is too big");let f=e.subarray(r,r+u);if(f.length!==u)throw new t("tlv.decode: length bytes not complete");if(f[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(let d of f)o=o<<8|d;if(r+=u,o<128)throw new t("tlv.decode(long): not minimal encoding")}let a=e.subarray(r,r+o);if(a.length!==o)throw new t("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(n){let{Err:e}=Xe.DER;if(n<Cn)throw new e("integer: negative integers are not allowed");let t=(0,ae.numberToHexUnpadded)(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){let{Err:e}=Xe.DER;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return(0,ae.bytesToNumberBE)(n)}},toSig(n){let{Err:e,_int:t,_tlv:r}=Xe.DER,i=(0,ae.ensureBytes)("signature",n),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");let{v:a,l:u}=r.decode(2,s),{v:f,l:d}=r.decode(2,u);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(a),s:t.decode(f)}},hexFromSig(n){let{_tlv:e,_int:t}=Xe.DER,r=e.encode(2,t.encode(n.r)),i=e.encode(2,t.encode(n.s)),s=r+i;return e.encode(48,s)}};var Cn=BigInt(0),Ht=BigInt(1),Xn=BigInt(2),Ji=BigInt(3),Zl=BigInt(4);function $r(n,e){let{BYTES:t}=n,r;if(typeof e=="bigint")r=e;else{let i=(0,ae.ensureBytes)("private key",e);try{r=n.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Yl(n,e={}){let t=(0,_r._createCurveFields)("weierstrass",n,e),{Fp:r,Fn:i}=t,s=t.CURVE,{h:o,n:a}=s;(0,ae._validateObject)(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:u}=e;if(u&&(!r.is0(s.a)||typeof u.beta!="bigint"||!Array.isArray(u.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');let f=vy(r,i);function d(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function m(J,w,c){let{x:h,y}=w.toAffine(),b=r.toBytes(h);if((0,ae._abool2)(c,"isCompressed"),c){d();let A=!r.isOdd(y);return(0,ae.concatBytes)(Ay(A),b)}else return(0,ae.concatBytes)(Uint8Array.of(4),b,r.toBytes(y))}function _(J){(0,ae._abytes2)(J,void 0,"Point");let{publicKey:w,publicKeyUncompressed:c}=f,h=J.length,y=J[0],b=J.subarray(1);if(h===w&&(y===2||y===3)){let A=r.fromBytes(b);if(!r.isValid(A))throw new Error("bad point: is not on curve, wrong x");let v=S(A),I;try{I=r.sqrt(v)}catch(x){let Z=x instanceof Error?": "+x.message:"";throw new Error("bad point: is not on curve, sqrt error"+Z)}d();let R=r.isOdd(I);return(y&1)===1!==R&&(I=r.neg(I)),{x:A,y:I}}else if(h===c&&y===4){let A=r.BYTES,v=r.fromBytes(b.subarray(0,A)),I=r.fromBytes(b.subarray(A,A*2));if(!k(v,I))throw new Error("bad point: is not on curve");return{x:v,y:I}}else throw new Error(`bad point: got length ${h}, expected compressed=${w} or uncompressed=${c}`)}let g=e.toBytes||m,E=e.fromBytes||_;function S(J){let w=r.sqr(J),c=r.mul(w,J);return r.add(r.add(c,r.mul(J,s.a)),s.b)}function k(J,w){let c=r.sqr(w),h=S(J);return r.eql(c,h)}if(!k(s.Gx,s.Gy))throw new Error("bad curve params: generator point");let O=r.mul(r.pow(s.a,Ji),Zl),L=r.mul(r.sqr(s.b),BigInt(27));if(r.is0(r.add(O,L)))throw new Error("bad curve params: a or b");function M(J,w,c=!1){if(!r.isValid(w)||c&&r.is0(w))throw new Error(`bad point coordinate ${J}`);return w}function C(J){if(!(J instanceof H))throw new Error("ProjectivePoint expected")}function $(J){if(!u||!u.basises)throw new Error("no endo");return Ey(J,u.basises,i.ORDER)}let G=(0,ae.memoized)((J,w)=>{let{X:c,Y:h,Z:y}=J;if(r.eql(y,r.ONE))return{x:c,y:h};let b=J.is0();w==null&&(w=b?r.ONE:r.inv(y));let A=r.mul(c,w),v=r.mul(h,w),I=r.mul(y,w);if(b)return{x:r.ZERO,y:r.ZERO};if(!r.eql(I,r.ONE))throw new Error("invZ was invalid");return{x:A,y:v}}),q=(0,ae.memoized)(J=>{if(J.is0()){if(e.allowInfinityPoint&&!r.is0(J.Y))return;throw new Error("bad point: ZERO")}let{x:w,y:c}=J.toAffine();if(!r.isValid(w)||!r.isValid(c))throw new Error("bad point: x or y not field elements");if(!k(w,c))throw new Error("bad point: equation left != right");if(!J.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function j(J,w,c,h,y){return c=new H(r.mul(c.X,J),c.Y,c.Z),w=(0,_r.negateCt)(h,w),c=(0,_r.negateCt)(y,c),w.add(c)}class H{constructor(w,c,h){this.X=M("x",w),this.Y=M("y",c,!0),this.Z=M("z",h),Object.freeze(this)}static CURVE(){return s}static fromAffine(w){let{x:c,y:h}=w||{};if(!w||!r.isValid(c)||!r.isValid(h))throw new Error("invalid affine point");if(w instanceof H)throw new Error("projective point not allowed");return r.is0(c)&&r.is0(h)?H.ZERO:new H(c,h,r.ONE)}static fromBytes(w){let c=H.fromAffine(E((0,ae._abytes2)(w,void 0,"point")));return c.assertValidity(),c}static fromHex(w){return H.fromBytes((0,ae.ensureBytes)("pointHex",w))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(w=8,c=!0){return K.createCache(this,w),c||this.multiply(Ji),this}assertValidity(){q(this)}hasEvenY(){let{y:w}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(w)}equals(w){C(w);let{X:c,Y:h,Z:y}=this,{X:b,Y:A,Z:v}=w,I=r.eql(r.mul(c,v),r.mul(b,y)),R=r.eql(r.mul(h,v),r.mul(A,y));return I&&R}negate(){return new H(this.X,r.neg(this.Y),this.Z)}double(){let{a:w,b:c}=s,h=r.mul(c,Ji),{X:y,Y:b,Z:A}=this,v=r.ZERO,I=r.ZERO,R=r.ZERO,p=r.mul(y,y),x=r.mul(b,b),Z=r.mul(A,A),W=r.mul(y,b);return W=r.add(W,W),R=r.mul(y,A),R=r.add(R,R),v=r.mul(w,R),I=r.mul(h,Z),I=r.add(v,I),v=r.sub(x,I),I=r.add(x,I),I=r.mul(v,I),v=r.mul(W,v),R=r.mul(h,R),Z=r.mul(w,Z),W=r.sub(p,Z),W=r.mul(w,W),W=r.add(W,R),R=r.add(p,p),p=r.add(R,p),p=r.add(p,Z),p=r.mul(p,W),I=r.add(I,p),Z=r.mul(b,A),Z=r.add(Z,Z),p=r.mul(Z,W),v=r.sub(v,p),R=r.mul(Z,x),R=r.add(R,R),R=r.add(R,R),new H(v,I,R)}add(w){C(w);let{X:c,Y:h,Z:y}=this,{X:b,Y:A,Z:v}=w,I=r.ZERO,R=r.ZERO,p=r.ZERO,x=s.a,Z=r.mul(s.b,Ji),W=r.mul(c,b),X=r.mul(h,A),ie=r.mul(y,v),pe=r.add(c,h),ce=r.add(b,A);pe=r.mul(pe,ce),ce=r.add(W,X),pe=r.sub(pe,ce),ce=r.add(c,y);let He=r.add(b,v);return ce=r.mul(ce,He),He=r.add(W,ie),ce=r.sub(ce,He),He=r.add(h,y),I=r.add(A,v),He=r.mul(He,I),I=r.add(X,ie),He=r.sub(He,I),p=r.mul(x,ce),I=r.mul(Z,ie),p=r.add(I,p),I=r.sub(X,p),p=r.add(X,p),R=r.mul(I,p),X=r.add(W,W),X=r.add(X,W),ie=r.mul(x,ie),ce=r.mul(Z,ce),X=r.add(X,ie),ie=r.sub(W,ie),ie=r.mul(x,ie),ce=r.add(ce,ie),W=r.mul(X,ce),R=r.add(R,W),W=r.mul(He,ce),I=r.mul(pe,I),I=r.sub(I,W),W=r.mul(pe,X),p=r.mul(He,p),p=r.add(p,W),new H(I,R,p)}subtract(w){return this.add(w.negate())}is0(){return this.equals(H.ZERO)}multiply(w){let{endo:c}=e;if(!i.isValidNot0(w))throw new Error("invalid scalar: out of range");let h,y,b=A=>K.cached(this,A,v=>(0,_r.normalizeZ)(H,v));if(c){let{k1neg:A,k1:v,k2neg:I,k2:R}=$(w),{p,f:x}=b(v),{p:Z,f:W}=b(R);y=x.add(W),h=j(c.beta,p,Z,A,I)}else{let{p:A,f:v}=b(w);h=A,y=v}return(0,_r.normalizeZ)(H,[h,y])[0]}multiplyUnsafe(w){let{endo:c}=e,h=this;if(!i.isValid(w))throw new Error("invalid scalar: out of range");if(w===Cn||h.is0())return H.ZERO;if(w===Ht)return h;if(K.hasCache(this))return this.multiply(w);if(c){let{k1neg:y,k1:b,k2neg:A,k2:v}=$(w),{p1:I,p2:R}=(0,_r.mulEndoUnsafe)(H,h,b,v);return j(c.beta,I,R,y,A)}else return K.unsafe(h,w)}multiplyAndAddUnsafe(w,c,h){let y=this.multiplyUnsafe(c).add(w.multiplyUnsafe(h));return y.is0()?void 0:y}toAffine(w){return G(this,w)}isTorsionFree(){let{isTorsionFree:w}=e;return o===Ht?!0:w?w(H,this):K.unsafe(this,a).is0()}clearCofactor(){let{clearCofactor:w}=e;return o===Ht?this:w?w(H,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(w=!0){return(0,ae._abool2)(w,"isCompressed"),this.assertValidity(),g(H,this,w)}toHex(w=!0){return(0,ae.bytesToHex)(this.toBytes(w))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(w=!0){return this.toBytes(w)}_setWindowSize(w){this.precompute(w)}static normalizeZ(w){return(0,_r.normalizeZ)(H,w)}static msm(w,c){return(0,_r.pippenger)(H,i,w,c)}static fromPrivateKey(w){return H.BASE.multiply($r(i,w))}}H.BASE=new H(s.Gx,s.Gy,r.ONE),H.ZERO=new H(r.ZERO,r.ONE,r.ZERO),H.Fp=r,H.Fn=i;let V=i.BITS,K=new _r.wNAF(H,e.endo?Math.ceil(V/2):V);return H.BASE.precompute(8),H}function Ay(n){return Uint8Array.of(n?2:3)}function Ry(n,e){let t=n.ORDER,r=Cn;for(let E=t-Ht;E%Xn===Cn;E/=Xn)r+=Ht;let i=r,s=Xn<<i-Ht-Ht,o=s*Xn,a=(t-Ht)/o,u=(a-Ht)/Xn,f=o-Ht,d=s,m=n.pow(e,a),_=n.pow(e,(a+Ht)/Xn),g=(E,S)=>{let k=m,O=n.pow(S,f),L=n.sqr(O);L=n.mul(L,S);let M=n.mul(E,L);M=n.pow(M,u),M=n.mul(M,O),O=n.mul(M,S),L=n.mul(M,E);let C=n.mul(L,O);M=n.pow(C,d);let $=n.eql(M,n.ONE);O=n.mul(L,_),M=n.mul(C,k),L=n.cmov(O,L,$),C=n.cmov(M,C,$);for(let G=i;G>Ht;G--){let q=G-Xn;q=Xn<<q-Ht;let j=n.pow(C,q),H=n.eql(j,n.ONE);O=n.mul(L,k),k=n.mul(k,k),j=n.mul(C,k),L=n.cmov(O,L,H),C=n.cmov(j,C,H)}return{isValid:$,value:L}};if(n.ORDER%Zl===Ji){let E=(n.ORDER-Ji)/Zl,S=n.sqrt(n.neg(e));g=(k,O)=>{let L=n.sqr(O),M=n.mul(k,O);L=n.mul(L,M);let C=n.pow(L,E);C=n.mul(C,M);let $=n.mul(C,S),G=n.mul(n.sqr(C),O),q=n.eql(G,k),j=n.cmov($,C,q);return{isValid:q,value:j}}}return g}function q2(n,e){(0,Qi.validateField)(n);let{A:t,B:r,Z:i}=e;if(!n.isValid(t)||!n.isValid(r)||!n.isValid(i))throw new Error("mapToCurveSimpleSWU: invalid opts");let s=Ry(n,i);if(!n.isOdd)throw new Error("Field does not have .isOdd()");return o=>{let a,u,f,d,m,_,g,E;a=n.sqr(o),a=n.mul(a,i),u=n.sqr(a),u=n.add(u,a),f=n.add(u,n.ONE),f=n.mul(f,r),d=n.cmov(i,n.neg(u),!n.eql(u,n.ZERO)),d=n.mul(d,t),u=n.sqr(f),_=n.sqr(d),m=n.mul(_,t),u=n.add(u,m),u=n.mul(u,f),_=n.mul(_,d),m=n.mul(_,r),u=n.add(u,m),g=n.mul(a,f);let{isValid:S,value:k}=s(u,_);E=n.mul(a,o),E=n.mul(E,k),g=n.cmov(g,f,S),E=n.cmov(E,k,S);let O=n.isOdd(o)===n.isOdd(E);E=n.cmov(n.neg(E),E,O);let L=(0,Qi.FpInvertBatch)(n,[d],!0)[0];return g=n.mul(g,L),{x:g,y:E}}}function vy(n,e){return{secretKey:e.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function xy(n,e={}){let{Fn:t}=n,r=e.randomBytes||ae.randomBytes,i=Object.assign(vy(n.Fp,t),{seed:(0,Qi.getMinHashLength)(t.ORDER)});function s(g){try{return!!$r(t,g)}catch{return!1}}function o(g,E){let{publicKey:S,publicKeyUncompressed:k}=i;try{let O=g.length;return E===!0&&O!==S||E===!1&&O!==k?!1:!!n.fromBytes(g)}catch{return!1}}function a(g=r(i.seed)){return(0,Qi.mapHashToField)((0,ae._abytes2)(g,i.seed,"seed"),t.ORDER)}function u(g,E=!0){return n.BASE.multiply($r(t,g)).toBytes(E)}function f(g){let E=a(g);return{secretKey:E,publicKey:u(E)}}function d(g){if(typeof g=="bigint")return!1;if(g instanceof n)return!0;let{secretKey:E,publicKey:S,publicKeyUncompressed:k}=i;if(t.allowedLengths||E===S)return;let O=(0,ae.ensureBytes)("key",g).length;return O===S||O===k}function m(g,E,S=!0){if(d(g)===!0)throw new Error("first arg must be private key");if(d(E)===!1)throw new Error("second arg must be public key");let k=$r(t,g);return n.fromHex(E).multiply(k).toBytes(S)}return Object.freeze({getPublicKey:u,getSharedSecret:m,keygen:f,Point:n,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:g=>$r(t,g),precompute(g=8,E=n.BASE){return E.precompute(g,!1)}},lengths:i})}function Sy(n,e,t={}){(0,K2.ahash)(e),(0,ae._validateObject)(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let r=t.randomBytes||ae.randomBytes,i=t.hmac||((c,...h)=>(0,F2.hmac)(e,c,(0,ae.concatBytes)(...h))),{Fp:s,Fn:o}=n,{ORDER:a,BITS:u}=o,{keygen:f,getPublicKey:d,getSharedSecret:m,utils:_,lengths:g}=xy(n,t),E={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},S="compact";function k(c){let h=a>>Ht;return c>h}function O(c,h){if(!o.isValidNot0(h))throw new Error(`invalid signature ${c}: out of range 1..Point.Fn.ORDER`);return h}function L(c,h){jl(h);let y=g.signature,b=h==="compact"?y:h==="recovered"?y+1:void 0;return(0,ae._abytes2)(c,b,`${h} signature`)}class M{constructor(h,y,b){this.r=O("r",h),this.s=O("s",y),b!=null&&(this.recovery=b),Object.freeze(this)}static fromBytes(h,y=S){L(h,y);let b;if(y==="der"){let{r:R,s:p}=Xe.DER.toSig((0,ae._abytes2)(h));return new M(R,p)}y==="recovered"&&(b=h[0],y="compact",h=h.subarray(1));let A=o.BYTES,v=h.subarray(0,A),I=h.subarray(A,A*2);return new M(o.fromBytes(v),o.fromBytes(I),b)}static fromHex(h,y){return this.fromBytes((0,ae.hexToBytes)(h),y)}addRecoveryBit(h){return new M(this.r,this.s,h)}recoverPublicKey(h){let y=s.ORDER,{r:b,s:A,recovery:v}=this;if(v==null||![0,1,2,3].includes(v))throw new Error("recovery id invalid");if(a*Xn<y&&v>1)throw new Error("recovery id is ambiguous for h>1 curve");let R=v===2||v===3?b+a:b;if(!s.isValid(R))throw new Error("recovery id 2 or 3 invalid");let p=s.toBytes(R),x=n.fromBytes((0,ae.concatBytes)(Ay((v&1)===0),p)),Z=o.inv(R),W=$((0,ae.ensureBytes)("msgHash",h)),X=o.create(-W*Z),ie=o.create(A*Z),pe=n.BASE.multiplyUnsafe(X).add(x.multiplyUnsafe(ie));if(pe.is0())throw new Error("point at infinify");return pe.assertValidity(),pe}hasHighS(){return k(this.s)}toBytes(h=S){if(jl(h),h==="der")return(0,ae.hexToBytes)(Xe.DER.hexFromSig(this));let y=o.toBytes(this.r),b=o.toBytes(this.s);if(h==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return(0,ae.concatBytes)(Uint8Array.of(this.recovery),y,b)}return(0,ae.concatBytes)(y,b)}toHex(h){return(0,ae.bytesToHex)(this.toBytes(h))}assertValidity(){}static fromCompact(h){return M.fromBytes((0,ae.ensureBytes)("sig",h),"compact")}static fromDER(h){return M.fromBytes((0,ae.ensureBytes)("sig",h),"der")}normalizeS(){return this.hasHighS()?new M(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return(0,ae.bytesToHex)(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return(0,ae.bytesToHex)(this.toBytes("compact"))}}let C=t.bits2int||function(h){if(h.length>8192)throw new Error("input is too large");let y=(0,ae.bytesToNumberBE)(h),b=h.length*8-u;return b>0?y>>BigInt(b):y},$=t.bits2int_modN||function(h){return o.create(C(h))},G=(0,ae.bitMask)(u);function q(c){return(0,ae.aInRange)("num < 2^"+u,c,Cn,G),o.toBytes(c)}function j(c,h){return(0,ae._abytes2)(c,void 0,"message"),h?(0,ae._abytes2)(e(c),void 0,"prehashed message"):c}function H(c,h,y){if(["recovered","canonical"].some(X=>X in y))throw new Error("sign() legacy options not supported");let{lowS:b,prehash:A,extraEntropy:v}=Gl(y,E);c=j(c,A);let I=$(c),R=$r(o,h),p=[q(R),q(I)];if(v!=null&&v!==!1){let X=v===!0?r(g.secretKey):v;p.push((0,ae.ensureBytes)("extraEntropy",X))}let x=(0,ae.concatBytes)(...p),Z=I;function W(X){let ie=C(X);if(!o.isValidNot0(ie))return;let pe=o.inv(ie),ce=n.BASE.multiply(ie).toAffine(),He=o.create(ce.x);if(He===Cn)return;let Ie=o.create(pe*o.create(Z+He*R));if(Ie===Cn)return;let Se=(ce.x===He?0:2)|Number(ce.y&Ht),Un=Ie;return b&&k(Ie)&&(Un=o.neg(Ie),Se^=1),new M(He,Un,Se)}return{seed:x,k2sig:W}}function V(c,h,y={}){c=(0,ae.ensureBytes)("message",c);let{seed:b,k2sig:A}=H(c,h,y);return(0,ae.createHmacDrbg)(e.outputLen,o.BYTES,i)(b,A)}function K(c){let h,y=typeof c=="string"||(0,ae.isBytes)(c),b=!y&&c!==null&&typeof c=="object"&&typeof c.r=="bigint"&&typeof c.s=="bigint";if(!y&&!b)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(b)h=new M(c.r,c.s);else if(y){try{h=M.fromBytes((0,ae.ensureBytes)("sig",c),"der")}catch(A){if(!(A instanceof Xe.DER.Err))throw A}if(!h)try{h=M.fromBytes((0,ae.ensureBytes)("sig",c),"compact")}catch{return!1}}return h||!1}function J(c,h,y,b={}){let{lowS:A,prehash:v,format:I}=Gl(b,E);if(y=(0,ae.ensureBytes)("publicKey",y),h=j((0,ae.ensureBytes)("message",h),v),"strict"in b)throw new Error("options.strict was renamed to lowS");let R=I===void 0?K(c):M.fromBytes((0,ae.ensureBytes)("sig",c),I);if(R===!1)return!1;try{let p=n.fromBytes(y);if(A&&R.hasHighS())return!1;let{r:x,s:Z}=R,W=$(h),X=o.inv(Z),ie=o.create(W*X),pe=o.create(x*X),ce=n.BASE.multiplyUnsafe(ie).add(p.multiplyUnsafe(pe));return ce.is0()?!1:o.create(ce.x)===x}catch{return!1}}function w(c,h,y={}){let{prehash:b}=Gl(y,E);return h=j(h,b),M.fromBytes(c,"recovered").recoverPublicKey(h).toBytes()}return Object.freeze({keygen:f,getPublicKey:d,getSharedSecret:m,utils:_,lengths:g,Point:n,sign:V,verify:J,recoverPublicKey:w,Signature:M,hash:e})}function V2(n){let{CURVE:e,curveOpts:t}=Iy(n),r=Yl(e,t);return W2(n,r)}function Iy(n){let e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp,r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0,i=(0,Qi.Field)(e.n,{BITS:n.nBitLength,allowedLengths:r,modFromBytes:n.wrapPrivateKey}),s={Fp:t,Fn:i,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:s}}function $2(n){let{CURVE:e,curveOpts:t}=Iy(n),r={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:t,hash:n.hash,ecdsaOpts:r}}function ky(n,e,t){function r(i){let s=n.sqr(i),o=n.mul(s,i);return n.add(n.add(o,n.mul(i,e)),t)}return r}function W2(n,e){let{Fp:t,Fn:r}=e;function i(o){return(0,ae.inRange)(o,Ht,r.ORDER)}let s=ky(t,n.a,n.b);return Object.assign({},{CURVE:n,Point:e,ProjectivePoint:e,normPrivateKeyToScalar:o=>$r(r,o),weierstrassEquation:s,isWithinCurveOrder:i})}function G2(n,e){let t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},n,(0,Qi.nLength)(t.Fn.ORDER,t.Fn.BITS))})}function j2(n){let{CURVE:e,curveOpts:t,hash:r,ecdsaOpts:i}=$2(n),s=Yl(e,t),o=Sy(s,r,i);return G2(n,o)}});var Ty=Ee(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.getHash=Y2;ec.createCurve=X2;var Z2=Xl();function Y2(n){return{hash:n}}function X2(n,e){let t=r=>(0,Z2.weierstrass)({...n,hash:r});return{...t(e),create:t}}});var Hy=Ee(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.encodeToCurve=zt.hashToCurve=zt.secp256k1_hasher=zt.schnorr=zt.secp256k1=void 0;var tc=ia(),Cy=Fn(),J2=Ty(),My=bl(),un=Pr(),Ly=Xl(),wn=pr(),es={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Q2={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},eA=BigInt(0),Oy=BigInt(1),Jl=BigInt(2);function tA(n){let e=es.p,t=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),f=n*n*n%e,d=f*f*n%e,m=(0,un.pow2)(d,t,e)*d%e,_=(0,un.pow2)(m,t,e)*d%e,g=(0,un.pow2)(_,Jl,e)*f%e,E=(0,un.pow2)(g,i,e)*g%e,S=(0,un.pow2)(E,s,e)*E%e,k=(0,un.pow2)(S,a,e)*S%e,O=(0,un.pow2)(k,u,e)*k%e,L=(0,un.pow2)(O,a,e)*S%e,M=(0,un.pow2)(L,t,e)*d%e,C=(0,un.pow2)(M,o,e)*E%e,$=(0,un.pow2)(C,r,e)*f%e,G=(0,un.pow2)($,Jl,e);if(!br.eql(br.sqr(G),n))throw new Error("Cannot find square root");return G}var br=(0,un.Field)(es.p,{sqrt:tA});zt.secp256k1=(0,J2.createCurve)({...es,Fp:br,lowS:!0,endo:Q2},tc.sha256);var Ny={};function nc(n,...e){let t=Ny[n];if(t===void 0){let r=(0,tc.sha256)((0,wn.utf8ToBytes)(n));t=(0,wn.concatBytes)(r,r),Ny[n]=t}return(0,tc.sha256)((0,wn.concatBytes)(t,...e))}var ef=n=>n.toBytes(!0).slice(1),ts=zt.secp256k1.Point,tf=n=>n%Jl===eA;function Ql(n){let{Fn:e,BASE:t}=ts,r=(0,Ly._normFnElement)(e,n),i=t.multiply(r);return{scalar:tf(i.y)?r:e.neg(r),bytes:ef(i)}}function Py(n){let e=br;if(!e.isValidNot0(n))throw new Error("invalid x: Fail if x \u2265 p");let t=e.create(n*n),r=e.create(t*n+BigInt(7)),i=e.sqrt(r);tf(i)||(i=e.neg(i));let s=ts.fromAffine({x:n,y:i});return s.assertValidity(),s}var Qs=wn.bytesToNumberBE;function Uy(...n){return ts.Fn.create(Qs(nc("BIP0340/challenge",...n)))}function By(n){return Ql(n).bytes}function nA(n,e,t=(0,Cy.randomBytes)(32)){let{Fn:r}=ts,i=(0,wn.ensureBytes)("message",n),{bytes:s,scalar:o}=Ql(e),a=(0,wn.ensureBytes)("auxRand",t,32),u=r.toBytes(o^Qs(nc("BIP0340/aux",a))),f=nc("BIP0340/nonce",u,s,i),{bytes:d,scalar:m}=Ql(f),_=Uy(d,s,i),g=new Uint8Array(64);if(g.set(d,0),g.set(r.toBytes(r.create(m+_*o)),32),!Dy(g,i,s))throw new Error("sign: Invalid signature produced");return g}function Dy(n,e,t){let{Fn:r,BASE:i}=ts,s=(0,wn.ensureBytes)("signature",n,64),o=(0,wn.ensureBytes)("message",e),a=(0,wn.ensureBytes)("publicKey",t,32);try{let u=Py(Qs(a)),f=Qs(s.subarray(0,32));if(!(0,wn.inRange)(f,Oy,es.p))return!1;let d=Qs(s.subarray(32,64));if(!(0,wn.inRange)(d,Oy,es.n))return!1;let m=Uy(r.toBytes(f),ef(u),o),_=i.multiplyUnsafe(d).add(u.multiplyUnsafe(r.neg(m))),{x:g,y:E}=_.toAffine();return!(_.is0()||!tf(E)||g!==f)}catch{return!1}}zt.schnorr=(()=>{let t=(i=(0,Cy.randomBytes)(48))=>(0,un.mapHashToField)(i,es.n);zt.secp256k1.utils.randomSecretKey;function r(i){let s=t(i);return{secretKey:s,publicKey:By(s)}}return{keygen:r,getPublicKey:By,sign:nA,verify:Dy,Point:ts,utils:{randomSecretKey:t,randomPrivateKey:t,taggedHash:nc,lift_x:Py,pointToBytes:ef,numberToBytesBE:wn.numberToBytesBE,bytesToNumberBE:wn.bytesToNumberBE,mod:un.mod},lengths:{secretKey:32,publicKey:32,publicKeyHasPrefix:!1,signature:64,seed:48}}})();var rA=(0,My.isogenyMap)(br,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(n=>n.map(e=>BigInt(e)))),iA=(0,Ly.mapToCurveSimpleSWU)(br,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:br.create(BigInt("-11"))});zt.secp256k1_hasher=(0,My.createHasher)(zt.secp256k1.Point,n=>{let{x:e,y:t}=iA(br.create(n[0]));return rA(e,t)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:br.ORDER,m:1,k:128,expand:"xmd",hash:tc.sha256});zt.hashToCurve=zt.secp256k1_hasher.hashToCurve;zt.encodeToCurve=zt.secp256k1_hasher.encodeToCurve});var bc=Ee(te=>{"use strict";var ye=Fi(),cs=dp(),sA=Wi(),oA=_a(),zy=Ap(),nf=kp(),ag=Tp(),uf=Op(),l=Bp(),aA=ny(),Fy=uy(),Ky=_y(),Tf=Hy();function Of(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}function cA(n){if(n&&typeof n=="object"&&"default"in n)return n;var e=Object.create(null);return n&&Object.keys(n).forEach(function(t){if(t!=="default"){var r=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:function(){return n[t]}})}}),e.default=n,Object.freeze(e)}var qy=Of(sA),Ft=Of(oA),T=cA(ag),uA=Of(aA),lA=cs.ed25519.utils.randomPrivateKey,Vy=()=>{let n=cs.ed25519.utils.randomPrivateKey(),e=oc(n),t=new Uint8Array(64);return t.set(n),t.set(e,32),{publicKey:e,secretKey:t}},oc=cs.ed25519.getPublicKey;function $y(n){try{return cs.ed25519.ExtendedPoint.fromHex(n),!0}catch{return!1}}var Nf=(n,e)=>cs.ed25519.sign(n,e.slice(0,32)),fA=cs.ed25519.verify,ve=n=>ye.Buffer.isBuffer(n)?n:n instanceof Uint8Array?ye.Buffer.from(n.buffer,n.byteOffset,n.byteLength):ye.Buffer.from(n),ro=class{constructor(e){Object.assign(this,e)}encode(){return ye.Buffer.from(nf.serialize(no,this))}static decode(e){return nf.deserialize(no,this,e)}static decodeUnchecked(e){return nf.deserializeUnchecked(no,this,e)}},lf=class extends ro{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}},no=new Map,cg,ug=32,nr=32;function hA(n){return n._bn!==void 0}var Wy=1,ee=class n extends ro{constructor(e){if(super({}),this._bn=void 0,hA(e))this._bn=e._bn;else{if(typeof e=="string"){let t=Ft.default.decode(e);if(t.length!=nr)throw new Error("Invalid public key input");this._bn=new qy.default(t)}else this._bn=new qy.default(e);if(this._bn.byteLength()>nr)throw new Error("Invalid public key input")}}static unique(){let e=new n(Wy);return Wy+=1,new n(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Ft.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){let e=this._bn.toArrayLike(ye.Buffer);if(e.length===nr)return e;let t=ye.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){let i=ye.Buffer.concat([e.toBuffer(),ye.Buffer.from(t),r.toBuffer()]),s=zy.sha256(i);return new n(s)}static createProgramAddressSync(e,t){let r=ye.Buffer.alloc(0);e.forEach(function(s){if(s.length>ug)throw new TypeError("Max seed length exceeded");r=ye.Buffer.concat([r,ve(s)])}),r=ye.Buffer.concat([r,t.toBuffer(),ye.Buffer.from("ProgramDerivedAddress")]);let i=zy.sha256(r);if($y(i))throw new Error("Invalid seeds, address must fall off the curve");return new n(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r=255,i;for(;r!=0;){try{let s=e.concat(ye.Buffer.from([r]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){let t=new n(e);return $y(t.toBytes())}};cg=ee;ee.default=new cg("11111111111111111111111111111111");no.set(ee,{kind:"struct",fields:[["_bn","u256"]]});var ff=class{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){let t=ve(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=ve(lA()),this._publicKey=ve(oc(this._secretKey))}get publicKey(){return new ee(this._publicKey)}get secretKey(){return ye.Buffer.concat([this._secretKey,this._publicKey],64)}},dA=new ee("BPFLoader1111111111111111111111111111111111"),Gr=1232,gc=127,io=64,so=class extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}};Object.defineProperty(so.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var oo=class extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}};Object.defineProperty(oo.prototype,"name",{value:"TransactionExpiredTimeoutError"});var Wr=class extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}};Object.defineProperty(Wr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var wi=class{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){let e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(let t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");let r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});let i=s=>{let o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}},xe=(n="publicKey")=>T.blob(32,n),pA=(n="signature")=>T.blob(64,n),bi=(n="string")=>{let e=T.struct([T.u32("length"),T.u32("lengthPadding"),T.blob(T.offset(T.u32(),-8),"chars")],n),t=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(s,o)=>t(s,o).chars.toString(),i.encode=(s,o,a)=>{let u={chars:ye.Buffer.from(s,"utf8")};return r(u,o,a)},i.alloc=s=>T.u32().span+T.u32().span+ye.Buffer.from(s,"utf8").length,i},yA=(n="authorized")=>T.struct([xe("staker"),xe("withdrawer")],n),gA=(n="lockup")=>T.struct([T.ns64("unixTimestamp"),T.ns64("epoch"),xe("custodian")],n),mA=(n="voteInit")=>T.struct([xe("nodePubkey"),xe("authorizedVoter"),xe("authorizedWithdrawer"),T.u8("commission")],n),_A=(n="voteAuthorizeWithSeedArgs")=>T.struct([T.u32("voteAuthorizationType"),xe("currentAuthorityDerivedKeyOwnerPubkey"),bi("currentAuthorityDerivedKeySeed"),xe("newAuthorized")],n);function lg(n,e){let t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){let s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return lg({layout:i},e[i.property]);return 0},r=0;return n.layout.fields.forEach(i=>{r+=t(i)}),r}function gn(n){let e=0,t=0;for(;;){let r=n.shift();if(e|=(r&127)<<t*7,t+=1,(r&128)===0)break}return e}function En(n,e){let t=e;for(;;){let r=t&127;if(t>>=7,t==0){n.push(r);break}else r|=128,n.push(r)}}function Le(n,e){if(!n)throw new Error(e||"Assertion failed")}var ac=class n{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){let r=new Map,i=o=>{let a=o.toBase58(),u=r.get(a);return u===void 0&&(u={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,u)),u},s=i(t);s.isSigner=!0,s.isWritable=!0;for(let o of e){i(o.programId).isInvoked=!0;for(let a of o.keys){let u=i(a.pubkey);u.isSigner||(u.isSigner=a.isSigner),u.isWritable||(u.isWritable=a.isWritable)}}return new n(t,r)}getMessageComponents(){let e=[...this.keyMetaMap.entries()];Le(e.length<=256,"Max static account keys length exceeded");let t=e.filter(([,u])=>u.isSigner&&u.isWritable),r=e.filter(([,u])=>u.isSigner&&!u.isWritable),i=e.filter(([,u])=>!u.isSigner&&u.isWritable),s=e.filter(([,u])=>!u.isSigner&&!u.isWritable),o={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{Le(t.length>0,"Expected at least one writable signer key");let[u]=t[0];Le(u===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let a=[...t.map(([u])=>new ee(u)),...r.map(([u])=>new ee(u)),...i.map(([u])=>new ee(u)),...s.map(([u])=>new ee(u))];return[o,a]}extractTableLookup(e){let[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(e,t){let r=new Array,i=new Array;for(let[s,o]of this.keyMetaMap.entries())if(t(o)){let a=new ee(s),u=e.findIndex(f=>f.equals(a));u>=0&&(Le(u<256,"Max lookup table index exceeded"),r.push(u),i.push(a),this.keyMetaMap.delete(s))}return[r,i]}},fg="Reached end of buffer unexpectedly";function Qn(n){if(n.length===0)throw new Error(fg);return n.shift()}function mn(n,...e){let[t]=e;if(e.length===2?t+(e[1]??0)>n.length:t>=n.length)throw new Error(fg);return n.splice(...e)}var rr=class n{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new ee(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ft.default.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new wi(this.staticAccountKeys)}static compile(e){let t=ac.compile(e.instructions,e.payerKey),[r,i]=t.getMessageComponents(),o=new wi(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Ft.default.encode(a.data)}));return new n({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){let r=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return r<s}else{let r=t-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){let e=this.accountKeys.length,t=[];En(t,e);let r=this.instructions.map(m=>{let{accounts:_,programIdIndex:g}=m,E=Array.from(Ft.default.decode(m.data)),S=[];En(S,_.length);let k=[];return En(k,E.length),{programIdIndex:g,keyIndicesCount:ye.Buffer.from(S),keyIndices:_,dataLength:ye.Buffer.from(k),data:E}}),i=[];En(i,r.length);let s=ye.Buffer.alloc(Gr);ye.Buffer.from(i).copy(s);let o=i.length;r.forEach(m=>{let g=T.struct([T.u8("programIdIndex"),T.blob(m.keyIndicesCount.length,"keyIndicesCount"),T.seq(T.u8("keyIndex"),m.keyIndices.length,"keyIndices"),T.blob(m.dataLength.length,"dataLength"),T.seq(T.u8("userdatum"),m.data.length,"data")]).encode(m,s,o);o+=g}),s=s.slice(0,o);let a=T.struct([T.blob(1,"numRequiredSignatures"),T.blob(1,"numReadonlySignedAccounts"),T.blob(1,"numReadonlyUnsignedAccounts"),T.blob(t.length,"keyCount"),T.seq(xe("key"),e,"keys"),xe("recentBlockhash")]),u={numRequiredSignatures:ye.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ye.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ye.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ye.Buffer.from(t),keys:this.accountKeys.map(m=>ve(m.toBytes())),recentBlockhash:Ft.default.decode(this.recentBlockhash)},f=ye.Buffer.alloc(2048),d=a.encode(u,f);return s.copy(f,d),f.slice(0,d+s.length)}static from(e){let t=[...e],r=Qn(t);if(r!==(r&gc))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let i=Qn(t),s=Qn(t),o=gn(t),a=[];for(let _=0;_<o;_++){let g=mn(t,0,nr);a.push(new ee(ye.Buffer.from(g)))}let u=mn(t,0,nr),f=gn(t),d=[];for(let _=0;_<f;_++){let g=Qn(t),E=gn(t),S=mn(t,0,E),k=gn(t),O=mn(t,0,k),L=Ft.default.encode(ye.Buffer.from(O));d.push({programIdIndex:g,accounts:S,data:L})}let m={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Ft.default.encode(ye.Buffer.from(u)),accountKeys:a,instructions:d};return new n(m)}},ns=class n{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(let t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new wi(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){let i=e-r,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){let i=e-t,o=r-t-this.header.numReadonlyUnsignedAccounts;return i<o}else{let i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){let t={writable:[],readonly:[]};for(let r of this.addressTableLookups){let i=e.find(s=>s.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(let s of r.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(let s of r.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return t}static compile(e){let t=ac.compile(e.instructions,e.payerKey),r=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(let d of s){let m=t.extractTableLookup(d);if(m!==void 0){let[_,{writable:g,readonly:E}]=m;r.push(_),i.writable.push(...g),i.readonly.push(...E)}}let[o,a]=t.getMessageComponents(),f=new wi(a,i).compileInstructions(e.instructions);return new n({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:f,addressTableLookups:r})}serialize(){let e=Array();En(e,this.staticAccountKeys.length);let t=this.serializeInstructions(),r=Array();En(r,this.compiledInstructions.length);let i=this.serializeAddressTableLookups(),s=Array();En(s,this.addressTableLookups.length);let o=T.struct([T.u8("prefix"),T.struct([T.u8("numRequiredSignatures"),T.u8("numReadonlySignedAccounts"),T.u8("numReadonlyUnsignedAccounts")],"header"),T.blob(e.length,"staticAccountKeysLength"),T.seq(xe(),this.staticAccountKeys.length,"staticAccountKeys"),xe("recentBlockhash"),T.blob(r.length,"instructionsLength"),T.blob(t.length,"serializedInstructions"),T.blob(s.length,"addressTableLookupsLength"),T.blob(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(Gr),f=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(d=>d.toBytes()),recentBlockhash:Ft.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,f)}serializeInstructions(){let e=0,t=new Uint8Array(Gr);for(let r of this.compiledInstructions){let i=Array();En(i,r.accountKeyIndexes.length);let s=Array();En(s,r.data.length);let o=T.struct([T.u8("programIdIndex"),T.blob(i.length,"encodedAccountKeyIndexesLength"),T.seq(T.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),T.blob(s.length,"encodedDataLength"),T.blob(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0,t=new Uint8Array(Gr);for(let r of this.addressTableLookups){let i=Array();En(i,r.writableIndexes.length);let s=Array();En(s,r.readonlyIndexes.length);let o=T.struct([xe("accountKey"),T.blob(i.length,"encodedWritableIndexesLength"),T.seq(T.u8(),r.writableIndexes.length,"writableIndexes"),T.blob(s.length,"encodedReadonlyIndexesLength"),T.seq(T.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e],r=Qn(t),i=r&gc;Le(r!==i,"Expected versioned message but received legacy message");let s=i;Le(s===0,`Expected versioned message with version 0 but found version ${s}`);let o={numRequiredSignatures:Qn(t),numReadonlySignedAccounts:Qn(t),numReadonlyUnsignedAccounts:Qn(t)},a=[],u=gn(t);for(let E=0;E<u;E++)a.push(new ee(mn(t,0,nr)));let f=Ft.default.encode(mn(t,0,nr)),d=gn(t),m=[];for(let E=0;E<d;E++){let S=Qn(t),k=gn(t),O=mn(t,0,k),L=gn(t),M=new Uint8Array(mn(t,0,L));m.push({programIdIndex:S,accountKeyIndexes:O,data:M})}let _=gn(t),g=[];for(let E=0;E<_;E++){let S=new ee(mn(t,0,nr)),k=gn(t),O=mn(t,0,k),L=gn(t),M=mn(t,0,L);g.push({accountKey:S,writableIndexes:O,readonlyIndexes:M})}return new n({header:o,staticAccountKeys:a,recentBlockhash:f,compiledInstructions:m,addressTableLookups:g})}},Bf={deserializeMessageVersion(n){let e=n[0],t=e&gc;return t===e?"legacy":t},deserialize:n=>{let e=Bf.deserializeMessageVersion(n);if(e==="legacy")return rr.from(n);if(e===0)return ns.deserialize(n);throw new Error(`Transaction message version ${e} deserialization is not supported`)}},wr=(function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n})({}),bA=ye.Buffer.alloc(io).fill(0),Ke=class{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ye.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}},Fe=class n{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){let{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){let{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{let{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new Ke(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let S=0;S<t.length;S++)if(t[S].programId===void 0)throw new Error(`Transaction instruction index ${S} has undefined program id`);let i=[],s=[];t.forEach(S=>{S.keys.forEach(O=>{s.push({...O})});let k=S.programId.toString();i.includes(k)||i.push(k)}),i.forEach(S=>{s.push({pubkey:new ee(S),isSigner:!1,isWritable:!1})});let o=[];s.forEach(S=>{let k=S.pubkey.toString(),O=o.findIndex(L=>L.pubkey.toString()===k);O>-1?(o[O].isWritable=o[O].isWritable||S.isWritable,o[O].isSigner=o[O].isSigner||S.isSigner):o.push(S)}),o.sort(function(S,k){if(S.isSigner!==k.isSigner)return S.isSigner?-1:1;if(S.isWritable!==k.isWritable)return S.isWritable?-1:1;let O={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return S.pubkey.toBase58().localeCompare(k.pubkey.toBase58(),"en",O)});let a=o.findIndex(S=>S.pubkey.equals(r));if(a>-1){let[S]=o.splice(a,1);S.isSigner=!0,S.isWritable=!0,o.unshift(S)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(let S of this.signatures){let k=o.findIndex(O=>O.pubkey.equals(S.publicKey));if(k>-1)o[k].isSigner||(o[k].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${S.publicKey.toString()}`)}let u=0,f=0,d=0,m=[],_=[];o.forEach(({pubkey:S,isSigner:k,isWritable:O})=>{k?(m.push(S.toString()),u+=1,O||(f+=1)):(_.push(S.toString()),O||(d+=1))});let g=m.concat(_),E=t.map(S=>{let{data:k,programId:O}=S;return{programIdIndex:g.indexOf(O.toString()),accounts:S.keys.map(L=>g.indexOf(L.pubkey.toString())),data:Ft.default.encode(k)}});return E.forEach(S=>{Le(S.programIdIndex>=0),S.accounts.forEach(k=>Le(k>=0))}),new rr({header:{numRequiredSignatures:u,numReadonlySignedAccounts:f,numReadonlyUnsignedAccounts:d},accountKeys:g,recentBlockhash:e,instructions:E})}_compile(){let e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");let t=new Set;this.signatures=e.filter(r=>{let i=r.toString();return t.has(i)?!1:(t.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");let t=new Set,r=[];for(let s of e){let o=s.publicKey.toString();t.has(o)||(t.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));let i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");let t=new Set,r=[];for(let s of e){let o=s.publicKey.toString();t.has(o)||(t.add(o),r.push(s))}let i=this._compile();this._partialSign(i,...r)}_partialSign(e,...t){let r=e.serialize();t.forEach(i=>{let s=Nf(r,i.secretKey);this._addSignature(i.publicKey,ve(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Le(t.length===64);let r=this.signatures.findIndex(i=>e.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=ye.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){let r={};for(let{signature:i,publicKey:s}of this.signatures)i===null?t&&(r.missing||(r.missing=[])).push(s):fA(i,e,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(e){let{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){let s=this._getMessageSignednessErrors(i,t);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){let{signatures:t}=this,r=[];En(r,t.length);let i=r.length+t.length*64+e.length,s=ye.Buffer.alloc(i);return Le(t.length<256),ye.Buffer.from(r).copy(s,0),t.forEach(({signature:o},a)=>{o!==null&&(Le(o.length===64,"signature has invalid length"),ye.Buffer.from(o).copy(s,r.length+a*64))}),e.copy(s,r.length+t.length*64),Le(s.length<=Gr,`Transaction too large: ${s.length} > ${Gr}`),s}get keys(){return Le(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Le(this.instructions.length===1),this.instructions[0].programId}get data(){return Le(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e],r=gn(t),i=[];for(let s=0;s<r;s++){let o=mn(t,0,io);i.push(Ft.default.encode(ye.Buffer.from(o)))}return n.populate(rr.from(t),i)}static populate(e,t=[]){let r=new n;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{let o={signature:i==Ft.default.encode(bA)?null:Ft.default.decode(i),publicKey:e.accountKeys[s]};r.signatures.push(o)}),e.instructions.forEach(i=>{let s=i.accounts.map(o=>{let a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(u=>u.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new Ke({keys:s,programId:e.accountKeys[i.programIdIndex],data:Ft.default.decode(i.data)}))}),r._message=e,r._json=r.toJSON(),r}},hf=class n{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){let{header:r,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:u}=r,f=o-a;Le(f>0,"Message header is invalid");let d=e.staticAccountKeys.length-o-u;Le(d>=0,"Message header is invalid");let m=e.getAccountKeys(t),_=m.get(0);if(_===void 0)throw new Error("Failed to decompile message because no account keys were found");let g=[];for(let E of i){let S=[];for(let O of E.accountKeyIndexes){let L=m.get(O);if(L===void 0)throw new Error(`Failed to find key for account key index ${O}`);let M=O<o,C;M?C=O<f:O<m.staticAccountKeys.length?C=O-o<d:C=O-m.staticAccountKeys.length<m.accountKeysFromLookups.writable.length,S.push({pubkey:L,isSigner:O<r.numRequiredSignatures,isWritable:C})}let k=m.get(E.programIdIndex);if(k===void 0)throw new Error(`Failed to find program id for program id index ${E.programIdIndex}`);g.push(new Ke({programId:k,data:ve(E.data),keys:S}))}return new n({payerKey:_,instructions:g,recentBlockhash:s})}compileToLegacyMessage(){return rr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return ns.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}},df=class n{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)Le(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{let r=[];for(let i=0;i<e.header.numRequiredSignatures;i++)r.push(new Uint8Array(io));this.signatures=r}this.message=e}serialize(){let e=this.message.serialize(),t=Array();En(t,this.signatures.length);let r=T.struct([T.blob(t.length,"encodedSignaturesLength"),T.seq(pA(),this.signatures.length,"signatures"),T.blob(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e],r=[],i=gn(t);for(let o=0;o<i;o++)r.push(new Uint8Array(mn(t,0,io)));let s=Bf.deserialize(new Uint8Array(t));return new n(s,r)}sign(e){let t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let i of e){let s=r.findIndex(o=>o.equals(i.publicKey));Le(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=Nf(t,i.secretKey)}}addSignature(e,t){Le(t.byteLength===64,"Signature must be 64 bytes long");let i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));Le(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}},wA=160,EA=64,AA=wA/EA,hg=1e3/AA,Jn=new ee("SysvarC1ock11111111111111111111111111111111"),RA=new ee("SysvarEpochSchedu1e111111111111111111111111"),vA=new ee("Sysvar1nstructions1111111111111111111111111"),ic=new ee("SysvarRecentB1ockHashes11111111111111111111"),rs=new ee("SysvarRent111111111111111111111111111111111"),xA=new ee("SysvarRewards111111111111111111111111111111"),SA=new ee("SysvarS1otHashes111111111111111111111111111"),IA=new ee("SysvarS1otHistory11111111111111111111111111"),sc=new ee("SysvarStakeHistory1111111111111111111111111"),Ei=class extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:i}){let s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.",a;switch(e){case"send":a=`Transaction ${t} resulted in an error. 
${r}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+s+o;break;default:a=`Unknown action '${(u=>u)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){let s=i.meta.logMessages;this.transactionLogs=s,t(s)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}},kA={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},oe=class extends Error{constructor({code:e,message:t,data:r},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}};async function pf(n,e,t,r){let i=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},s=await n.sendTransaction(e,t,i),o;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)o=(await n.confirmTransaction({abortSignal:r?.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},r&&r.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){let{nonceInstruction:a}=e.nonceInfo,u=a.keys[0].pubkey;o=(await n.confirmTransaction({abortSignal:r?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:u,nonceValue:e.nonceInfo.nonce,signature:s},r&&r.commitment)).value}else r?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await n.confirmTransaction(s,r&&r.commitment)).value;if(o.err)throw s!=null?new Ei({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${s} failed (${JSON.stringify(o)})`);return s}function _i(n){return new Promise(e=>setTimeout(e,n))}function Oe(n,e){let t=n.layout.span>=0?n.layout.span:lg(n,e),r=ye.Buffer.alloc(t),i=Object.assign({instruction:n.index},e);return n.layout.encode(i,r),r}function ze(n,e){let t;try{t=n.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.instruction!==n.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${n.index}`);return t}var dg=T.nu64("lamportsPerSignature"),pg=T.struct([T.u32("version"),T.u32("state"),xe("authorizedPubkey"),xe("nonce"),T.struct([dg],"feeCalculator")]),yf=pg.span,cc=class n{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){let t=pg.decode(ve(e),0);return new n({authorizedPubkey:new ee(t.authorizedPubkey),nonce:new ee(t.nonce).toString(),feeCalculator:t.feeCalculator})}},TA=n=>{let e=n.decode.bind(n),t=n.encode.bind(n);return{decode:e,encode:t}},OA=n=>e=>{let t=ag.blob(n,e),{encode:r,decode:i}=TA(t),s=t;return s.decode=(o,a)=>{let u=i(o,a);return uf.toBigIntLE(ye.Buffer.from(u))},s.encode=(o,a,u)=>{let f=uf.toBufferLE(o,n);return r(f,a,u)},s},is=OA(8),gf=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let r=T.u32("instruction").decode(e.data),i;for(let[s,o]of Object.entries(je))if(o.index==r){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{lamports:t,space:r,programId:i}=ze(je.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:r,programId:new ee(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{lamports:t}=ze(je.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:t,seed:r,programId:i}=ze(je.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:r,programId:new ee(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{space:t}=ze(je.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{base:t,seed:r,space:i,programId:s}=ze(je.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new ee(t),seed:r,space:i,programId:new ee(s)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{programId:t}=ze(je.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new ee(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{base:t,seed:r,programId:i}=ze(je.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new ee(t),seed:r,programId:new ee(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{base:t,seed:r,lamports:i,space:s,programId:o}=ze(je.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new ee(t),seed:r,lamports:i,space:s,programId:new ee(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{authorized:t}=ze(je.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new ee(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ze(je.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);let{lamports:t}=ze(je.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{authorized:t}=ze(je.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new ee(t)}}static checkProgramId(e){if(!e.equals(Kt.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}},je=Object.freeze({Create:{index:0,layout:T.struct([T.u32("instruction"),T.ns64("lamports"),T.ns64("space"),xe("programId")])},Assign:{index:1,layout:T.struct([T.u32("instruction"),xe("programId")])},Transfer:{index:2,layout:T.struct([T.u32("instruction"),is("lamports")])},CreateWithSeed:{index:3,layout:T.struct([T.u32("instruction"),xe("base"),bi("seed"),T.ns64("lamports"),T.ns64("space"),xe("programId")])},AdvanceNonceAccount:{index:4,layout:T.struct([T.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:T.struct([T.u32("instruction"),T.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:T.struct([T.u32("instruction"),xe("authorized")])},AuthorizeNonceAccount:{index:7,layout:T.struct([T.u32("instruction"),xe("authorized")])},Allocate:{index:8,layout:T.struct([T.u32("instruction"),T.ns64("space")])},AllocateWithSeed:{index:9,layout:T.struct([T.u32("instruction"),xe("base"),bi("seed"),T.ns64("space"),xe("programId")])},AssignWithSeed:{index:10,layout:T.struct([T.u32("instruction"),xe("base"),bi("seed"),xe("programId")])},TransferWithSeed:{index:11,layout:T.struct([T.u32("instruction"),is("lamports"),bi("seed"),xe("programId")])},UpgradeNonceAccount:{index:12,layout:T.struct([T.u32("instruction")])}}),Kt=class n{constructor(){}static createAccount(e){let t=je.Create,r=Oe(t,{lamports:e.lamports,space:e.space,programId:ve(e.programId.toBuffer())});return new Ke({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let t,r;if("basePubkey"in e){let i=je.TransferWithSeed;t=Oe(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:ve(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{let i=je.Transfer;t=Oe(i,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Ke({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;if("basePubkey"in e){let i=je.AssignWithSeed;t=Oe(i,{base:ve(e.basePubkey.toBuffer()),seed:e.seed,programId:ve(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=je.Assign;t=Oe(i,{programId:ve(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ke({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){let t=je.CreateWithSeed,r=Oe(t,{base:ve(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:ve(e.programId.toBuffer())}),i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Ke({keys:i,programId:this.programId,data:r})}static createNonceAccount(e){let t=new Fe;"basePubkey"in e&&"seed"in e?t.add(n.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:yf,programId:this.programId})):t.add(n.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:yf,programId:this.programId}));let r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){let t=je.InitializeNonceAccount,r=Oe(t,{authorized:ve(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:ic,isSigner:!1,isWritable:!1},{pubkey:rs,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Ke(i)}static nonceAdvance(e){let t=je.AdvanceNonceAccount,r=Oe(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:ic,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Ke(i)}static nonceWithdraw(e){let t=je.WithdrawNonceAccount,r=Oe(t,{lamports:e.lamports});return new Ke({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:ic,isSigner:!1,isWritable:!1},{pubkey:rs,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){let t=je.AuthorizeNonceAccount,r=Oe(t,{authorized:ve(e.newAuthorizedPubkey.toBuffer())});return new Ke({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let t,r;if("basePubkey"in e){let i=je.AllocateWithSeed;t=Oe(i,{base:ve(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:ve(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=je.Allocate;t=Oe(i,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ke({keys:r,programId:this.programId,data:t})}};Kt.programId=new ee("11111111111111111111111111111111");var NA=Gr-300,ss=class n{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/n.chunkSize)+1+1)}static async load(e,t,r,i,s){{let m=await e.getMinimumBalanceForRentExemption(s.length),_=await e.getAccountInfo(r.publicKey,"confirmed"),g=null;if(_!==null){if(_.executable)return console.error("Program load failed, account is already executable"),!1;_.data.length!==s.length&&(g=g||new Fe,g.add(Kt.allocate({accountPubkey:r.publicKey,space:s.length}))),_.owner.equals(i)||(g=g||new Fe,g.add(Kt.assign({accountPubkey:r.publicKey,programId:i}))),_.lamports<m&&(g=g||new Fe,g.add(Kt.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:m-_.lamports})))}else g=new Fe().add(Kt.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:m>0?m:1,space:s.length,programId:i}));g!==null&&await pf(e,g,[t,r],{commitment:"confirmed"})}let o=T.struct([T.u32("instruction"),T.u32("offset"),T.u32("bytesLength"),T.u32("bytesLengthPadding"),T.seq(T.u8("byte"),T.offset(T.u32(),-8),"bytes")]),a=n.chunkSize,u=0,f=s,d=[];for(;f.length>0;){let m=f.slice(0,a),_=ye.Buffer.alloc(a+16);o.encode({instruction:0,offset:u,bytes:m,bytesLength:0,bytesLengthPadding:0},_);let g=new Fe().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:_});d.push(pf(e,g,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await _i(1e3/4),u+=a,f=f.slice(a)}await Promise.all(d);{let m=T.struct([T.u32("instruction")]),_=ye.Buffer.alloc(m.span);m.encode({instruction:1},_);let g=new Fe().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:rs,isSigner:!1,isWritable:!1}],programId:i,data:_}),E="processed",S=await e.sendTransaction(g,[t,r],{preflightCommitment:E}),{context:k,value:O}=await e.confirmTransaction({signature:S,lastValidBlockHeight:g.lastValidBlockHeight,blockhash:g.recentBlockhash},E);if(O.err)throw new Error(`Transaction ${S} failed (${JSON.stringify(O)})`);for(;;){try{if(await e.getSlot({commitment:E})>k.slot)break}catch{}await new Promise(L=>setTimeout(L,Math.round(hg/2)))}}return!0}};ss.chunkSize=NA;var BA=new ee("BPFLoader2111111111111111111111111111111111"),mf=class{static getMinNumSignatures(e){return ss.getMinNumSignatures(e)}static load(e,t,r,i,s){return ss.load(e,t,r,s,i)}};function CA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var MA=Object.prototype.toString,LA=Object.keys||function(n){var e=[];for(var t in n)e.push(t);return e};function to(n,e){var t,r,i,s,o,a,u;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return to(n.toJSON(),e);if(u=MA.call(n),u==="[object Array]"){for(i="[",r=n.length-1,t=0;t<r;t++)i+=to(n[t],!0)+",";return r>-1&&(i+=to(n[t],!0)),i+"]"}else if(u==="[object Object]"){for(s=LA(n).sort(),r=s.length,i="",t=0;t<r;)o=s[t],a=to(n[o],!1),a!==void 0&&(i&&(i+=","),i+=JSON.stringify(o)+":"+a),t++;return"{"+i+"}"}else return JSON.stringify(n);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}var PA=function(n){var e=to(n,!1);if(e!==void 0)return""+e},Gy=CA(PA),eo=32;function rf(n){let e=0;for(;n>1;)n/=2,e++;return e}function UA(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}var uc=class{constructor(e,t,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){let t=rf(UA(e+eo+1))-rf(eo)-1,r=this.getSlotsInEpoch(t),i=e-(r-eo);return[t,i]}else{let t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*eo:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+rf(eo)):this.slotsPerEpoch}},DA=globalThis.fetch,_f=class extends Fy.CommonClient{constructor(e,t,r){let i=s=>{let o=Fy.WebSocket(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,t,r),this.underlyingSocket=void 0}call(...e){let t=this.underlyingSocket?.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){let t=this.underlyingSocket?.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}};function HA(n,e){let t;try{t=n.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${n.index}`);return t}var jy=56,ao=class{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){let e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){let t=HA(zA,e),r=e.length-jy;Le(r>=0,"lookup table is invalid"),Le(r%32===0,"lookup table is invalid");let i=r/32,{addresses:s}=T.struct([T.seq(xe(),i,"addresses")]).decode(e.slice(jy));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new ee(t.authority[0]):void 0,addresses:s.map(o=>new ee(o))}}},zA={index:1,layout:T.struct([T.u32("typeIndex"),is("deactivationSlot"),T.nu64("lastExtendedSlot"),T.u8("lastExtendedStartIndex"),T.u8(),T.seq(xe(),T.offset(T.u8(),-1),"authority")])},FA=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function KA(n){let e=n.match(FA);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);let[t,r,i,s]=e,o=n.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),u=a==null?"":`:${a+1}`;return`${o}//${r}${u}${s}`}var nt=l.coerce(l.instance(ee),l.string(),n=>new ee(n)),yg=l.tuple([l.string(),l.literal("base64")]),Cf=l.coerce(l.instance(ye.Buffer),yg,n=>ye.Buffer.from(n[0],"base64")),gg=30*1e3;function qA(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function Ge(n){let e,t;if(typeof n=="string")e=n;else if(n){let{commitment:r,...i}=n;e=r,t=i}return{commitment:e,config:t}}function Zy(n){return n.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function mg(n){return l.union([l.type({jsonrpc:l.literal("2.0"),id:l.string(),result:n}),l.type({jsonrpc:l.literal("2.0"),id:l.string(),error:l.type({code:l.unknown(),message:l.string(),data:l.optional(l.any())})})])}var VA=mg(l.unknown());function Re(n){return l.coerce(mg(n),VA,e=>"error"in e?e:{...e,result:l.create(e.result,n)})}function lt(n){return Re(l.type({context:l.type({slot:l.number()}),value:n}))}function mc(n){return l.type({context:l.type({slot:l.number()}),value:n})}function sf(n,e){return n===0?new ns({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new ee(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Ft.default.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new rr(e)}var $A=l.type({foundation:l.number(),foundationTerm:l.number(),initial:l.number(),taper:l.number(),terminal:l.number()}),WA=Re(l.array(l.nullable(l.type({epoch:l.number(),effectiveSlot:l.number(),amount:l.number(),postBalance:l.number(),commission:l.optional(l.nullable(l.number()))})))),GA=l.array(l.type({slot:l.number(),prioritizationFee:l.number()})),jA=l.type({total:l.number(),validator:l.number(),foundation:l.number(),epoch:l.number()}),ZA=l.type({epoch:l.number(),slotIndex:l.number(),slotsInEpoch:l.number(),absoluteSlot:l.number(),blockHeight:l.optional(l.number()),transactionCount:l.optional(l.number())}),YA=l.type({slotsPerEpoch:l.number(),leaderScheduleSlotOffset:l.number(),warmup:l.boolean(),firstNormalEpoch:l.number(),firstNormalSlot:l.number()}),XA=l.record(l.string(),l.array(l.number())),Ri=l.nullable(l.union([l.type({}),l.string()])),JA=l.type({err:Ri}),QA=l.literal("receivedSignature"),eR=l.type({"solana-core":l.string(),"feature-set":l.optional(l.number())}),tR=l.type({program:l.string(),programId:nt,parsed:l.unknown()}),nR=l.type({programId:nt,accounts:l.array(nt),data:l.string()}),Yy=lt(l.type({err:l.nullable(l.union([l.type({}),l.string()])),logs:l.nullable(l.array(l.string())),accounts:l.optional(l.nullable(l.array(l.nullable(l.type({executable:l.boolean(),owner:l.string(),lamports:l.number(),data:l.array(l.string()),rentEpoch:l.optional(l.number())}))))),unitsConsumed:l.optional(l.number()),returnData:l.optional(l.nullable(l.type({programId:l.string(),data:l.tuple([l.string(),l.literal("base64")])}))),innerInstructions:l.optional(l.nullable(l.array(l.type({index:l.number(),instructions:l.array(l.union([tR,nR]))}))))})),rR=lt(l.type({byIdentity:l.record(l.string(),l.array(l.number())),range:l.type({firstSlot:l.number(),lastSlot:l.number()})}));function iR(n,e,t,r,i,s){let o=t||DA,a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let u;return r&&(u=async(d,m)=>{let _=await new Promise((g,E)=>{try{r(d,m,(S,k)=>g([S,k]))}catch(S){E(S)}});return await o(..._)}),new uA.default(async(d,m)=>{let _={method:"POST",body:d,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},sv)};try{let g=5,E,S=500;for(;u?E=await u(n,_):E=await o(n,_),!(E.status!==429||i===!0||(g-=1,g===0));)console.error(`Server responded with ${E.status} ${E.statusText}.  Retrying after ${S}ms delay...`),await _i(S),S*=2;let k=await E.text();E.ok?m(null,k):m(new Error(`${E.status} ${E.statusText}: ${k}`))}catch(g){g instanceof Error&&m(g)}},{})}function sR(n){return(e,t)=>new Promise((r,i)=>{n.request(e,t,(s,o)=>{if(s){i(s);return}r(o)})})}function oR(n){return e=>new Promise((t,r)=>{e.length===0&&t([]);let i=e.map(s=>n.request(s.methodName,s.args));n.request(i,(s,o)=>{if(s){r(s);return}t(o)})})}var aR=Re($A),cR=Re(jA),uR=Re(GA),lR=Re(ZA),fR=Re(YA),hR=Re(XA),dR=Re(l.number()),pR=lt(l.type({total:l.number(),circulating:l.number(),nonCirculating:l.number(),nonCirculatingAccounts:l.array(nt)})),bf=l.type({amount:l.string(),uiAmount:l.nullable(l.number()),decimals:l.number(),uiAmountString:l.optional(l.string())}),yR=lt(l.array(l.type({address:nt,amount:l.string(),uiAmount:l.nullable(l.number()),decimals:l.number(),uiAmountString:l.optional(l.string())}))),gR=lt(l.array(l.type({pubkey:nt,account:l.type({executable:l.boolean(),owner:nt,lamports:l.number(),data:Cf,rentEpoch:l.number()})}))),wf=l.type({program:l.string(),parsed:l.unknown(),space:l.number()}),mR=lt(l.array(l.type({pubkey:nt,account:l.type({executable:l.boolean(),owner:nt,lamports:l.number(),data:wf,rentEpoch:l.number()})}))),_R=lt(l.array(l.type({lamports:l.number(),address:nt}))),co=l.type({executable:l.boolean(),owner:nt,lamports:l.number(),data:Cf,rentEpoch:l.number()}),bR=l.type({pubkey:nt,account:co}),wR=l.coerce(l.union([l.instance(ye.Buffer),wf]),l.union([yg,wf]),n=>Array.isArray(n)?l.create(n,Cf):n),Ef=l.type({executable:l.boolean(),owner:nt,lamports:l.number(),data:wR,rentEpoch:l.number()}),ER=l.type({pubkey:nt,account:Ef}),AR=l.type({state:l.union([l.literal("active"),l.literal("inactive"),l.literal("activating"),l.literal("deactivating")]),active:l.number(),inactive:l.number()}),RR=Re(l.array(l.type({signature:l.string(),slot:l.number(),err:Ri,memo:l.nullable(l.string()),blockTime:l.optional(l.nullable(l.number()))}))),vR=Re(l.array(l.type({signature:l.string(),slot:l.number(),err:Ri,memo:l.nullable(l.string()),blockTime:l.optional(l.nullable(l.number()))}))),xR=l.type({subscription:l.number(),result:mc(co)}),SR=l.type({pubkey:nt,account:co}),IR=l.type({subscription:l.number(),result:mc(SR)}),kR=l.type({parent:l.number(),slot:l.number(),root:l.number()}),TR=l.type({subscription:l.number(),result:kR}),OR=l.union([l.type({type:l.union([l.literal("firstShredReceived"),l.literal("completed"),l.literal("optimisticConfirmation"),l.literal("root")]),slot:l.number(),timestamp:l.number()}),l.type({type:l.literal("createdBank"),parent:l.number(),slot:l.number(),timestamp:l.number()}),l.type({type:l.literal("frozen"),slot:l.number(),timestamp:l.number(),stats:l.type({numTransactionEntries:l.number(),numSuccessfulTransactions:l.number(),numFailedTransactions:l.number(),maxTransactionsPerEntry:l.number()})}),l.type({type:l.literal("dead"),slot:l.number(),timestamp:l.number(),err:l.string()})]),NR=l.type({subscription:l.number(),result:OR}),BR=l.type({subscription:l.number(),result:mc(l.union([JA,QA]))}),CR=l.type({subscription:l.number(),result:l.number()}),MR=l.type({pubkey:l.string(),gossip:l.nullable(l.string()),tpu:l.nullable(l.string()),rpc:l.nullable(l.string()),version:l.nullable(l.string())}),Xy=l.type({votePubkey:l.string(),nodePubkey:l.string(),activatedStake:l.number(),epochVoteAccount:l.boolean(),epochCredits:l.array(l.tuple([l.number(),l.number(),l.number()])),commission:l.number(),lastVote:l.number(),rootSlot:l.nullable(l.number())}),LR=Re(l.type({current:l.array(Xy),delinquent:l.array(Xy)})),PR=l.union([l.literal("processed"),l.literal("confirmed"),l.literal("finalized")]),UR=l.type({slot:l.number(),confirmations:l.nullable(l.number()),err:Ri,confirmationStatus:l.optional(PR)}),DR=lt(l.array(l.nullable(UR))),HR=Re(l.number()),_g=l.type({accountKey:nt,writableIndexes:l.array(l.number()),readonlyIndexes:l.array(l.number())}),Mf=l.type({signatures:l.array(l.string()),message:l.type({accountKeys:l.array(l.string()),header:l.type({numRequiredSignatures:l.number(),numReadonlySignedAccounts:l.number(),numReadonlyUnsignedAccounts:l.number()}),instructions:l.array(l.type({accounts:l.array(l.number()),data:l.string(),programIdIndex:l.number()})),recentBlockhash:l.string(),addressTableLookups:l.optional(l.array(_g))})}),bg=l.type({pubkey:nt,signer:l.boolean(),writable:l.boolean(),source:l.optional(l.union([l.literal("transaction"),l.literal("lookupTable")]))}),wg=l.type({accountKeys:l.array(bg),signatures:l.array(l.string())}),Eg=l.type({parsed:l.unknown(),program:l.string(),programId:nt}),Ag=l.type({accounts:l.array(nt),data:l.string(),programId:nt}),zR=l.union([Ag,Eg]),FR=l.union([l.type({parsed:l.unknown(),program:l.string(),programId:l.string()}),l.type({accounts:l.array(l.string()),data:l.string(),programId:l.string()})]),Rg=l.coerce(zR,FR,n=>"accounts"in n?l.create(n,Ag):l.create(n,Eg)),vg=l.type({signatures:l.array(l.string()),message:l.type({accountKeys:l.array(bg),instructions:l.array(Rg),recentBlockhash:l.string(),addressTableLookups:l.optional(l.nullable(l.array(_g)))})}),lc=l.type({accountIndex:l.number(),mint:l.string(),owner:l.optional(l.string()),uiTokenAmount:bf}),xg=l.type({writable:l.array(nt),readonly:l.array(nt)}),_c=l.type({err:Ri,fee:l.number(),innerInstructions:l.optional(l.nullable(l.array(l.type({index:l.number(),instructions:l.array(l.type({accounts:l.array(l.number()),data:l.string(),programIdIndex:l.number()}))})))),preBalances:l.array(l.number()),postBalances:l.array(l.number()),logMessages:l.optional(l.nullable(l.array(l.string()))),preTokenBalances:l.optional(l.nullable(l.array(lc))),postTokenBalances:l.optional(l.nullable(l.array(lc))),loadedAddresses:l.optional(xg),computeUnitsConsumed:l.optional(l.number())}),Lf=l.type({err:Ri,fee:l.number(),innerInstructions:l.optional(l.nullable(l.array(l.type({index:l.number(),instructions:l.array(Rg)})))),preBalances:l.array(l.number()),postBalances:l.array(l.number()),logMessages:l.optional(l.nullable(l.array(l.string()))),preTokenBalances:l.optional(l.nullable(l.array(lc))),postTokenBalances:l.optional(l.nullable(l.array(lc))),loadedAddresses:l.optional(xg),computeUnitsConsumed:l.optional(l.number())}),us=l.union([l.literal(0),l.literal("legacy")]),vi=l.type({pubkey:l.string(),lamports:l.number(),postBalance:l.nullable(l.number()),rewardType:l.nullable(l.string()),commission:l.optional(l.nullable(l.number()))}),KR=Re(l.nullable(l.type({blockhash:l.string(),previousBlockhash:l.string(),parentSlot:l.number(),transactions:l.array(l.type({transaction:Mf,meta:l.nullable(_c),version:l.optional(us)})),rewards:l.optional(l.array(vi)),blockTime:l.nullable(l.number()),blockHeight:l.nullable(l.number())}))),qR=Re(l.nullable(l.type({blockhash:l.string(),previousBlockhash:l.string(),parentSlot:l.number(),rewards:l.optional(l.array(vi)),blockTime:l.nullable(l.number()),blockHeight:l.nullable(l.number())}))),VR=Re(l.nullable(l.type({blockhash:l.string(),previousBlockhash:l.string(),parentSlot:l.number(),transactions:l.array(l.type({transaction:wg,meta:l.nullable(_c),version:l.optional(us)})),rewards:l.optional(l.array(vi)),blockTime:l.nullable(l.number()),blockHeight:l.nullable(l.number())}))),$R=Re(l.nullable(l.type({blockhash:l.string(),previousBlockhash:l.string(),parentSlot:l.number(),transactions:l.array(l.type({transaction:vg,meta:l.nullable(Lf),version:l.optional(us)})),rewards:l.optional(l.array(vi)),blockTime:l.nullable(l.number()),blockHeight:l.nullable(l.number())}))),WR=Re(l.nullable(l.type({blockhash:l.string(),previousBlockhash:l.string(),parentSlot:l.number(),transactions:l.array(l.type({transaction:wg,meta:l.nullable(Lf),version:l.optional(us)})),rewards:l.optional(l.array(vi)),blockTime:l.nullable(l.number()),blockHeight:l.nullable(l.number())}))),GR=Re(l.nullable(l.type({blockhash:l.string(),previousBlockhash:l.string(),parentSlot:l.number(),rewards:l.optional(l.array(vi)),blockTime:l.nullable(l.number()),blockHeight:l.nullable(l.number())}))),jR=Re(l.nullable(l.type({blockhash:l.string(),previousBlockhash:l.string(),parentSlot:l.number(),transactions:l.array(l.type({transaction:Mf,meta:l.nullable(_c)})),rewards:l.optional(l.array(vi)),blockTime:l.nullable(l.number())}))),Jy=Re(l.nullable(l.type({blockhash:l.string(),previousBlockhash:l.string(),parentSlot:l.number(),signatures:l.array(l.string()),blockTime:l.nullable(l.number())}))),of=Re(l.nullable(l.type({slot:l.number(),meta:l.nullable(_c),blockTime:l.optional(l.nullable(l.number())),transaction:Mf,version:l.optional(us)}))),rc=Re(l.nullable(l.type({slot:l.number(),transaction:vg,meta:l.nullable(Lf),blockTime:l.optional(l.nullable(l.number())),version:l.optional(us)}))),ZR=lt(l.type({blockhash:l.string(),feeCalculator:l.type({lamportsPerSignature:l.number()})})),YR=lt(l.type({blockhash:l.string(),lastValidBlockHeight:l.number()})),XR=lt(l.boolean()),JR=l.type({slot:l.number(),numTransactions:l.number(),numSlots:l.number(),samplePeriodSecs:l.number()}),QR=Re(l.array(JR)),ev=lt(l.nullable(l.type({feeCalculator:l.type({lamportsPerSignature:l.number()})}))),tv=Re(l.string()),nv=Re(l.string()),rv=l.type({err:Ri,logs:l.array(l.string()),signature:l.string()}),iv=l.type({result:mc(rv),subscription:l.number()}),sv={"solana-client":"js/1.0.0-maintenance"},Af=class{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{let f={};return async d=>{let{commitment:m,config:_}=Ge(d),g=this._buildArgs([],m,void 0,_),E=Gy(g);return f[E]=f[E]??(async()=>{try{let S=await this._rpcRequest("getBlockHeight",g),k=l.create(S,Re(l.number()));if("error"in k)throw new oe(k.error,"failed to get block height information");return k.result}finally{delete f[E]}})(),await f[E]}})();let r,i,s,o,a,u;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,o=t.fetchMiddleware,a=t.disableRetryOnRateLimit,u=t.httpAgent),this._rpcEndpoint=qA(e),this._rpcWsEndpoint=r||KA(e),this._rpcClient=iR(e,i,s,o,a,u),this._rpcRequest=sR(this._rpcClient),this._rpcBatchRequest=oR(this._rpcClient),this._rpcWebSocket=new _f(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){let{commitment:r,config:i}=Ge(t),s=this._buildArgs([e.toBase58()],r,void 0,i),o=await this._rpcRequest("getBalance",s),a=l.create(o,lt(l.number()));if("error"in a)throw new oe(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){let t=await this._rpcRequest("getBlockTime",[e]),r=l.create(t,Re(l.nullable(l.number())));if("error"in r)throw new oe(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){let e=await this._rpcRequest("minimumLedgerSlot",[]),t=l.create(e,Re(l.number()));if("error"in t)throw new oe(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){let e=await this._rpcRequest("getFirstAvailableBlock",[]),t=l.create(e,dR);if("error"in t)throw new oe(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};let r=await this._rpcRequest("getSupply",[t]),i=l.create(r,pR);if("error"in i)throw new oe(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){let r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",r),s=l.create(i,lt(bf));if("error"in s)throw new oe(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){let r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",r),s=l.create(i,lt(bf));if("error"in s)throw new oe(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,r){let{commitment:i,config:s}=Ge(r),o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});let a=this._buildArgs(o,i,"base64",s),u=await this._rpcRequest("getTokenAccountsByOwner",a),f=l.create(u,gR);if("error"in f)throw new oe(f.error,`failed to get token accounts owned by account ${e.toBase58()}`);return f.result}async getParsedTokenAccountsByOwner(e,t,r){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});let s=this._buildArgs(i,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=l.create(o,mR);if("error"in a)throw new oe(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){let t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",r),s=l.create(i,_R);if("error"in s)throw new oe(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){let r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",r),s=l.create(i,yR);if("error"in s)throw new oe(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){let{commitment:r,config:i}=Ge(t),s=this._buildArgs([e.toBase58()],r,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=l.create(o,lt(l.nullable(co)));if("error"in a)throw new oe(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,t){let{commitment:r,config:i}=Ge(t),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=l.create(o,lt(l.nullable(Ef)));if("error"in a)throw new oe(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,t){let{commitment:r,config:i}=Ge(t),s=e.map(f=>f.toBase58()),o=this._buildArgs([s],r,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),u=l.create(a,lt(l.array(l.nullable(Ef))));if("error"in u)throw new oe(u.error,`failed to get info for accounts ${s}`);return u.result}async getMultipleAccountsInfoAndContext(e,t){let{commitment:r,config:i}=Ge(t),s=e.map(f=>f.toBase58()),o=this._buildArgs([s],r,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),u=l.create(a,lt(l.array(l.nullable(co))));if("error"in u)throw new oe(u.error,`failed to get info for accounts ${s}`);return u.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){let{commitment:i,config:s}=Ge(t),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:r??s?.epoch}),a=await this._rpcRequest("getStakeActivation",o),u=l.create(a,Re(AR));if("error"in u)throw new oe(u.error,`failed to get Stake Activation ${e.toBase58()}`);return u.result}async getProgramAccounts(e,t){let{commitment:r,config:i}=Ge(t),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],r,s||"base64",{...o,...o.filters?{filters:Zy(o.filters)}:null}),u=await this._rpcRequest("getProgramAccounts",a),f=l.array(bR),d=o.withContext===!0?l.create(u,lt(f)):l.create(u,Re(f));if("error"in d)throw new oe(d.error,`failed to get accounts owned by program ${e.toBase58()}`);return d.result}async getParsedProgramAccounts(e,t){let{commitment:r,config:i}=Ge(t),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=l.create(o,Re(l.array(ER)));if("error"in a)throw new oe(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,t){let r;if(typeof e=="string")r=e;else{let s=e;if(s.abortSignal?.aborted)return Promise.reject(s.abortSignal.reason);r=s.signature}let i;try{i=Ft.default.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Le(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,i,s=!1,o=new Promise((u,f)=>{try{r=this.onSignature(t,(m,_)=>{r=void 0;let g={context:_,value:m};u({__type:wr.PROCESSED,response:g})},e);let d=new Promise(m=>{r==null?m():i=this._onSubscriptionStateChange(r,_=>{_==="subscribed"&&m()})});(async()=>{if(await d,s)return;let m=await this.getSignatureStatus(t);if(s||m==null)return;let{context:_,value:g}=m;if(g!=null)if(g?.err)f(g.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(g.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(g.confirmationStatus==="processed"||g.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,u({__type:wr.PROCESSED,response:{context:_,value:g}})}})()}catch(d){f(d)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:i}}){let s=!1,o=new Promise(m=>{let _=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let g=await _();if(!s){for(;g<=r;)if(await _i(1e3),s||(g=await _(),s))return;m({__type:wr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),f=this.getCancellationPromise(t),d;try{let m=await Promise.race([f,u,o]);if(m.__type===wr.PROCESSED)d=m.response;else throw new so(i)}finally{s=!0,a()}return d}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1,u=new Promise(g=>{let E=s,S=null,k=async()=>{try{let{context:O,value:L}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:r});return S=O.slot,L?.nonce}catch{return E}};(async()=>{if(E=await k(),!a)for(;;){if(s!==E){g({__type:wr.NONCE_INVALID,slotInWhichNonceDidAdvance:S});return}if(await _i(2e3),a||(E=await k(),a))return}})()}),{abortConfirmation:f,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),m=this.getCancellationPromise(t),_;try{let g=await Promise.race([m,d,u]);if(g.__type===wr.PROCESSED)_=g.response;else{let E;for(;;){let S=await this.getSignatureStatus(o);if(S==null)break;if(S.context.slot<(g.slotInWhichNonceDidAdvance??r)){await _i(400);continue}E=S;break}if(E?.value){let S=e||"finalized",{confirmationStatus:k}=E.value;switch(S){case"processed":case"recent":if(k!=="processed"&&k!=="confirmed"&&k!=="finalized")throw new Wr(o);break;case"confirmed":case"single":case"singleGossip":if(k!=="confirmed"&&k!=="finalized")throw new Wr(o);break;case"finalized":case"max":case"root":if(k!=="finalized")throw new Wr(o);break;default:}_={context:E.context,value:{err:E.value.err}}}else throw new Wr(o)}}finally{a=!0,f()}return _}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r,i=new Promise(u=>{let f=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{f=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>u({__type:wr.TIMED_OUT,timeoutMs:f}),f)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t}),a;try{let u=await Promise.race([o,i]);if(u.__type===wr.PROCESSED)a=u.response;else throw new oo(t,u.timeoutMs/1e3)}finally{clearTimeout(r),s()}return a}async getClusterNodes(){let e=await this._rpcRequest("getClusterNodes",[]),t=l.create(e,Re(l.array(MR)));if("error"in t)throw new oe(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){let t=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",t),i=l.create(r,LR);if("error"in i)throw new oe(i.error,"failed to get vote accounts");return i.result}async getSlot(e){let{commitment:t,config:r}=Ge(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getSlot",i),o=l.create(s,Re(l.number()));if("error"in o)throw new oe(o.error,"failed to get slot");return o.result}async getSlotLeader(e){let{commitment:t,config:r}=Ge(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getSlotLeader",i),o=l.create(s,Re(l.string()));if("error"in o)throw new oe(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){let r=[e,t],i=await this._rpcRequest("getSlotLeaders",r),s=l.create(i,Re(l.array(nt)));if("error"in s)throw new oe(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){let{context:r,value:i}=await this.getSignatureStatuses([e],t);Le(i.length===1);let s=i[0];return{context:r,value:s}}async getSignatureStatuses(e,t){let r=[e];t&&r.push(t);let i=await this._rpcRequest("getSignatureStatuses",r),s=l.create(i,DR);if("error"in s)throw new oe(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){let{commitment:t,config:r}=Ge(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getTransactionCount",i),o=l.create(s,Re(l.number()));if("error"in o)throw new oe(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){let t=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",t),i=l.create(r,aR);if("error"in i)throw new oe(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,r){let{commitment:i,config:s}=Ge(r),o=this._buildArgs([e.map(f=>f.toBase58())],i,void 0,{...s,epoch:t??s?.epoch}),a=await this._rpcRequest("getInflationReward",o),u=l.create(a,WA);if("error"in u)throw new oe(u.error,"failed to get inflation reward");return u.result}async getInflationRate(){let e=await this._rpcRequest("getInflationRate",[]),t=l.create(e,cR);if("error"in t)throw new oe(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){let{commitment:t,config:r}=Ge(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getEpochInfo",i),o=l.create(s,lR);if("error"in o)throw new oe(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){let e=await this._rpcRequest("getEpochSchedule",[]),t=l.create(e,fR);if("error"in t)throw new oe(t.error,"failed to get epoch schedule");let r=t.result;return new uc(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){let e=await this._rpcRequest("getLeaderSchedule",[]),t=l.create(e,hR);if("error"in t)throw new oe(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){let r=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=l.create(i,HR);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){let t=this._buildArgs([],e),r=await this._rpcRequest("getRecentBlockhash",t),i=l.create(r,ZR);if("error"in i)throw new oe(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(e){let t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=l.create(t,QR);if("error"in r)throw new oe(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,t){let r=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=l.create(i,ev);if("error"in s)throw new oe(s.error,"failed to get fee calculator");let{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,t){let r=ve(e.serialize()).toString("base64"),i=this._buildArgs([r],t),s=await this._rpcRequest("getFeeForMessage",i),o=l.create(s,lt(l.nullable(l.number())));if("error"in o)throw new oe(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){let t=e?.lockedWritableAccounts?.map(o=>o.toBase58()),r=t?.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),s=l.create(i,uR);if("error"in s)throw new oe(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){let{commitment:t,config:r}=Ge(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getLatestBlockhash",i),o=l.create(s,YR);if("error"in o)throw new oe(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){let{commitment:r,config:i}=Ge(t),s=this._buildArgs([e],r,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=l.create(o,XR);if("error"in a)throw new oe(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){let e=await this._rpcRequest("getVersion",[]),t=l.create(e,Re(eR));if("error"in t)throw new oe(t.error,"failed to get version");return t.result}async getGenesisHash(){let e=await this._rpcRequest("getGenesisHash",[]),t=l.create(e,Re(l.string()));if("error"in t)throw new oe(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){let{commitment:r,config:i}=Ge(t),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i?.transactionDetails){case"accounts":{let a=l.create(o,VR);if("error"in a)throw a.error;return a.result}case"none":{let a=l.create(o,qR);if("error"in a)throw a.error;return a.result}default:{let a=l.create(o,KR);if("error"in a)throw a.error;let{result:u}=a;return u?{...u,transactions:u.transactions.map(({transaction:f,meta:d,version:m})=>({meta:d,transaction:{...f,message:sf(m,f.message)},version:m}))}:null}}}catch(a){throw new oe(a,"failed to get confirmed block")}}async getParsedBlock(e,t){let{commitment:r,config:i}=Ge(t),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i?.transactionDetails){case"accounts":{let a=l.create(o,WR);if("error"in a)throw a.error;return a.result}case"none":{let a=l.create(o,GR);if("error"in a)throw a.error;return a.result}default:{let a=l.create(o,$R);if("error"in a)throw a.error;return a.result}}}catch(a){throw new oe(a,"failed to get block")}}async getBlockProduction(e){let t,r;if(typeof e=="string")r=e;else if(e){let{commitment:a,...u}=e;r=a,t=u}let i=this._buildArgs([],r,"base64",t),s=await this._rpcRequest("getBlockProduction",i),o=l.create(s,rR);if("error"in o)throw new oe(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){let{commitment:r,config:i}=Ge(t),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getTransaction",s),a=l.create(o,of);if("error"in a)throw new oe(a.error,"failed to get transaction");let u=a.result;return u&&{...u,transaction:{...u.transaction,message:sf(u.version,u.transaction.message)}}}async getParsedTransaction(e,t){let{commitment:r,config:i}=Ge(t),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=l.create(o,rc);if("error"in a)throw new oe(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,t){let{commitment:r,config:i}=Ge(t),s=e.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(u=>{let f=l.create(u,rc);if("error"in f)throw new oe(f.error,"failed to get transactions");return f.result})}async getTransactions(e,t){let{commitment:r,config:i}=Ge(t),s=e.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],r,void 0,i)}));return(await this._rpcBatchRequest(s)).map(u=>{let f=l.create(u,of);if("error"in f)throw new oe(f.error,"failed to get transactions");let d=f.result;return d&&{...d,transaction:{...d.transaction,message:sf(d.version,d.transaction.message)}}})}async getConfirmedBlock(e,t){let r=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedBlock",r),s=l.create(i,jR);if("error"in s)throw new oe(s.error,"failed to get confirmed block");let o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");let a={...o,transactions:o.transactions.map(({transaction:u,meta:f})=>{let d=new rr(u.message);return{meta:f,transaction:{...u,message:d}}})};return{...a,transactions:a.transactions.map(({transaction:u,meta:f})=>({meta:f,transaction:Fe.populate(u.message,u.signatures)}))}}async getBlocks(e,t,r){let i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],r),s=await this._rpcRequest("getBlocks",i),o=l.create(s,Re(l.array(l.number())));if("error"in o)throw new oe(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=l.create(i,Jy);if("error"in s)throw new oe(s.error,"failed to get block");let o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",r),s=l.create(i,Jy);if("error"in s)throw new oe(s.error,"failed to get confirmed block");let o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){let r=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedTransaction",r),s=l.create(i,of);if("error"in s)throw new oe(s.error,"failed to get transaction");let o=s.result;if(!o)return o;let a=new rr(o.transaction.message),u=o.transaction.signatures;return{...o,transaction:Fe.populate(a,u)}}async getParsedConfirmedTransaction(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",r),s=l.create(i,rc);if("error"in s)throw new oe(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){let r=e.map(o=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{let a=l.create(o,rc);if("error"in a)throw new oe(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,t,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{let u=await this.getConfirmedBlockSignatures(t,"finalized");u.signatures.length>0&&(i.until=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}let o=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>o));)try{let u=await this.getConfirmedBlockSignatures(r);u.signatures.length>0&&(i.before=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(u=>u.signature)}async getConfirmedSignaturesForAddress2(e,t,r){let i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=l.create(s,RR);if("error"in o)throw new oe(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,r){let i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),o=l.create(s,vR);if("error"in o)throw new oe(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){let{context:r,value:i}=await this.getAccountInfoAndContext(e,t),s=null;return i!==null&&(s=new ao({key:e,state:ao.deserialize(i.data)})),{context:r,value:s}}async getNonceAndContext(e,t){let{context:r,value:i}=await this.getAccountInfoAndContext(e,t),s=null;return i!==null&&(s=cc.fromAccountData(i.data)),{context:r,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,t){let r=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=l.create(r,tv);if("error"in i)throw new oe(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await _i(100);let r=Date.now()-this._blockhashInfo.lastFetch>=gg;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let i=0;i<50;i++){let s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await _i(hg/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){let{commitment:t,config:r}=Ge(e),i=this._buildArgs([],t,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=l.create(s,lt(l.number()));if("error"in o)throw new oe(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,r){if("message"in e){let S=e.serialize(),k=ye.Buffer.from(S).toString("base64");if(Array.isArray(t)||r!==void 0)throw new Error("Invalid arguments");let O=t||{};O.encoding="base64","commitment"in O||(O.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(O.innerInstructions=t.innerInstructions);let L=[k,O],M=await this._rpcRequest("simulateTransaction",L),C=l.create(M,Yy);if("error"in C)throw new Error("failed to simulate transaction: "+C.error.message);return C.result}let i;if(e instanceof Fe){let E=e;i=new Fe,i.feePayer=E.feePayer,i.instructions=e.instructions,i.nonceInfo=E.nonceInfo,i.signatures=E.signatures}else i=Fe.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");let s=t;if(i.nonceInfo&&s)i.sign(...s);else{let E=this._disableBlockhashCaching;for(;;){let S=await this._blockhashWithExpiryBlockHeight(E);if(i.lastValidBlockHeight=S.lastValidBlockHeight,i.recentBlockhash=S.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");let k=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(k)&&!this._blockhashInfo.transactionSignatures.includes(k)){this._blockhashInfo.simulatedSignatures.push(k);break}else E=!0}}let o=i._compile(),a=o.serialize(),f=i._serialize(a).toString("base64"),d={encoding:"base64",commitment:this.commitment};if(r){let E=(Array.isArray(r)?r:o.nonProgramIds()).map(S=>S.toBase58());d.accounts={encoding:"base64",addresses:E}}s&&(d.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(d.innerInstructions=t.innerInstructions);let m=[f,d],_=await this._rpcRequest("simulateTransaction",m),g=l.create(_,Yy);if("error"in g){let E;if("data"in g.error&&(E=g.error.data.logs,E&&Array.isArray(E))){let S=`
    `,k=S+E.join(S);console.error(g.error.message,k)}throw new Ei({action:"simulate",signature:"",transactionMessage:g.error.message,logs:E})}return g.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");let o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");let i=t;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){let a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");let u=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(u))o=!0;else{this._blockhashInfo.transactionSignatures.push(u);break}}}let s=e.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(e,t){let r=ve(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){let r={encoding:"base64"},i=t&&t.skipPreflight,s=i===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(r.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(r.minContextSlot=t.minContextSlot),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);let o=[e,r],a=await this._rpcRequest("sendTransaction",o),u=l.create(a,nv);if("error"in u){let f;throw"data"in u.error&&(f=u.error.data.logs),new Ei({action:i?"send":"simulate",signature:"",transactionMessage:u.error.message,logs:f})}return u.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,r])=>{this._setSubscription(t,{...r,state:"pending"})})}_setSubscription(e,t){let r=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,r!==t.state){let i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(s=>{try{s(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var s;let r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};let i=(s=this._subscriptionStateChangeCallbacksByHash)[r]||(s[r]=new Set);return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}let e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{let i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{let{args:s,method:o}=i;try{this._setSubscription(r,{...i,state:"subscribing"});let a=await this._rpcWebSocket.call(o,s);this._setSubscription(r,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(a instanceof Error&&console.error(`${o} error for argument`,s,a.message),!t())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{let{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!t())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){let r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){let{result:t,subscription:r}=l.create(e,xR);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){let r=this._nextClientSubscriptionId++,i=Gy([e.method,t]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];let o=this._subscriptionsByHash[i];Le(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){let{commitment:i,config:s}=Ge(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){let{result:t,subscription:r}=l.create(e,IR);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,i){let{commitment:s,config:o}=Ge(r),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:Zy(i)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){let i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){let{result:t,subscription:r}=l.create(e,iv);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){let{result:t,subscription:r}=l.create(e,TR);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){let{result:t,subscription:r}=l.create(e,NR);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){let r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,i){let s=t||this._commitment;if(s||r||i){let o={};r&&(o.encoding=r),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,r,i){let s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,i)}_wsOnSignatureNotification(e){let{result:t,subscription:r}=l.create(e,BR);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){let i=this._buildArgs([e],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){t(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,r){let{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(u,f)=>{t(u,f);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){let{result:t,subscription:r}=l.create(e,CR);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}},fc=class n{constructor(e){this._keypair=void 0,this._keypair=e??Vy()}static generate(){return new n(Vy())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");let r=e.slice(32,64);if(!t||!t.skipValidation){let i=e.slice(0,32),s=oc(i);for(let o=0;o<32;o++)if(r[o]!==s[o])throw new Error("provided secretKey is invalid")}return new n({publicKey:r,secretKey:e})}static fromSeed(e){let t=oc(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new n({publicKey:t,secretKey:r})}get publicKey(){return new ee(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},Er=Object.freeze({CreateLookupTable:{index:0,layout:T.struct([T.u32("instruction"),is("recentSlot"),T.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:T.struct([T.u32("instruction")])},ExtendLookupTable:{index:2,layout:T.struct([T.u32("instruction"),is(),T.seq(xe(),T.offset(T.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:T.struct([T.u32("instruction")])},CloseLookupTable:{index:4,layout:T.struct([T.u32("instruction")])}}),Rf=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let r=T.u32("instruction").decode(e.data),i;for(let[s,o]of Object.entries(Er))if(o.index==r){i=s;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);let{recentSlot:t}=ze(Er.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);let{addresses:t}=ze(Er.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(r=>new ee(r))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(uo.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}},uo=class{constructor(){}static createLookupTable(e){let[t,r]=ee.findProgramAddressSync([e.authority.toBuffer(),uf.toBufferLE(BigInt(e.recentSlot),8)],this.programId),i=Er.CreateLookupTable,s=Oe(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:r}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Kt.programId,isSigner:!1,isWritable:!1}];return[new Ke({programId:this.programId,keys:o,data:s}),t]}static freezeLookupTable(e){let t=Er.FreezeLookupTable,r=Oe(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Ke({programId:this.programId,keys:i,data:r})}static extendLookupTable(e){let t=Er.ExtendLookupTable,r=Oe(t,{addresses:e.addresses.map(s=>s.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Kt.programId,isSigner:!1,isWritable:!1}),new Ke({programId:this.programId,keys:i,data:r})}static deactivateLookupTable(e){let t=Er.DeactivateLookupTable,r=Oe(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Ke({programId:this.programId,keys:i,data:r})}static closeLookupTable(e){let t=Er.CloseLookupTable,r=Oe(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new Ke({programId:this.programId,keys:i,data:r})}};uo.programId=new ee("AddressLookupTab1e1111111111111111111111111");var vf=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let r=T.u8("instruction").decode(e.data),i;for(let[s,o]of Object.entries(er))if(o.index==r){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);let{units:t,additionalFee:r}=ze(er.RequestUnits,e.data);return{units:t,additionalFee:r}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);let{bytes:t}=ze(er.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);let{units:t}=ze(er.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);let{microLamports:t}=ze(er.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(lo.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}},er=Object.freeze({RequestUnits:{index:0,layout:T.struct([T.u8("instruction"),T.u32("units"),T.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:T.struct([T.u8("instruction"),T.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:T.struct([T.u8("instruction"),T.u32("units")])},SetComputeUnitPrice:{index:3,layout:T.struct([T.u8("instruction"),is("microLamports")])}}),lo=class{constructor(){}static requestUnits(e){let t=er.RequestUnits,r=Oe(t,e);return new Ke({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){let t=er.RequestHeapFrame,r=Oe(t,e);return new Ke({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){let t=er.SetComputeUnitLimit,r=Oe(t,e);return new Ke({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){let t=er.SetComputeUnitPrice,r=Oe(t,{microLamports:BigInt(e.microLamports)});return new Ke({keys:[],programId:this.programId,data:r})}};lo.programId=new ee("ComputeBudget111111111111111111111111111111");var Qy=64,eg=32,tg=64,ng=T.struct([T.u8("numSignatures"),T.u8("padding"),T.u16("signatureOffset"),T.u16("signatureInstructionIndex"),T.u16("publicKeyOffset"),T.u16("publicKeyInstructionIndex"),T.u16("messageDataOffset"),T.u16("messageDataSize"),T.u16("messageInstructionIndex")]),hc=class n{constructor(){}static createInstructionWithPublicKey(e){let{publicKey:t,message:r,signature:i,instructionIndex:s}=e;Le(t.length===eg,`Public Key must be ${eg} bytes but received ${t.length} bytes`),Le(i.length===tg,`Signature must be ${tg} bytes but received ${i.length} bytes`);let o=ng.span,a=o+t.length,u=a+i.length,f=1,d=ye.Buffer.alloc(u+r.length),m=s??65535;return ng.encode({numSignatures:f,padding:0,signatureOffset:a,signatureInstructionIndex:m,publicKeyOffset:o,publicKeyInstructionIndex:m,messageDataOffset:u,messageDataSize:r.length,messageInstructionIndex:m},d),d.fill(t,o),d.fill(i,a),d.fill(r,u),new Ke({keys:[],programId:n.programId,data:d})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:r,instructionIndex:i}=e;Le(t.length===Qy,`Private key must be ${Qy} bytes but received ${t.length} bytes`);try{let s=fc.fromSecretKey(t),o=s.publicKey.toBytes(),a=Nf(r,s.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:a,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}};hc.programId=new ee("Ed25519SigVerify111111111111111111111111111");var ov=(n,e)=>{let t=Tf.secp256k1.sign(n,e);return[t.toCompactRawBytes(),t.recovery]};Tf.secp256k1.utils.isValidPrivateKey;var av=Tf.secp256k1.getPublicKey,rg=32,af=20,ig=64,cv=11,cf=T.struct([T.u8("numSignatures"),T.u16("signatureOffset"),T.u8("signatureInstructionIndex"),T.u16("ethAddressOffset"),T.u8("ethAddressInstructionIndex"),T.u16("messageDataOffset"),T.u16("messageDataSize"),T.u8("messageInstructionIndex"),T.blob(20,"ethAddress"),T.blob(64,"signature"),T.u8("recoveryId")]),dc=class n{constructor(){}static publicKeyToEthAddress(e){Le(e.length===ig,`Public key must be ${ig} bytes but received ${e.length} bytes`);try{return ye.Buffer.from(Ky.keccak_256(ve(e))).slice(-af)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){let{publicKey:t,message:r,signature:i,recoveryId:s,instructionIndex:o}=e;return n.createInstructionWithEthAddress({ethAddress:n.publicKeyToEthAddress(t),message:r,signature:i,recoveryId:s,instructionIndex:o})}static createInstructionWithEthAddress(e){let{ethAddress:t,message:r,signature:i,recoveryId:s,instructionIndex:o=0}=e,a;typeof t=="string"?t.startsWith("0x")?a=ye.Buffer.from(t.substr(2),"hex"):a=ye.Buffer.from(t,"hex"):a=t,Le(a.length===af,`Address must be ${af} bytes but received ${a.length} bytes`);let u=1+cv,f=u,d=u+a.length,m=d+i.length+1,_=1,g=ye.Buffer.alloc(cf.span+r.length);return cf.encode({numSignatures:_,signatureOffset:d,signatureInstructionIndex:o,ethAddressOffset:f,ethAddressInstructionIndex:o,messageDataOffset:m,messageDataSize:r.length,messageInstructionIndex:o,signature:ve(i),ethAddress:ve(a),recoveryId:s},g),g.fill(ve(r),cf.span),new Ke({keys:[],programId:n.programId,data:g})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:r,instructionIndex:i}=e;Le(t.length===rg,`Private key must be ${rg} bytes but received ${t.length} bytes`);try{let s=ve(t),o=av(s,!1).slice(1),a=ye.Buffer.from(Ky.keccak_256(ve(r))),[u,f]=ov(a,s);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:u,recoveryId:f,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}};dc.programId=new ee("KeccakSecp256k11111111111111111111111111111");var Sg,Ig=new ee("StakeConfig11111111111111111111111111111111"),pc=class{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}},Ai=class{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}};Sg=Ai;Ai.default=new Sg(0,0,ee.default);var xf=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let r=T.u32("instruction").decode(e.data),i;for(let[s,o]of Object.entries(Ct))if(o.index==r){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{authorized:t,lockup:r}=ze(Ct.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new pc(new ee(t.staker),new ee(t.withdrawer)),lockup:new Ai(r.unixTimestamp,r.epoch,new ee(r.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),ze(Ct.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{newAuthorized:t,stakeAuthorizationType:r}=ze(Ct.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new ee(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{newAuthorized:t,stakeAuthorizationType:r,authoritySeed:i,authorityOwner:s}=ze(Ct.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new ee(s),newAuthorizedPubkey:new ee(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:t}=ze(Ct.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ze(Ct.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);let{lamports:t}=ze(Ct.Withdraw,e.data),r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ze(Ct.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(os.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}},Ct=Object.freeze({Initialize:{index:0,layout:T.struct([T.u32("instruction"),yA(),gA()])},Authorize:{index:1,layout:T.struct([T.u32("instruction"),xe("newAuthorized"),T.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:T.struct([T.u32("instruction")])},Split:{index:3,layout:T.struct([T.u32("instruction"),T.ns64("lamports")])},Withdraw:{index:4,layout:T.struct([T.u32("instruction"),T.ns64("lamports")])},Deactivate:{index:5,layout:T.struct([T.u32("instruction")])},Merge:{index:7,layout:T.struct([T.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:T.struct([T.u32("instruction"),xe("newAuthorized"),T.u32("stakeAuthorizationType"),bi("authoritySeed"),xe("authorityOwner")])}}),uv=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),os=class{constructor(){}static initialize(e){let{stakePubkey:t,authorized:r,lockup:i}=e,s=i||Ai.default,o=Ct.Initialize,a=Oe(o,{authorized:{staker:ve(r.staker.toBuffer()),withdrawer:ve(r.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:ve(s.custodian.toBuffer())}}),u={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:rs,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new Ke(u)}static createAccountWithSeed(e){let t=new Fe;t.add(Kt.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:r,authorized:i,lockup:s}))}static createAccount(e){let t=new Fe;t.add(Kt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:r,authorized:i,lockup:s}))}static delegate(e){let{stakePubkey:t,authorizedPubkey:r,votePubkey:i}=e,s=Ct.Delegate,o=Oe(s);return new Fe().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:Jn,isSigner:!1,isWritable:!1},{pubkey:sc,isSigner:!1,isWritable:!1},{pubkey:Ig,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(e){let{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:o}=e,a=Ct.Authorize,u=Oe(a,{newAuthorized:ve(i.toBuffer()),stakeAuthorizationType:s.index}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Jn,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&f.push({pubkey:o,isSigner:!0,isWritable:!1}),new Fe().add({keys:f,programId:this.programId,data:u})}static authorizeWithSeed(e){let{stakePubkey:t,authorityBase:r,authoritySeed:i,authorityOwner:s,newAuthorizedPubkey:o,stakeAuthorizationType:a,custodianPubkey:u}=e,f=Ct.AuthorizeWithSeed,d=Oe(f,{newAuthorized:ve(o.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:i,authorityOwner:ve(s.toBuffer())}),m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Jn,isSigner:!1,isWritable:!1}];return u&&m.push({pubkey:u,isSigner:!0,isWritable:!1}),new Fe().add({keys:m,programId:this.programId,data:d})}static splitInstruction(e){let{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:i,lamports:s}=e,o=Ct.Split,a=Oe(o,{lamports:s});return new Ke({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(e,t){let r=new Fe;return r.add(Kt.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){let{stakePubkey:r,authorizedPubkey:i,splitStakePubkey:s,basePubkey:o,seed:a,lamports:u}=e,f=new Fe;return f.add(Kt.allocate({accountPubkey:s,basePubkey:o,seed:a,space:this.space,programId:this.programId})),t&&t>0&&f.add(Kt.transfer({fromPubkey:e.authorizedPubkey,toPubkey:s,lamports:t})),f.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:i,splitStakePubkey:s,lamports:u}))}static merge(e){let{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:i}=e,s=Ct.Merge,o=Oe(s);return new Fe().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Jn,isSigner:!1,isWritable:!1},{pubkey:sc,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(e){let{stakePubkey:t,authorizedPubkey:r,toPubkey:i,lamports:s,custodianPubkey:o}=e,a=Ct.Withdraw,u=Oe(a,{lamports:s}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:Jn,isSigner:!1,isWritable:!1},{pubkey:sc,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&f.push({pubkey:o,isSigner:!0,isWritable:!1}),new Fe().add({keys:f,programId:this.programId,data:u})}static deactivate(e){let{stakePubkey:t,authorizedPubkey:r}=e,i=Ct.Deactivate,s=Oe(i);return new Fe().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Jn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}};os.programId=new ee("Stake11111111111111111111111111111111111111");os.space=200;var yc=class{constructor(e,t,r,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=r,this.commission=i}},Sf=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let r=T.u32("instruction").decode(e.data),i;for(let[s,o]of Object.entries(tr))if(o.index==r){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);let{voteInit:t}=ze(tr.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new yc(new ee(t.nodePubkey),new ee(t.authorizedVoter),new ee(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{newAuthorized:t,voteAuthorizationType:r}=ze(tr.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new ee(t),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:r,newAuthorized:i,voteAuthorizationType:s}}=ze(tr.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new ee(t),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new ee(i),voteAuthorizationType:{index:s},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:t}=ze(tr.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(as.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}},tr=Object.freeze({InitializeAccount:{index:0,layout:T.struct([T.u32("instruction"),mA()])},Authorize:{index:1,layout:T.struct([T.u32("instruction"),xe("newAuthorized"),T.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:T.struct([T.u32("instruction"),T.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:T.struct([T.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:T.struct([T.u32("instruction"),_A()])}}),lv=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),as=class n{constructor(){}static initializeAccount(e){let{votePubkey:t,nodePubkey:r,voteInit:i}=e,s=tr.InitializeAccount,o=Oe(s,{voteInit:{nodePubkey:ve(i.nodePubkey.toBuffer()),authorizedVoter:ve(i.authorizedVoter.toBuffer()),authorizedWithdrawer:ve(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:rs,isSigner:!1,isWritable:!1},{pubkey:Jn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new Ke(a)}static createAccount(e){let t=new Fe;return t.add(Kt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){let{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:i,voteAuthorizationType:s}=e,o=tr.Authorize,a=Oe(o,{newAuthorized:ve(i.toBuffer()),voteAuthorizationType:s.index}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Jn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Fe().add({keys:u,programId:this.programId,data:a})}static authorizeWithSeed(e){let{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:s,voteAuthorizationType:o,votePubkey:a}=e,u=tr.AuthorizeWithSeed,f=Oe(u,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:ve(r.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:ve(s.toBuffer()),voteAuthorizationType:o.index}}),d=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:Jn,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new Fe().add({keys:d,programId:this.programId,data:f})}static withdraw(e){let{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:i,toPubkey:s}=e,o=tr.Withdraw,a=Oe(o,{lamports:i}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new Fe().add({keys:u,programId:this.programId,data:a})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return n.withdraw(e)}static updateValidatorIdentity(e){let{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:i}=e,s=tr.UpdateValidatorIdentity,o=Oe(s),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Fe().add({keys:a,programId:this.programId,data:o})}};as.programId=new ee("Vote111111111111111111111111111111111111111");as.space=3762;var kg=new ee("Va1idator1nfo111111111111111111111111111111"),fv=l.type({name:l.string(),website:l.optional(l.string()),details:l.optional(l.string()),iconUrl:l.optional(l.string()),keybaseUsername:l.optional(l.string())}),If=class n{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(gn(t)!==2)return null;let i=[];for(let s=0;s<2;s++){let o=new ee(mn(t,0,nr)),a=Qn(t)===1;i.push({publicKey:o,isSigner:a})}if(i[0].publicKey.equals(kg)&&i[1].isSigner){let s=bi().decode(ye.Buffer.from(t)),o=JSON.parse(s);return l.assert(o,fv),new n(i[1].publicKey,o)}return null}},hv=new ee("Vote111111111111111111111111111111111111111"),dv=T.struct([xe("nodePubkey"),xe("authorizedWithdrawer"),T.u8("commission"),T.nu64(),T.seq(T.struct([T.nu64("slot"),T.u32("confirmationCount")]),T.offset(T.u32(),-8),"votes"),T.u8("rootSlotValid"),T.nu64("rootSlot"),T.nu64(),T.seq(T.struct([T.nu64("epoch"),xe("authorizedVoter")]),T.offset(T.u32(),-8),"authorizedVoters"),T.struct([T.seq(T.struct([xe("authorizedPubkey"),T.nu64("epochOfLastAuthorizedSwitch"),T.nu64("targetEpoch")]),32,"buf"),T.nu64("idx"),T.u8("isEmpty")],"priorVoters"),T.nu64(),T.seq(T.struct([T.nu64("epoch"),T.nu64("credits"),T.nu64("prevCredits")]),T.offset(T.u32(),-8),"epochCredits"),T.struct([T.nu64("slot"),T.nu64("timestamp")],"lastTimestamp")]),kf=class n{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){let r=dv.decode(ve(e),4),i=r.rootSlot;return r.rootSlotValid||(i=null),new n({nodePubkey:new ee(r.nodePubkey),authorizedWithdrawer:new ee(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:i,authorizedVoters:r.authorizedVoters.map(pv),priorVoters:yv(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}};function pv({authorizedVoter:n,epoch:e}){return{epoch:e,authorizedVoter:new ee(n)}}function sg({authorizedPubkey:n,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new ee(n),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function yv({buf:n,idx:e,isEmpty:t}){return t?[]:[...n.slice(e+1).map(sg),...n.slice(0,e).map(sg)]}var og={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function gv(n,e){let t=e===!1?"http":"https";if(!n)return og[t].devnet;let r=og[t][n];if(!r)throw new Error(`Unknown ${t} cluster: ${n}`);return r}async function mv(n,e,t,r){let i,s;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(i=t,s=r):s=t;let o=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},a=await n.sendRawTransaction(e,o),u=s&&s.commitment,d=(await(i?n.confirmTransaction(i,u):n.confirmTransaction(a,u))).value;if(d.err)throw a!=null?new Ei({action:o?.skipPreflight?"send":"simulate",signature:a,transactionMessage:`Status: (${JSON.stringify(d)})`}):new Error(`Raw transaction ${a} failed (${JSON.stringify(d)})`);return a}var _v=1e9;te.Account=ff;te.AddressLookupTableAccount=ao;te.AddressLookupTableInstruction=Rf;te.AddressLookupTableProgram=uo;te.Authorized=pc;te.BLOCKHASH_CACHE_TIMEOUT_MS=gg;te.BPF_LOADER_DEPRECATED_PROGRAM_ID=dA;te.BPF_LOADER_PROGRAM_ID=BA;te.BpfLoader=mf;te.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=er;te.ComputeBudgetInstruction=vf;te.ComputeBudgetProgram=lo;te.Connection=Af;te.Ed25519Program=hc;te.Enum=lf;te.EpochSchedule=uc;te.FeeCalculatorLayout=dg;te.Keypair=fc;te.LAMPORTS_PER_SOL=_v;te.LOOKUP_TABLE_INSTRUCTION_LAYOUTS=Er;te.Loader=ss;te.Lockup=Ai;te.MAX_SEED_LENGTH=ug;te.Message=rr;te.MessageAccountKeys=wi;te.MessageV0=ns;te.NONCE_ACCOUNT_LENGTH=yf;te.NonceAccount=cc;te.PACKET_DATA_SIZE=Gr;te.PUBLIC_KEY_LENGTH=nr;te.PublicKey=ee;te.SIGNATURE_LENGTH_IN_BYTES=io;te.SOLANA_SCHEMA=no;te.STAKE_CONFIG_ID=Ig;te.STAKE_INSTRUCTION_LAYOUTS=Ct;te.SYSTEM_INSTRUCTION_LAYOUTS=je;te.SYSVAR_CLOCK_PUBKEY=Jn;te.SYSVAR_EPOCH_SCHEDULE_PUBKEY=RA;te.SYSVAR_INSTRUCTIONS_PUBKEY=vA;te.SYSVAR_RECENT_BLOCKHASHES_PUBKEY=ic;te.SYSVAR_RENT_PUBKEY=rs;te.SYSVAR_REWARDS_PUBKEY=xA;te.SYSVAR_SLOT_HASHES_PUBKEY=SA;te.SYSVAR_SLOT_HISTORY_PUBKEY=IA;te.SYSVAR_STAKE_HISTORY_PUBKEY=sc;te.Secp256k1Program=dc;te.SendTransactionError=Ei;te.SolanaJSONRPCError=oe;te.SolanaJSONRPCErrorCode=kA;te.StakeAuthorizationLayout=uv;te.StakeInstruction=xf;te.StakeProgram=os;te.Struct=ro;te.SystemInstruction=gf;te.SystemProgram=Kt;te.Transaction=Fe;te.TransactionExpiredBlockheightExceededError=so;te.TransactionExpiredNonceInvalidError=Wr;te.TransactionExpiredTimeoutError=oo;te.TransactionInstruction=Ke;te.TransactionMessage=hf;te.TransactionStatus=wr;te.VALIDATOR_INFO_KEY=kg;te.VERSION_PREFIX_MASK=gc;te.VOTE_PROGRAM_ID=hv;te.ValidatorInfo=If;te.VersionedMessage=Bf;te.VersionedTransaction=df;te.VoteAccount=kf;te.VoteAuthorizationLayout=lv;te.VoteInit=yc;te.VoteInstruction=Sf;te.VoteProgram=as;te.clusterApiUrl=gv;te.sendAndConfirmRawTransaction=mv;te.sendAndConfirmTransaction=pf});var Lg=Ee((wO,Pf)=>{"use strict";var bv=/[\p{Lu}]/u,wv=/[\p{Ll}]/u,Tg=/^[\p{Lu}](?![\p{Lu}])/gu,Bg=/([\p{Alpha}\p{N}_]|$)/u,Cg=/[_.\- ]+/,Ev=new RegExp("^"+Cg.source),Og=new RegExp(Cg.source+Bg.source,"gu"),Ng=new RegExp("\\d+"+Bg.source,"gu"),Av=(n,e,t)=>{let r=!1,i=!1,s=!1;for(let o=0;o<n.length;o++){let a=n[o];r&&bv.test(a)?(n=n.slice(0,o)+"-"+n.slice(o),r=!1,s=i,i=!0,o++):i&&s&&wv.test(a)?(n=n.slice(0,o-1)+"-"+n.slice(o-1),s=i,i=!1,r=!0):(r=e(a)===a&&t(a)!==a,s=i,i=t(a)===a&&e(a)!==a)}return n},Rv=(n,e)=>(Tg.lastIndex=0,n.replace(Tg,t=>e(t))),vv=(n,e)=>(Og.lastIndex=0,Ng.lastIndex=0,n.replace(Og,(t,r)=>e(r)).replace(Ng,t=>e(t))),Mg=(n,e)=>{if(!(typeof n=="string"||Array.isArray(n)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(n)?n=n.map(s=>s.trim()).filter(s=>s.length).join("-"):n=n.trim(),n.length===0)return"";let t=e.locale===!1?s=>s.toLowerCase():s=>s.toLocaleLowerCase(e.locale),r=e.locale===!1?s=>s.toUpperCase():s=>s.toLocaleUpperCase(e.locale);return n.length===1?e.pascalCase?r(n):t(n):(n!==t(n)&&(n=Av(n,t,r)),n=n.replace(Ev,""),e.preserveConsecutiveUppercase?n=Rv(n,t):n=t(n),e.pascalCase&&(n=r(n.charAt(0))+n.slice(1)),vv(n,r))};Pf.exports=Mg;Pf.exports.default=Mg});var qf=Ee(re=>{"use strict";var Ue=class{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,r){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){let t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}};re.Layout=Ue;function Kf(n,e){return e.property?n+"["+e.property+"]":n}re.nameWithProperty=Kf;function xv(n,e){if(typeof n!="function")throw new TypeError("Class must be constructor");if(n.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Ue))throw new TypeError("layout must be a Layout");if(e.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=e,e.boundConstructor_=n,e.makeDestinationObject=(()=>new n),Object.defineProperty(n.prototype,"encode",{value:function(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(n,"decode",{value:function(t,r){return e.decode(t,r)},writable:!0})}re.bindConstructorLayout=xv;var Qt=class extends Ue{isCount(){throw new Error("ExternalLayout is abstract")}},wc=class extends Qt{constructor(e,t){if(e===void 0&&(e=1),!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t){t===void 0&&(t=0);let r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}},fo=class extends Qt{constructor(e,t,r){if(!(e instanceof Ue))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Sn||this.layout instanceof Mn}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,r){return r===void 0&&(r=0),this.layout.encode(e,t,r+this.offset)}},Sn=class extends Ue{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,r){return r===void 0&&(r=0),t.writeUIntLE(e,r,this.span),this.span}},Mn=class extends Ue{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,r){return r===void 0&&(r=0),t.writeUIntBE(e,r,this.span),this.span}},Ar=class extends Ue{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readIntLE(t,this.span)}encode(e,t,r){return r===void 0&&(r=0),t.writeIntLE(e,r,this.span),this.span}},jr=class extends Ue{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readIntBE(t,this.span)}encode(e,t,r){return r===void 0&&(r=0),t.writeIntBE(e,r,this.span),this.span}},Uf=Math.pow(2,32);function Cc(n){let e=Math.floor(n/Uf),t=n-e*Uf;return{hi32:e,lo32:t}}function Mc(n,e){return n*Uf+e}var Df=class extends Ue{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);let r=e.readUInt32LE(t),i=e.readUInt32LE(t+4);return Mc(i,r)}encode(e,t,r){r===void 0&&(r=0);let i=Cc(e);return t.writeUInt32LE(i.lo32,r),t.writeUInt32LE(i.hi32,r+4),8}},Hf=class extends Ue{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);let r=e.readUInt32BE(t),i=e.readUInt32BE(t+4);return Mc(r,i)}encode(e,t,r){r===void 0&&(r=0);let i=Cc(e);return t.writeUInt32BE(i.hi32,r),t.writeUInt32BE(i.lo32,r+4),8}},zf=class extends Ue{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);let r=e.readUInt32LE(t),i=e.readInt32LE(t+4);return Mc(i,r)}encode(e,t,r){r===void 0&&(r=0);let i=Cc(e);return t.writeUInt32LE(i.lo32,r),t.writeInt32LE(i.hi32,r+4),8}},Ff=class extends Ue{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);let r=e.readInt32BE(t),i=e.readUInt32BE(t+4);return Mc(r,i)}encode(e,t,r){r===void 0&&(r=0);let i=Cc(e);return t.writeInt32BE(i.hi32,r),t.writeUInt32BE(i.lo32,r+4),8}},Ec=class extends Ue{constructor(e){super(4,e)}decode(e,t){return t===void 0&&(t=0),e.readFloatLE(t)}encode(e,t,r){return r===void 0&&(r=0),t.writeFloatLE(e,r),4}},Ac=class extends Ue{constructor(e){super(4,e)}decode(e,t){return t===void 0&&(t=0),e.readFloatBE(t)}encode(e,t,r){return r===void 0&&(r=0),t.writeFloatBE(e,r),4}},Rc=class extends Ue{constructor(e){super(8,e)}decode(e,t){return t===void 0&&(t=0),e.readDoubleLE(t)}encode(e,t,r){return r===void 0&&(r=0),t.writeDoubleLE(e,r),8}},vc=class extends Ue{constructor(e){super(8,e)}decode(e,t){return t===void 0&&(t=0),e.readDoubleBE(t)}encode(e,t,r){return r===void 0&&(r=0),t.writeDoubleBE(e,r),8}},xc=class extends Ue{constructor(e,t,r){if(!(e instanceof Ue))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof Qt&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(t instanceof Qt)&&0<e.span&&(i=t*e.span),super(i,r),this.elementLayout=e,this.count=t}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let r=0,i=this.count;if(i instanceof Qt&&(i=i.decode(e,t)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let s=0;for(;s<i;)r+=this.elementLayout.getSpan(e,t+r),++s}return r}decode(e,t){t===void 0&&(t=0);let r=[],i=0,s=this.count;for(s instanceof Qt&&(s=s.decode(e,t));i<s;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),i+=1;return r}encode(e,t,r){r===void 0&&(r=0);let i=this.elementLayout,s=e.reduce((o,a)=>o+i.encode(a,t,r+o),0);return this.count instanceof Qt&&this.count.encode(e.length,t,r),s}},Sc=class extends Ue{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((s,o)=>s&&o instanceof Ue,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&r===void 0&&(r=t,t=void 0);for(let s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let r=0;try{r=this.fields.reduce((i,s)=>{let o=s.getSpan(e,t);return t+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,t){t===void 0&&(t=0);let r=this.makeDestinationObject();for(let i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r){r===void 0&&(r=0);let i=r,s=0,o=0;for(let a of this.fields){let u=a.span;if(o=0<u?u:0,a.property!==void 0){let f=e[a.property];f!==void 0&&(o=a.encode(f,t,r),0>u&&(u=a.getSpan(t,r)))}s=r,r+=u}return s+o-i}fromArray(e){let t=this.makeDestinationObject();for(let r of this.fields)r.property!==void 0&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(let r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}},ho=class{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}},fs=class extends ho{constructor(e,t){if(!(e instanceof Qt&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}},po=class extends Ue{constructor(e,t,r){let i=e instanceof Sn||e instanceof Mn;if(i)e=new fs(new fo(e));else if(e instanceof Qt&&e.isCount())e=new fs(e);else if(!(e instanceof ho))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof Ue))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&i&&(s+=e.layout.span)),super(s,r),this.discriminator=e,this.usesPrefixDiscriminator=i,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;let t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(let t in this.registry){let r=this.registry[t];if(e.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(e,t){t===void 0&&(t=0);let r,i=this.discriminator,s=i.decode(e,t),o=this.registry[s];if(o===void 0){let a=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(a=i.layout.span),r=this.makeDestinationObject(),r[i.property]=s,r[o.property]=this.defaultLayout.decode(e,t+a)}else r=o.decode(e,t);return r}encode(e,t,r){r===void 0&&(r=0);let i=this.getSourceVariant(e);if(i===void 0){let s=this.discriminator,o=this.defaultLayout,a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(e[s.property],t,r),a+o.encode(e[o.property],t,r+a)}return i.encode(e,t,r)}addVariant(e,t,r){let i=new Ic(this,e,t,r);return this.registry[e]=i,i}getVariant(e,t){let r=e;return Buffer.isBuffer(e)&&(t===void 0&&(t=0),r=this.discriminator.decode(e,t)),this.registry[r]}},Ic=class extends Ue{constructor(e,t,r,i){if(!(e instanceof po))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof Ue))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=r?r.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(e,t+r)}decode(e,t){let r=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r){r===void 0&&(r=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let s=i;if(this.layout&&(this.layout.encode(e[this.property],t,r+i),s+=this.layout.getSpan(t,r+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}};function ls(n){return 0>n&&(n+=4294967296),n}var yo=class extends Ue{constructor(e,t,r){if(!(e instanceof Sn||e instanceof Mn))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&r===void 0&&(r=t,t=void 0),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let i=0;this._packedSetValue=function(s){return i=ls(s),this},this._packedGetValue=function(){return i}}decode(e,t){let r=this.makeDestinationObject();t===void 0&&(t=0);let i=this.word.decode(e,t);this._packedSetValue(i);for(let s of this.fields)s.property!==void 0&&(r[s.property]=s.decode(i));return r}encode(e,t,r){r===void 0&&(r=0);let i=this.word.decode(t,r);this._packedSetValue(i);for(let s of this.fields)if(s.property!==void 0){let o=e[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){let r=new xi(this,e,t);return this.fields.push(r),r}addBoolean(e){let t=new kc(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}},xi=class{constructor(e,t,r){if(!(e instanceof yo))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");let i=8*e.span,s=e.fields.reduce((o,a)=>o+a.bits,0);if(t+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-t),this.wordMask=ls(this.valueMask<<this.start),this.property=r}decode(){let e=this.container._packedGetValue();return ls(e&this.wordMask)>>>this.start}encode(e){if(!Number.isInteger(e)||e!==ls(e&this.valueMask))throw new TypeError(Kf("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let t=this.container._packedGetValue(),r=ls(e<<this.start);this.container._packedSetValue(ls(t&~this.wordMask)|r)}},kc=class extends xi{constructor(e,t){super(e,1,t)}decode(e,t){return!!xi.prototype.decode.call(this,e,t)}encode(e){return typeof e=="boolean"&&(e=+e),xi.prototype.encode.call(this,e)}},Tc=class extends Ue{constructor(e,t){if(!(e instanceof Qt&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof Qt||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t){t===void 0&&(t=0);let r=this.span;return 0>r&&(r=this.length.decode(e,t)),e.slice(t,t+r)}encode(e,t,r){let i=this.length;if(this.length instanceof Qt&&(i=e.length),!(Buffer.isBuffer(e)&&i===e.length))throw new TypeError(Kf("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(r+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),r,i,"hex"),this.length instanceof Qt&&this.length.encode(i,t,r),i}},Oc=class extends Ue{constructor(e){super(-1,e)}getSpan(e,t){if(!Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");t===void 0&&(t=0);let r=t;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-t}decode(e,t,r){t===void 0&&(t=0);let i=this.getSpan(e,t);return e.slice(t,t+i-1).toString("utf-8")}encode(e,t,r){r===void 0&&(r=0),typeof e!="string"&&(e=e.toString());let i=new Buffer(e,"utf8"),s=i.length;if(r+s>t.length)throw new RangeError("encoding overruns Buffer");return i.copy(t,r),t[r+s]=0,s+1}},Nc=class extends Ue{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t){if(!Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");return t===void 0&&(t=0),e.length-t}decode(e,t,r){t===void 0&&(t=0);let i=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");return e.slice(t,t+i).toString("utf-8")}encode(e,t,r){r===void 0&&(r=0),typeof e!="string"&&(e=e.toString());let i=new Buffer(e,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(r+s>t.length)throw new RangeError("encoding overruns Buffer");return i.copy(t,r),s}},Bc=class extends Ue{constructor(e,t){super(0,t),this.value=e}decode(e,t,r){return this.value}encode(e,t,r){return 0}};re.ExternalLayout=Qt;re.GreedyCount=wc;re.OffsetLayout=fo;re.UInt=Sn;re.UIntBE=Mn;re.Int=Ar;re.IntBE=jr;re.Float=Ec;re.FloatBE=Ac;re.Double=Rc;re.DoubleBE=vc;re.Sequence=xc;re.Structure=Sc;re.UnionDiscriminator=ho;re.UnionLayoutDiscriminator=fs;re.Union=po;re.VariantLayout=Ic;re.BitStructure=yo;re.BitField=xi;re.Boolean=kc;re.Blob=Tc;re.CString=Oc;re.UTF8=Nc;re.Constant=Bc;re.greedy=((n,e)=>new wc(n,e));re.offset=((n,e,t)=>new fo(n,e,t));re.u8=(n=>new Sn(1,n));re.u16=(n=>new Sn(2,n));re.u24=(n=>new Sn(3,n));re.u32=(n=>new Sn(4,n));re.u40=(n=>new Sn(5,n));re.u48=(n=>new Sn(6,n));re.nu64=(n=>new Df(n));re.u16be=(n=>new Mn(2,n));re.u24be=(n=>new Mn(3,n));re.u32be=(n=>new Mn(4,n));re.u40be=(n=>new Mn(5,n));re.u48be=(n=>new Mn(6,n));re.nu64be=(n=>new Hf(n));re.s8=(n=>new Ar(1,n));re.s16=(n=>new Ar(2,n));re.s24=(n=>new Ar(3,n));re.s32=(n=>new Ar(4,n));re.s40=(n=>new Ar(5,n));re.s48=(n=>new Ar(6,n));re.ns64=(n=>new zf(n));re.s16be=(n=>new jr(2,n));re.s24be=(n=>new jr(3,n));re.s32be=(n=>new jr(4,n));re.s40be=(n=>new jr(5,n));re.s48be=(n=>new jr(6,n));re.ns64be=(n=>new Ff(n));re.f32=(n=>new Ec(n));re.f32be=(n=>new Ac(n));re.f64=(n=>new Rc(n));re.f64be=(n=>new vc(n));re.struct=((n,e,t)=>new Sc(n,e,t));re.bits=((n,e,t)=>new yo(n,e,t));re.seq=((n,e,t)=>new xc(n,e,t));re.union=((n,e,t)=>new po(n,e,t));re.unionLayoutDiscriminator=((n,e)=>new fs(n,e));re.blob=((n,e)=>new Tc(n,e));re.cstr=(n=>new Oc(n));re.utf8=((n,e)=>new Nc(n,e));re.const=((n,e)=>new Bc(n,e))});var Dg=Ee(le=>{"use strict";var Sv=le&&le.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(le,"__esModule",{value:!0});le.map=le.array=le.rustEnum=le.str=le.vecU8=le.tagged=le.vec=le.bool=le.option=le.publicKey=le.i256=le.u256=le.i128=le.u128=le.i64=le.u64=le.struct=le.f64=le.f32=le.i32=le.u32=le.i16=le.u16=le.i8=le.u8=void 0;var Je=qf(),Iv=bc(),kv=Sv(Wi()),Rr=qf();Object.defineProperty(le,"u8",{enumerable:!0,get:function(){return Rr.u8}});Object.defineProperty(le,"i8",{enumerable:!0,get:function(){return Rr.s8}});Object.defineProperty(le,"u16",{enumerable:!0,get:function(){return Rr.u16}});Object.defineProperty(le,"i16",{enumerable:!0,get:function(){return Rr.s16}});Object.defineProperty(le,"u32",{enumerable:!0,get:function(){return Rr.u32}});Object.defineProperty(le,"i32",{enumerable:!0,get:function(){return Rr.s32}});Object.defineProperty(le,"f32",{enumerable:!0,get:function(){return Rr.f32}});Object.defineProperty(le,"f64",{enumerable:!0,get:function(){return Rr.f64}});Object.defineProperty(le,"struct",{enumerable:!0,get:function(){return Rr.struct}});var Zr=class extends Je.Layout{constructor(e,t,r){super(e,r),this.blob=(0,Je.blob)(e),this.signed=t}decode(e,t=0){let r=new kv.default(this.blob.decode(e,t),10,"le");return this.signed?r.fromTwos(this.span*8).clone():r}encode(e,t,r=0){return this.signed&&(e=e.toTwos(this.span*8)),this.blob.encode(e.toArrayLike(Buffer,"le",this.span),t,r)}};function Pg(n){return new Zr(8,!1,n)}le.u64=Pg;function Tv(n){return new Zr(8,!0,n)}le.i64=Tv;function Ov(n){return new Zr(16,!1,n)}le.u128=Ov;function Nv(n){return new Zr(16,!0,n)}le.i128=Nv;function Bv(n){return new Zr(32,!1,n)}le.u256=Bv;function Cv(n){return new Zr(32,!0,n)}le.i256=Cv;var ir=class extends Je.Layout{constructor(e,t,r,i){super(e.span,i),this.layout=e,this.decoder=t,this.encoder=r}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,r){return this.layout.encode(this.encoder(e),t,r)}getSpan(e,t){return this.layout.getSpan(e,t)}};function Mv(n){return new ir((0,Je.blob)(32),e=>new Iv.PublicKey(e),e=>e.toBuffer(),n)}le.publicKey=Mv;var Vf=class extends Je.Layout{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=(0,Je.u8)()}encode(e,t,r=0){return e==null?this.discriminator.encode(0,t,r):(this.discriminator.encode(1,t,r),this.layout.encode(e,t,r+1)+1)}decode(e,t=0){let r=this.discriminator.decode(e,t);if(r===0)return null;if(r===1)return this.layout.decode(e,t+1);throw new Error("Invalid option "+this.property)}getSpan(e,t=0){let r=this.discriminator.decode(e,t);if(r===0)return 1;if(r===1)return this.layout.getSpan(e,t+1)+1;throw new Error("Invalid option "+this.property)}};function Lv(n,e){return new Vf(n,e)}le.option=Lv;function Pv(n){return new ir((0,Je.u8)(),Uv,Dv,n)}le.bool=Pv;function Uv(n){if(n===0)return!1;if(n===1)return!0;throw new Error("Invalid bool: "+n)}function Dv(n){return n?1:0}function Hv(n,e){let t=(0,Je.u32)("length"),r=(0,Je.struct)([t,(0,Je.seq)(n,(0,Je.offset)(t,-t.span),"values")]);return new ir(r,({values:i})=>i,i=>({values:i}),e)}le.vec=Hv;function zv(n,e,t){let r=(0,Je.struct)([Pg("tag"),e.replicate("data")]);function i({tag:s,data:o}){if(!s.eq(n))throw new Error("Invalid tag, expected: "+n.toString("hex")+", got: "+s.toString("hex"));return o}return new ir(r,i,s=>({tag:n,data:s}),t)}le.tagged=zv;function Ug(n){let e=(0,Je.u32)("length"),t=(0,Je.struct)([e,(0,Je.blob)((0,Je.offset)(e,-e.span),"data")]);return new ir(t,({data:r})=>r,r=>({data:r}),n)}le.vecU8=Ug;function Fv(n){return new ir(Ug(),e=>e.toString("utf-8"),e=>Buffer.from(e,"utf-8"),n)}le.str=Fv;function Kv(n,e,t){let r=(0,Je.union)(t??(0,Je.u8)(),e);return n.forEach((i,s)=>r.addVariant(s,i,i.property)),r}le.rustEnum=Kv;function qv(n,e,t){let r=(0,Je.struct)([(0,Je.seq)(n,e,"values")]);return new ir(r,({values:i})=>i,i=>({values:i}),t)}le.array=qv;var $f=class extends Je.Layout{constructor(e,t,r){super(e.span+t.span,r),this.keyLayout=e,this.valueLayout=t}decode(e,t){t=t||0;let r=this.keyLayout.decode(e,t),i=this.valueLayout.decode(e,t+this.keyLayout.getSpan(e,t));return[r,i]}encode(e,t,r){r=r||0;let i=this.keyLayout.encode(e[0],t,r),s=this.valueLayout.encode(e[1],t,r+i);return i+s}getSpan(e,t){return this.keyLayout.getSpan(e,t)+this.valueLayout.getSpan(e,t)}};function Vv(n,e,t){let r=(0,Je.u32)("length"),i=(0,Je.struct)([r,(0,Je.seq)(new $f(n,e),(0,Je.offset)(r,-r.span),"values")]);return new ir(i,({values:s})=>new Map(s),s=>({values:Array.from(s.entries())}),t)}le.map=Vv});var f_=Ee((VO,xh)=>{"use strict";var kI=Object.prototype.hasOwnProperty,fn="~";function Lo(){}Object.create&&(Lo.prototype=Object.create(null),new Lo().__proto__||(fn=!1));function TI(n,e,t){this.fn=n,this.context=e,this.once=t||!1}function l_(n,e,t,r,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var s=new TI(t,r||n,i),o=fn?fn+e:e;return n._events[o]?n._events[o].fn?n._events[o]=[n._events[o],s]:n._events[o].push(s):(n._events[o]=s,n._eventsCount++),n}function Jc(n,e){--n._eventsCount===0?n._events=new Lo:delete n._events[e]}function en(){this._events=new Lo,this._eventsCount=0}en.prototype.eventNames=function(){var e=[],t,r;if(this._eventsCount===0)return e;for(r in t=this._events)kI.call(t,r)&&e.push(fn?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};en.prototype.listeners=function(e){var t=fn?fn+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o};en.prototype.listenerCount=function(e){var t=fn?fn+e:e,r=this._events[t];return r?r.fn?1:r.length:0};en.prototype.emit=function(e,t,r,i,s,o){var a=fn?fn+e:e;if(!this._events[a])return!1;var u=this._events[a],f=arguments.length,d,m;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),f){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,s),!0;case 6:return u.fn.call(u.context,t,r,i,s,o),!0}for(m=1,d=new Array(f-1);m<f;m++)d[m-1]=arguments[m];u.fn.apply(u.context,d)}else{var _=u.length,g;for(m=0;m<_;m++)switch(u[m].once&&this.removeListener(e,u[m].fn,void 0,!0),f){case 1:u[m].fn.call(u[m].context);break;case 2:u[m].fn.call(u[m].context,t);break;case 3:u[m].fn.call(u[m].context,t,r);break;case 4:u[m].fn.call(u[m].context,t,r,i);break;default:if(!d)for(g=1,d=new Array(f-1);g<f;g++)d[g-1]=arguments[g];u[m].fn.apply(u[m].context,d)}}return!0};en.prototype.on=function(e,t,r){return l_(this,e,t,r,!1)};en.prototype.once=function(e,t,r){return l_(this,e,t,r,!0)};en.prototype.removeListener=function(e,t,r,i){var s=fn?fn+e:e;if(!this._events[s])return this;if(!t)return Jc(this,s),this;var o=this._events[s];if(o.fn)o.fn===t&&(!i||o.once)&&(!r||o.context===r)&&Jc(this,s);else{for(var a=0,u=[],f=o.length;a<f;a++)(o[a].fn!==t||i&&!o[a].once||r&&o[a].context!==r)&&u.push(o[a]);u.length?this._events[s]=u.length===1?u[0]:u:Jc(this,s)}return this};en.prototype.removeAllListeners=function(e){var t;return e?(t=fn?fn+e:e,this._events[t]&&Jc(this,t)):(this._events=new Lo,this._eventsCount=0),this};en.prototype.off=en.prototype.removeListener;en.prototype.addListener=en.prototype.on;en.prefixed=fn;en.EventEmitter=en;typeof xh<"u"&&(xh.exports=en)});var wd={};Td(wd,{AccountClient:()=>yu,AnchorError:()=>iu,AnchorProvider:()=>ru,BN:()=>uw.default,BorshAccountsCoder:()=>au,BorshCoder:()=>Ho,BorshEventCoder:()=>cu,BorshInstructionCoder:()=>ou,DISCRIMINATOR_SIZE:()=>Li,EventManager:()=>gu,EventParser:()=>zo,IdlError:()=>Pn,LangErrorCode:()=>Q,LangErrorMessage:()=>Xb,MethodsBuilderFactory:()=>_u,Native:()=>fd,Program:()=>Ss,ProgramError:()=>su,ProgramErrorStack:()=>vs,SystemCoder:()=>pu,getProvider:()=>Do,parseIdlErrors:()=>E_,setProvider:()=>ak,splitArgsAndCtx:()=>Vo,toInstruction:()=>A_,translateAddress:()=>vn,translateError:()=>bd,utils:()=>Kk,validateAccounts:()=>dd,web3:()=>OI});var tn=lr(Fi()),Be=lr(bc()),OI=lr(bc()),ni=lr(Wi()),uw=lr(Wi()),Pi=lr(_a()),__=lr(Lg()),se=lr(Dg());function $v(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Pc(n,...e){if(!$v(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function Wf(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function Hg(n,e){Pc(n);let t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function go(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function Uc(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function Ln(n,e){return n<<32-e|n>>>e}function Wv(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function Gf(n){return typeof n=="string"&&(n=Wv(n)),Pc(n),n}var Lc=class{};function zg(n){let e=r=>n().update(Gf(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function Gv(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);let i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),u=r?4:0,f=r?0:4;n.setUint32(e+u,o,r),n.setUint32(e+f,a,r)}function Fg(n,e,t){return n&e^~n&t}function Kg(n,e,t){return n&e^n&t^e&t}var Dc=class extends Lc{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Uc(this.buffer)}update(e){Wf(this),e=Gf(e),Pc(e);let{view:t,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){let a=Math.min(i-this.pos,s-o);if(a===i){let u=Uc(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Wf(this),Hg(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:s}=this,{pos:o}=this;t[o++]=128,go(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let m=o;m<i;m++)t[m]=0;Gv(r,i-8,BigInt(this.length*8),s),this.process(r,0);let a=Uc(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let f=u/4,d=this.get();if(f>d.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<f;m++)a.setUint32(4*m,d[m],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}},vr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);var jv=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Yr=new Uint32Array(64),Hc=class extends Dc{constructor(e=32){super(64,e,8,!1),this.A=vr[0]|0,this.B=vr[1]|0,this.C=vr[2]|0,this.D=vr[3]|0,this.E=vr[4]|0,this.F=vr[5]|0,this.G=vr[6]|0,this.H=vr[7]|0}get(){let{A:e,B:t,C:r,D:i,E:s,F:o,G:a,H:u}=this;return[e,t,r,i,s,o,a,u]}set(e,t,r,i,s,o,a,u){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,t){for(let m=0;m<16;m++,t+=4)Yr[m]=e.getUint32(t,!1);for(let m=16;m<64;m++){let _=Yr[m-15],g=Yr[m-2],E=Ln(_,7)^Ln(_,18)^_>>>3,S=Ln(g,17)^Ln(g,19)^g>>>10;Yr[m]=S+Yr[m-7]+E+Yr[m-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:u,G:f,H:d}=this;for(let m=0;m<64;m++){let _=Ln(a,6)^Ln(a,11)^Ln(a,25),g=d+_+Fg(a,u,f)+jv[m]+Yr[m]|0,S=(Ln(r,2)^Ln(r,13)^Ln(r,22))+Kg(r,i,s)|0;d=f,f=u,u=a,a=o+g|0,o=s,s=i,i=r,r=g+S|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,f=f+this.G|0,d=d+this.H|0,this.set(r,i,s,o,a,u,f,d)}roundClean(){go(Yr)}destroy(){this.set(0,0,0,0,0,0,0,0),go(this.buffer)}};var qg=zg(()=>new Hc);var jf=qg;function ms(n){let e=n.length;for(;--e>=0;)n[e]=0}var Zv=0,km=1,Yv=2,Xv=3,Jv=258,_h=29,No=256,Ro=No+1+_h,ps=30,bh=19,Tm=2*Ro+1,Si=15,Zf=16,Qv=7,wh=256,Om=16,Nm=17,Bm=18,uh=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),$c=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ex=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Cm=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),tx=512,Sr=new Array((Ro+2)*2);ms(Sr);var wo=new Array(ps*2);ms(wo);var vo=new Array(tx);ms(vo);var xo=new Array(Jv-Xv+1);ms(xo);var Eh=new Array(_h);ms(Eh);var Wc=new Array(ps);ms(Wc);function Yf(n,e,t,r,i){this.static_tree=n,this.extra_bits=e,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=n&&n.length}var Mm,Lm,Pm;function Xf(n,e){this.dyn_tree=n,this.max_code=0,this.stat_desc=e}var Um=n=>n<256?vo[n]:vo[256+(n>>>7)],So=(n,e)=>{n.pending_buf[n.pending++]=e&255,n.pending_buf[n.pending++]=e>>>8&255},_n=(n,e,t)=>{n.bi_valid>Zf-t?(n.bi_buf|=e<<n.bi_valid&65535,So(n,n.bi_buf),n.bi_buf=e>>Zf-n.bi_valid,n.bi_valid+=t-Zf):(n.bi_buf|=e<<n.bi_valid&65535,n.bi_valid+=t)},or=(n,e,t)=>{_n(n,t[e*2],t[e*2+1])},Dm=(n,e)=>{let t=0;do t|=n&1,n>>>=1,t<<=1;while(--e>0);return t>>>1},nx=n=>{n.bi_valid===16?(So(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},rx=(n,e)=>{let t=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,u=e.stat_desc.max_length,f,d,m,_,g,E,S=0;for(_=0;_<=Si;_++)n.bl_count[_]=0;for(t[n.heap[n.heap_max]*2+1]=0,f=n.heap_max+1;f<Tm;f++)d=n.heap[f],_=t[t[d*2+1]*2+1]+1,_>u&&(_=u,S++),t[d*2+1]=_,!(d>r)&&(n.bl_count[_]++,g=0,d>=a&&(g=o[d-a]),E=t[d*2],n.opt_len+=E*(_+g),s&&(n.static_len+=E*(i[d*2+1]+g)));if(S!==0){do{for(_=u-1;n.bl_count[_]===0;)_--;n.bl_count[_]--,n.bl_count[_+1]+=2,n.bl_count[u]--,S-=2}while(S>0);for(_=u;_!==0;_--)for(d=n.bl_count[_];d!==0;)m=n.heap[--f],!(m>r)&&(t[m*2+1]!==_&&(n.opt_len+=(_-t[m*2+1])*t[m*2],t[m*2+1]=_),d--)}},Hm=(n,e,t)=>{let r=new Array(Si+1),i=0,s,o;for(s=1;s<=Si;s++)i=i+t[s-1]<<1,r[s]=i;for(o=0;o<=e;o++){let a=n[o*2+1];a!==0&&(n[o*2]=Dm(r[a]++,a))}},ix=()=>{let n,e,t,r,i,s=new Array(Si+1);for(t=0,r=0;r<_h-1;r++)for(Eh[r]=t,n=0;n<1<<uh[r];n++)xo[t++]=r;for(xo[t-1]=r,i=0,r=0;r<16;r++)for(Wc[r]=i,n=0;n<1<<$c[r];n++)vo[i++]=r;for(i>>=7;r<ps;r++)for(Wc[r]=i<<7,n=0;n<1<<$c[r]-7;n++)vo[256+i++]=r;for(e=0;e<=Si;e++)s[e]=0;for(n=0;n<=143;)Sr[n*2+1]=8,n++,s[8]++;for(;n<=255;)Sr[n*2+1]=9,n++,s[9]++;for(;n<=279;)Sr[n*2+1]=7,n++,s[7]++;for(;n<=287;)Sr[n*2+1]=8,n++,s[8]++;for(Hm(Sr,Ro+1,s),n=0;n<ps;n++)wo[n*2+1]=5,wo[n*2]=Dm(n,5);Mm=new Yf(Sr,uh,No+1,Ro,Si),Lm=new Yf(wo,$c,0,ps,Si),Pm=new Yf(new Array(0),ex,0,bh,Qv)},zm=n=>{let e;for(e=0;e<Ro;e++)n.dyn_ltree[e*2]=0;for(e=0;e<ps;e++)n.dyn_dtree[e*2]=0;for(e=0;e<bh;e++)n.bl_tree[e*2]=0;n.dyn_ltree[wh*2]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},Fm=n=>{n.bi_valid>8?So(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},Vg=(n,e,t,r)=>{let i=e*2,s=t*2;return n[i]<n[s]||n[i]===n[s]&&r[e]<=r[t]},Jf=(n,e,t)=>{let r=n.heap[t],i=t<<1;for(;i<=n.heap_len&&(i<n.heap_len&&Vg(e,n.heap[i+1],n.heap[i],n.depth)&&i++,!Vg(e,r,n.heap[i],n.depth));)n.heap[t]=n.heap[i],t=i,i<<=1;n.heap[t]=r},$g=(n,e,t)=>{let r,i,s=0,o,a;if(n.sym_next!==0)do r=n.pending_buf[n.sym_buf+s++]&255,r+=(n.pending_buf[n.sym_buf+s++]&255)<<8,i=n.pending_buf[n.sym_buf+s++],r===0?or(n,i,e):(o=xo[i],or(n,o+No+1,e),a=uh[o],a!==0&&(i-=Eh[o],_n(n,i,a)),r--,o=Um(r),or(n,o,t),a=$c[o],a!==0&&(r-=Wc[o],_n(n,r,a)));while(s<n.sym_next);or(n,wh,e)},lh=(n,e)=>{let t=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems,o,a,u=-1,f;for(n.heap_len=0,n.heap_max=Tm,o=0;o<s;o++)t[o*2]!==0?(n.heap[++n.heap_len]=u=o,n.depth[o]=0):t[o*2+1]=0;for(;n.heap_len<2;)f=n.heap[++n.heap_len]=u<2?++u:0,t[f*2]=1,n.depth[f]=0,n.opt_len--,i&&(n.static_len-=r[f*2+1]);for(e.max_code=u,o=n.heap_len>>1;o>=1;o--)Jf(n,t,o);f=s;do o=n.heap[1],n.heap[1]=n.heap[n.heap_len--],Jf(n,t,1),a=n.heap[1],n.heap[--n.heap_max]=o,n.heap[--n.heap_max]=a,t[f*2]=t[o*2]+t[a*2],n.depth[f]=(n.depth[o]>=n.depth[a]?n.depth[o]:n.depth[a])+1,t[o*2+1]=t[a*2+1]=f,n.heap[1]=f++,Jf(n,t,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],rx(n,e),Hm(t,u,n.bl_count)},Wg=(n,e,t)=>{let r,i=-1,s,o=e[1],a=0,u=7,f=4;for(o===0&&(u=138,f=3),e[(t+1)*2+1]=65535,r=0;r<=t;r++)s=o,o=e[(r+1)*2+1],!(++a<u&&s===o)&&(a<f?n.bl_tree[s*2]+=a:s!==0?(s!==i&&n.bl_tree[s*2]++,n.bl_tree[Om*2]++):a<=10?n.bl_tree[Nm*2]++:n.bl_tree[Bm*2]++,a=0,i=s,o===0?(u=138,f=3):s===o?(u=6,f=3):(u=7,f=4))},Gg=(n,e,t)=>{let r,i=-1,s,o=e[1],a=0,u=7,f=4;for(o===0&&(u=138,f=3),r=0;r<=t;r++)if(s=o,o=e[(r+1)*2+1],!(++a<u&&s===o)){if(a<f)do or(n,s,n.bl_tree);while(--a!==0);else s!==0?(s!==i&&(or(n,s,n.bl_tree),a--),or(n,Om,n.bl_tree),_n(n,a-3,2)):a<=10?(or(n,Nm,n.bl_tree),_n(n,a-3,3)):(or(n,Bm,n.bl_tree),_n(n,a-11,7));a=0,i=s,o===0?(u=138,f=3):s===o?(u=6,f=3):(u=7,f=4)}},sx=n=>{let e;for(Wg(n,n.dyn_ltree,n.l_desc.max_code),Wg(n,n.dyn_dtree,n.d_desc.max_code),lh(n,n.bl_desc),e=bh-1;e>=3&&n.bl_tree[Cm[e]*2+1]===0;e--);return n.opt_len+=3*(e+1)+5+5+4,e},ox=(n,e,t,r)=>{let i;for(_n(n,e-257,5),_n(n,t-1,5),_n(n,r-4,4),i=0;i<r;i++)_n(n,n.bl_tree[Cm[i]*2+1],3);Gg(n,n.dyn_ltree,e-1),Gg(n,n.dyn_dtree,t-1)},ax=n=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&n.dyn_ltree[t*2]!==0)return 0;if(n.dyn_ltree[18]!==0||n.dyn_ltree[20]!==0||n.dyn_ltree[26]!==0)return 1;for(t=32;t<No;t++)if(n.dyn_ltree[t*2]!==0)return 1;return 0},jg=!1,cx=n=>{jg||(ix(),jg=!0),n.l_desc=new Xf(n.dyn_ltree,Mm),n.d_desc=new Xf(n.dyn_dtree,Lm),n.bl_desc=new Xf(n.bl_tree,Pm),n.bi_buf=0,n.bi_valid=0,zm(n)},Km=(n,e,t,r)=>{_n(n,(Zv<<1)+(r?1:0),3),Fm(n),So(n,t),So(n,~t),t&&n.pending_buf.set(n.window.subarray(e,e+t),n.pending),n.pending+=t},ux=n=>{_n(n,km<<1,3),or(n,wh,Sr),nx(n)},lx=(n,e,t,r)=>{let i,s,o=0;n.level>0?(n.strm.data_type===2&&(n.strm.data_type=ax(n)),lh(n,n.l_desc),lh(n,n.d_desc),o=sx(n),i=n.opt_len+3+7>>>3,s=n.static_len+3+7>>>3,s<=i&&(i=s)):i=s=t+5,t+4<=i&&e!==-1?Km(n,e,t,r):n.strategy===4||s===i?(_n(n,(km<<1)+(r?1:0),3),$g(n,Sr,wo)):(_n(n,(Yv<<1)+(r?1:0),3),ox(n,n.l_desc.max_code+1,n.d_desc.max_code+1,o+1),$g(n,n.dyn_ltree,n.dyn_dtree)),zm(n),r&&Fm(n)},fx=(n,e,t)=>(n.pending_buf[n.sym_buf+n.sym_next++]=e,n.pending_buf[n.sym_buf+n.sym_next++]=e>>8,n.pending_buf[n.sym_buf+n.sym_next++]=t,e===0?n.dyn_ltree[t*2]++:(n.matches++,e--,n.dyn_ltree[(xo[t]+No+1)*2]++,n.dyn_dtree[Um(e)*2]++),n.sym_next===n.sym_end),hx=cx,dx=Km,px=lx,yx=fx,gx=ux,mx={_tr_init:hx,_tr_stored_block:dx,_tr_flush_block:px,_tr_tally:yx,_tr_align:gx},_x=(n,e,t,r)=>{let i=n&65535|0,s=n>>>16&65535|0,o=0;for(;t!==0;){o=t>2e3?2e3:t,t-=o;do i=i+e[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0},Io=_x,bx=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},wx=new Uint32Array(bx()),Ex=(n,e,t,r)=>{let i=wx,s=r+t;n^=-1;for(let o=r;o<s;o++)n=n>>>8^i[(n^e[o])&255];return n^-1},Mt=Ex,Ti={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},_s={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:Ax,_tr_stored_block:fh,_tr_flush_block:Rx,_tr_tally:Qr,_tr_align:vx}=mx,{Z_NO_FLUSH:ei,Z_PARTIAL_FLUSH:xx,Z_FULL_FLUSH:Sx,Z_FINISH:In,Z_BLOCK:Zg,Z_OK:qt,Z_STREAM_END:Yg,Z_STREAM_ERROR:ar,Z_DATA_ERROR:Ix,Z_BUF_ERROR:Qf,Z_DEFAULT_COMPRESSION:kx,Z_FILTERED:Tx,Z_HUFFMAN_ONLY:zc,Z_RLE:Ox,Z_FIXED:Nx,Z_DEFAULT_STRATEGY:Bx,Z_UNKNOWN:Cx,Z_DEFLATED:Zc}=_s,Mx=9,Lx=15,Px=8,Ux=29,Dx=256,hh=Dx+1+Ux,Hx=30,zx=19,Fx=2*hh+1,Kx=15,ke=3,Jr=258,cr=Jr+ke+1,qx=32,ys=42,Ah=57,dh=69,ph=73,yh=91,gh=103,Ii=113,_o=666,ln=1,bs=2,Oi=3,ws=4,Vx=3,ki=(n,e)=>(n.msg=Ti[e],e),Xg=n=>n*2-(n>4?9:0),Xr=n=>{let e=n.length;for(;--e>=0;)n[e]=0},$x=n=>{let e,t,r,i=n.w_size;e=n.hash_size,r=e;do t=n.head[--r],n.head[r]=t>=i?t-i:0;while(--e);e=i,r=e;do t=n.prev[--r],n.prev[r]=t>=i?t-i:0;while(--e)},Wx=(n,e,t)=>(e<<n.hash_shift^t)&n.hash_mask,ti=Wx,An=n=>{let e=n.state,t=e.pending;t>n.avail_out&&(t=n.avail_out),t!==0&&(n.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),n.next_out),n.next_out+=t,e.pending_out+=t,n.total_out+=t,n.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},Rn=(n,e)=>{Rx(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,e),n.block_start=n.strstart,An(n.strm)},De=(n,e)=>{n.pending_buf[n.pending++]=e},mo=(n,e)=>{n.pending_buf[n.pending++]=e>>>8&255,n.pending_buf[n.pending++]=e&255},mh=(n,e,t,r)=>{let i=n.avail_in;return i>r&&(i=r),i===0?0:(n.avail_in-=i,e.set(n.input.subarray(n.next_in,n.next_in+i),t),n.state.wrap===1?n.adler=Io(n.adler,e,i,t):n.state.wrap===2&&(n.adler=Mt(n.adler,e,i,t)),n.next_in+=i,n.total_in+=i,i)},qm=(n,e)=>{let t=n.max_chain_length,r=n.strstart,i,s,o=n.prev_length,a=n.nice_match,u=n.strstart>n.w_size-cr?n.strstart-(n.w_size-cr):0,f=n.window,d=n.w_mask,m=n.prev,_=n.strstart+Jr,g=f[r+o-1],E=f[r+o];n.prev_length>=n.good_match&&(t>>=2),a>n.lookahead&&(a=n.lookahead);do if(i=e,!(f[i+o]!==E||f[i+o-1]!==g||f[i]!==f[r]||f[++i]!==f[r+1])){r+=2,i++;do;while(f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&r<_);if(s=Jr-(_-r),r=_-Jr,s>o){if(n.match_start=e,o=s,s>=a)break;g=f[r+o-1],E=f[r+o]}}while((e=m[e&d])>u&&--t!==0);return o<=n.lookahead?o:n.lookahead},gs=n=>{let e=n.w_size,t,r,i;do{if(r=n.window_size-n.lookahead-n.strstart,n.strstart>=e+(e-cr)&&(n.window.set(n.window.subarray(e,e+e-r),0),n.match_start-=e,n.strstart-=e,n.block_start-=e,n.insert>n.strstart&&(n.insert=n.strstart),$x(n),r+=e),n.strm.avail_in===0)break;if(t=mh(n.strm,n.window,n.strstart+n.lookahead,r),n.lookahead+=t,n.lookahead+n.insert>=ke)for(i=n.strstart-n.insert,n.ins_h=n.window[i],n.ins_h=ti(n,n.ins_h,n.window[i+1]);n.insert&&(n.ins_h=ti(n,n.ins_h,n.window[i+ke-1]),n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,n.insert--,!(n.lookahead+n.insert<ke)););}while(n.lookahead<cr&&n.strm.avail_in!==0)},Vm=(n,e)=>{let t=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,r,i,s,o=0,a=n.strm.avail_in;do{if(r=65535,s=n.bi_valid+42>>3,n.strm.avail_out<s||(s=n.strm.avail_out-s,i=n.strstart-n.block_start,r>i+n.strm.avail_in&&(r=i+n.strm.avail_in),r>s&&(r=s),r<t&&(r===0&&e!==In||e===ei||r!==i+n.strm.avail_in)))break;o=e===In&&r===i+n.strm.avail_in?1:0,fh(n,0,0,o),n.pending_buf[n.pending-4]=r,n.pending_buf[n.pending-3]=r>>8,n.pending_buf[n.pending-2]=~r,n.pending_buf[n.pending-1]=~r>>8,An(n.strm),i&&(i>r&&(i=r),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+i),n.strm.next_out),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i,n.block_start+=i,r-=i),r&&(mh(n.strm,n.strm.output,n.strm.next_out,r),n.strm.next_out+=r,n.strm.avail_out-=r,n.strm.total_out+=r)}while(o===0);return a-=n.strm.avail_in,a&&(a>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=a&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-a,n.strm.next_in),n.strstart),n.strstart+=a,n.insert+=a>n.w_size-n.insert?n.w_size-n.insert:a),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),o?ws:e!==ei&&e!==In&&n.strm.avail_in===0&&n.strstart===n.block_start?bs:(s=n.window_size-n.strstart,n.strm.avail_in>s&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,s+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),s>n.strm.avail_in&&(s=n.strm.avail_in),s&&(mh(n.strm,n.window,n.strstart,s),n.strstart+=s,n.insert+=s>n.w_size-n.insert?n.w_size-n.insert:s),n.high_water<n.strstart&&(n.high_water=n.strstart),s=n.bi_valid+42>>3,s=n.pending_buf_size-s>65535?65535:n.pending_buf_size-s,t=s>n.w_size?n.w_size:s,i=n.strstart-n.block_start,(i>=t||(i||e===In)&&e!==ei&&n.strm.avail_in===0&&i<=s)&&(r=i>s?s:i,o=e===In&&n.strm.avail_in===0&&r===i?1:0,fh(n,n.block_start,r,o),n.block_start+=r,An(n.strm)),o?Oi:ln)},eh=(n,e)=>{let t,r;for(;;){if(n.lookahead<cr){if(gs(n),n.lookahead<cr&&e===ei)return ln;if(n.lookahead===0)break}if(t=0,n.lookahead>=ke&&(n.ins_h=ti(n,n.ins_h,n.window[n.strstart+ke-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),t!==0&&n.strstart-t<=n.w_size-cr&&(n.match_length=qm(n,t)),n.match_length>=ke)if(r=Qr(n,n.strstart-n.match_start,n.match_length-ke),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=ke){n.match_length--;do n.strstart++,n.ins_h=ti(n,n.ins_h,n.window[n.strstart+ke-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=ti(n,n.ins_h,n.window[n.strstart+1]);else r=Qr(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(r&&(Rn(n,!1),n.strm.avail_out===0))return ln}return n.insert=n.strstart<ke-1?n.strstart:ke-1,e===In?(Rn(n,!0),n.strm.avail_out===0?Oi:ws):n.sym_next&&(Rn(n,!1),n.strm.avail_out===0)?ln:bs},hs=(n,e)=>{let t,r,i;for(;;){if(n.lookahead<cr){if(gs(n),n.lookahead<cr&&e===ei)return ln;if(n.lookahead===0)break}if(t=0,n.lookahead>=ke&&(n.ins_h=ti(n,n.ins_h,n.window[n.strstart+ke-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=ke-1,t!==0&&n.prev_length<n.max_lazy_match&&n.strstart-t<=n.w_size-cr&&(n.match_length=qm(n,t),n.match_length<=5&&(n.strategy===Tx||n.match_length===ke&&n.strstart-n.match_start>4096)&&(n.match_length=ke-1)),n.prev_length>=ke&&n.match_length<=n.prev_length){i=n.strstart+n.lookahead-ke,r=Qr(n,n.strstart-1-n.prev_match,n.prev_length-ke),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=i&&(n.ins_h=ti(n,n.ins_h,n.window[n.strstart+ke-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=ke-1,n.strstart++,r&&(Rn(n,!1),n.strm.avail_out===0))return ln}else if(n.match_available){if(r=Qr(n,0,n.window[n.strstart-1]),r&&Rn(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return ln}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(r=Qr(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<ke-1?n.strstart:ke-1,e===In?(Rn(n,!0),n.strm.avail_out===0?Oi:ws):n.sym_next&&(Rn(n,!1),n.strm.avail_out===0)?ln:bs},Gx=(n,e)=>{let t,r,i,s,o=n.window;for(;;){if(n.lookahead<=Jr){if(gs(n),n.lookahead<=Jr&&e===ei)return ln;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=ke&&n.strstart>0&&(i=n.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=n.strstart+Jr;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);n.match_length=Jr-(s-i),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=ke?(t=Qr(n,1,n.match_length-ke),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(t=Qr(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),t&&(Rn(n,!1),n.strm.avail_out===0))return ln}return n.insert=0,e===In?(Rn(n,!0),n.strm.avail_out===0?Oi:ws):n.sym_next&&(Rn(n,!1),n.strm.avail_out===0)?ln:bs},jx=(n,e)=>{let t;for(;;){if(n.lookahead===0&&(gs(n),n.lookahead===0)){if(e===ei)return ln;break}if(n.match_length=0,t=Qr(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,t&&(Rn(n,!1),n.strm.avail_out===0))return ln}return n.insert=0,e===In?(Rn(n,!0),n.strm.avail_out===0?Oi:ws):n.sym_next&&(Rn(n,!1),n.strm.avail_out===0)?ln:bs};function sr(n,e,t,r,i){this.good_length=n,this.max_lazy=e,this.nice_length=t,this.max_chain=r,this.func=i}var bo=[new sr(0,0,0,0,Vm),new sr(4,4,8,4,eh),new sr(4,5,16,8,eh),new sr(4,6,32,32,eh),new sr(4,4,16,16,hs),new sr(8,16,32,32,hs),new sr(8,16,128,128,hs),new sr(8,32,128,256,hs),new sr(32,128,258,1024,hs),new sr(32,258,258,4096,hs)],Zx=n=>{n.window_size=2*n.w_size,Xr(n.head),n.max_lazy_match=bo[n.level].max_lazy,n.good_match=bo[n.level].good_length,n.nice_match=bo[n.level].nice_length,n.max_chain_length=bo[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=ke-1,n.match_available=0,n.ins_h=0};function Yx(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Zc,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Fx*2),this.dyn_dtree=new Uint16Array((2*Hx+1)*2),this.bl_tree=new Uint16Array((2*zx+1)*2),Xr(this.dyn_ltree),Xr(this.dyn_dtree),Xr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Kx+1),this.heap=new Uint16Array(2*hh+1),Xr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*hh+1),Xr(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Bo=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.status!==ys&&e.status!==Ah&&e.status!==dh&&e.status!==ph&&e.status!==yh&&e.status!==gh&&e.status!==Ii&&e.status!==_o?1:0},$m=n=>{if(Bo(n))return ki(n,ar);n.total_in=n.total_out=0,n.data_type=Cx;let e=n.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?Ah:e.wrap?ys:Ii,n.adler=e.wrap===2?0:1,e.last_flush=-2,Ax(e),qt},Wm=n=>{let e=$m(n);return e===qt&&Zx(n.state),e},Xx=(n,e)=>Bo(n)||n.state.wrap!==2?ar:(n.state.gzhead=e,qt),Gm=(n,e,t,r,i,s)=>{if(!n)return ar;let o=1;if(e===kx&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>Mx||t!==Zc||r<8||r>15||e<0||e>9||s<0||s>Nx||r===8&&o!==1)return ki(n,ar);r===8&&(r=9);let a=new Yx;return n.state=a,a.strm=n,a.status=ys,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+ke-1)/ke),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=s,a.method=t,Wm(n)},Jx=(n,e)=>Gm(n,e,Zc,Lx,Px,Bx),Qx=(n,e)=>{if(Bo(n)||e>Zg||e<0)return n?ki(n,ar):ar;let t=n.state;if(!n.output||n.avail_in!==0&&!n.input||t.status===_o&&e!==In)return ki(n,n.avail_out===0?Qf:ar);let r=t.last_flush;if(t.last_flush=e,t.pending!==0){if(An(n),n.avail_out===0)return t.last_flush=-1,qt}else if(n.avail_in===0&&Xg(e)<=Xg(r)&&e!==In)return ki(n,Qf);if(t.status===_o&&n.avail_in!==0)return ki(n,Qf);if(t.status===ys&&t.wrap===0&&(t.status=Ii),t.status===ys){let i=Zc+(t.w_bits-8<<4)<<8,s=-1;if(t.strategy>=zc||t.level<2?s=0:t.level<6?s=1:t.level===6?s=2:s=3,i|=s<<6,t.strstart!==0&&(i|=qx),i+=31-i%31,mo(t,i),t.strstart!==0&&(mo(t,n.adler>>>16),mo(t,n.adler&65535)),n.adler=1,t.status=Ii,An(n),t.pending!==0)return t.last_flush=-1,qt}if(t.status===Ah){if(n.adler=0,De(t,31),De(t,139),De(t,8),t.gzhead)De(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),De(t,t.gzhead.time&255),De(t,t.gzhead.time>>8&255),De(t,t.gzhead.time>>16&255),De(t,t.gzhead.time>>24&255),De(t,t.level===9?2:t.strategy>=zc||t.level<2?4:0),De(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(De(t,t.gzhead.extra.length&255),De(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(n.adler=Mt(n.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=dh;else if(De(t,0),De(t,0),De(t,0),De(t,0),De(t,0),De(t,t.level===9?2:t.strategy>=zc||t.level<2?4:0),De(t,Vx),t.status=Ii,An(n),t.pending!==0)return t.last_flush=-1,qt}if(t.status===dh){if(t.gzhead.extra){let i=t.pending,s=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+s>t.pending_buf_size;){let a=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(n.adler=Mt(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=a,An(n),t.pending!==0)return t.last_flush=-1,qt;i=0,s-=a}let o=new Uint8Array(t.gzhead.extra);t.pending_buf.set(o.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending+=s,t.gzhead.hcrc&&t.pending>i&&(n.adler=Mt(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=ph}if(t.status===ph){if(t.gzhead.name){let i=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=Mt(n.adler,t.pending_buf,t.pending-i,i)),An(n),t.pending!==0)return t.last_flush=-1,qt;i=0}t.gzindex<t.gzhead.name.length?s=t.gzhead.name.charCodeAt(t.gzindex++)&255:s=0,De(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=Mt(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=yh}if(t.status===yh){if(t.gzhead.comment){let i=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=Mt(n.adler,t.pending_buf,t.pending-i,i)),An(n),t.pending!==0)return t.last_flush=-1,qt;i=0}t.gzindex<t.gzhead.comment.length?s=t.gzhead.comment.charCodeAt(t.gzindex++)&255:s=0,De(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=Mt(n.adler,t.pending_buf,t.pending-i,i))}t.status=gh}if(t.status===gh){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(An(n),t.pending!==0))return t.last_flush=-1,qt;De(t,n.adler&255),De(t,n.adler>>8&255),n.adler=0}if(t.status=Ii,An(n),t.pending!==0)return t.last_flush=-1,qt}if(n.avail_in!==0||t.lookahead!==0||e!==ei&&t.status!==_o){let i=t.level===0?Vm(t,e):t.strategy===zc?jx(t,e):t.strategy===Ox?Gx(t,e):bo[t.level].func(t,e);if((i===Oi||i===ws)&&(t.status=_o),i===ln||i===Oi)return n.avail_out===0&&(t.last_flush=-1),qt;if(i===bs&&(e===xx?vx(t):e!==Zg&&(fh(t,0,0,!1),e===Sx&&(Xr(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),An(n),n.avail_out===0))return t.last_flush=-1,qt}return e!==In?qt:t.wrap<=0?Yg:(t.wrap===2?(De(t,n.adler&255),De(t,n.adler>>8&255),De(t,n.adler>>16&255),De(t,n.adler>>24&255),De(t,n.total_in&255),De(t,n.total_in>>8&255),De(t,n.total_in>>16&255),De(t,n.total_in>>24&255)):(mo(t,n.adler>>>16),mo(t,n.adler&65535)),An(n),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?qt:Yg)},eS=n=>{if(Bo(n))return ar;let e=n.state.status;return n.state=null,e===Ii?ki(n,Ix):qt},tS=(n,e)=>{let t=e.length;if(Bo(n))return ar;let r=n.state,i=r.wrap;if(i===2||i===1&&r.status!==ys||r.lookahead)return ar;if(i===1&&(n.adler=Io(n.adler,e,t,0)),r.wrap=0,t>=r.w_size){i===0&&(Xr(r.head),r.strstart=0,r.block_start=0,r.insert=0);let u=new Uint8Array(r.w_size);u.set(e.subarray(t-r.w_size,t),0),e=u,t=r.w_size}let s=n.avail_in,o=n.next_in,a=n.input;for(n.avail_in=t,n.next_in=0,n.input=e,gs(r);r.lookahead>=ke;){let u=r.strstart,f=r.lookahead-(ke-1);do r.ins_h=ti(r,r.ins_h,r.window[u+ke-1]),r.prev[u&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=u,u++;while(--f);r.strstart=u,r.lookahead=ke-1,gs(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=ke-1,r.match_available=0,n.next_in=o,n.input=a,n.avail_in=s,r.wrap=i,qt},nS=Jx,rS=Gm,iS=Wm,sS=$m,oS=Xx,aS=Qx,cS=eS,uS=tS,lS="pako deflate (from Nodeca project)",Eo={deflateInit:nS,deflateInit2:rS,deflateReset:iS,deflateResetKeep:sS,deflateSetHeader:oS,deflate:aS,deflateEnd:cS,deflateSetDictionary:uS,deflateInfo:lS},fS=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),hS=function(n){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let r in t)fS(t,r)&&(n[r]=t[r])}}return n},dS=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;let t=new Uint8Array(e);for(let r=0,i=0,s=n.length;r<s;r++){let o=n[r];t.set(o,i),i+=o.length}return t},Yc={assign:hS,flattenChunks:dS},jm=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{jm=!1}var ko=new Uint8Array(256);for(let n=0;n<256;n++)ko[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;ko[254]=ko[254]=1;var pS=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,s,o=n.length,a=0;for(i=0;i<o;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<o&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<o&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e},yS=(n,e)=>{if(e<65534&&n.subarray&&jm)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t},gS=(n,e)=>{let t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i,s=new Array(t*2);for(i=0,r=0;r<t;){let o=n[r++];if(o<128){s[i++]=o;continue}let a=ko[o];if(a>4){s[i++]=65533,r+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&r<t;)o=o<<6|n[r++]&63,a--;if(a>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return yS(s,i)},mS=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+ko[n[t]]>e?t:e},To={string2buf:pS,buf2string:gS,utf8border:mS};function _S(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Zm=_S,Ym=Object.prototype.toString,{Z_NO_FLUSH:bS,Z_SYNC_FLUSH:wS,Z_FULL_FLUSH:ES,Z_FINISH:AS,Z_OK:Gc,Z_STREAM_END:RS,Z_DEFAULT_COMPRESSION:vS,Z_DEFAULT_STRATEGY:xS,Z_DEFLATED:SS}=_s;function Co(n){this.options=Yc.assign({level:vS,method:SS,chunkSize:16384,windowBits:15,memLevel:8,strategy:xS},n||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zm,this.strm.avail_out=0;let t=Eo.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==Gc)throw new Error(Ti[t]);if(e.header&&Eo.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(typeof e.dictionary=="string"?r=To.string2buf(e.dictionary):Ym.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,t=Eo.deflateSetDictionary(this.strm,r),t!==Gc)throw new Error(Ti[t]);this._dict_set=!0}}Co.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i,s;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?AS:bS,typeof n=="string"?t.input=To.string2buf(n):Ym.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(s===wS||s===ES)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=Eo.deflate(t,s),i===RS)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=Eo.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Gc;if(t.avail_out===0){this.onData(t.output);continue}if(s>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Co.prototype.onData=function(n){this.chunks.push(n)};Co.prototype.onEnd=function(n){n===Gc&&(this.result=Yc.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function Rh(n,e){let t=new Co(e);if(t.push(n,!0),t.err)throw t.msg||Ti[t.err];return t.result}function IS(n,e){return e=e||{},e.raw=!0,Rh(n,e)}function kS(n,e){return e=e||{},e.gzip=!0,Rh(n,e)}var TS=Co,OS=Rh,NS=IS,BS=kS,CS=_s,MS={Deflate:TS,deflate:OS,deflateRaw:NS,gzip:BS,constants:CS},Fc=16209,LS=16191,PS=function(e,t){let r,i,s,o,a,u,f,d,m,_,g,E,S,k,O,L,M,C,$,G,q,j,H,V,K=e.state;r=e.next_in,H=e.input,i=r+(e.avail_in-5),s=e.next_out,V=e.output,o=s-(t-e.avail_out),a=s+(e.avail_out-257),u=K.dmax,f=K.wsize,d=K.whave,m=K.wnext,_=K.window,g=K.hold,E=K.bits,S=K.lencode,k=K.distcode,O=(1<<K.lenbits)-1,L=(1<<K.distbits)-1;e:do{E<15&&(g+=H[r++]<<E,E+=8,g+=H[r++]<<E,E+=8),M=S[g&O];t:for(;;){if(C=M>>>24,g>>>=C,E-=C,C=M>>>16&255,C===0)V[s++]=M&65535;else if(C&16){$=M&65535,C&=15,C&&(E<C&&(g+=H[r++]<<E,E+=8),$+=g&(1<<C)-1,g>>>=C,E-=C),E<15&&(g+=H[r++]<<E,E+=8,g+=H[r++]<<E,E+=8),M=k[g&L];n:for(;;){if(C=M>>>24,g>>>=C,E-=C,C=M>>>16&255,C&16){if(G=M&65535,C&=15,E<C&&(g+=H[r++]<<E,E+=8,E<C&&(g+=H[r++]<<E,E+=8)),G+=g&(1<<C)-1,G>u){e.msg="invalid distance too far back",K.mode=Fc;break e}if(g>>>=C,E-=C,C=s-o,G>C){if(C=G-C,C>d&&K.sane){e.msg="invalid distance too far back",K.mode=Fc;break e}if(q=0,j=_,m===0){if(q+=f-C,C<$){$-=C;do V[s++]=_[q++];while(--C);q=s-G,j=V}}else if(m<C){if(q+=f+m-C,C-=m,C<$){$-=C;do V[s++]=_[q++];while(--C);if(q=0,m<$){C=m,$-=C;do V[s++]=_[q++];while(--C);q=s-G,j=V}}}else if(q+=m-C,C<$){$-=C;do V[s++]=_[q++];while(--C);q=s-G,j=V}for(;$>2;)V[s++]=j[q++],V[s++]=j[q++],V[s++]=j[q++],$-=3;$&&(V[s++]=j[q++],$>1&&(V[s++]=j[q++]))}else{q=s-G;do V[s++]=V[q++],V[s++]=V[q++],V[s++]=V[q++],$-=3;while($>2);$&&(V[s++]=V[q++],$>1&&(V[s++]=V[q++]))}}else if((C&64)===0){M=k[(M&65535)+(g&(1<<C)-1)];continue n}else{e.msg="invalid distance code",K.mode=Fc;break e}break}}else if((C&64)===0){M=S[(M&65535)+(g&(1<<C)-1)];continue t}else if(C&32){K.mode=LS;break e}else{e.msg="invalid literal/length code",K.mode=Fc;break e}break}}while(r<i&&s<a);$=E>>3,r-=$,E-=$<<3,g&=(1<<E)-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=s<a?257+(a-s):257-(s-a),K.hold=g,K.bits=E},ds=15,Jg=852,Qg=592,em=0,th=1,tm=2,US=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),DS=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),HS=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),zS=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),FS=(n,e,t,r,i,s,o,a)=>{let u=a.bits,f=0,d=0,m=0,_=0,g=0,E=0,S=0,k=0,O=0,L=0,M,C,$,G,q,j=null,H,V=new Uint16Array(ds+1),K=new Uint16Array(ds+1),J=null,w,c,h;for(f=0;f<=ds;f++)V[f]=0;for(d=0;d<r;d++)V[e[t+d]]++;for(g=u,_=ds;_>=1&&V[_]===0;_--);if(g>_&&(g=_),_===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(m=1;m<_&&V[m]===0;m++);for(g<m&&(g=m),k=1,f=1;f<=ds;f++)if(k<<=1,k-=V[f],k<0)return-1;if(k>0&&(n===em||_!==1))return-1;for(K[1]=0,f=1;f<ds;f++)K[f+1]=K[f]+V[f];for(d=0;d<r;d++)e[t+d]!==0&&(o[K[e[t+d]]++]=d);if(n===em?(j=J=o,H=20):n===th?(j=US,J=DS,H=257):(j=HS,J=zS,H=0),L=0,d=0,f=m,q=s,E=g,S=0,$=-1,O=1<<g,G=O-1,n===th&&O>Jg||n===tm&&O>Qg)return 1;for(;;){w=f-S,o[d]+1<H?(c=0,h=o[d]):o[d]>=H?(c=J[o[d]-H],h=j[o[d]-H]):(c=96,h=0),M=1<<f-S,C=1<<E,m=C;do C-=M,i[q+(L>>S)+C]=w<<24|c<<16|h|0;while(C!==0);for(M=1<<f-1;L&M;)M>>=1;if(M!==0?(L&=M-1,L+=M):L=0,d++,--V[f]===0){if(f===_)break;f=e[t+o[d]]}if(f>g&&(L&G)!==$){for(S===0&&(S=g),q+=m,E=f-S,k=1<<E;E+S<_&&(k-=V[E+S],!(k<=0));)E++,k<<=1;if(O+=1<<E,n===th&&O>Jg||n===tm&&O>Qg)return 1;$=L&G,i[$]=g<<24|E<<16|q-s|0}}return L!==0&&(i[q+L]=f-S<<24|64<<16|0),a.bits=g,0},Ao=FS,KS=0,Xm=1,Jm=2,{Z_FINISH:nm,Z_BLOCK:qS,Z_TREES:Kc,Z_OK:Ni,Z_STREAM_END:VS,Z_NEED_DICT:$S,Z_STREAM_ERROR:kn,Z_DATA_ERROR:Qm,Z_MEM_ERROR:e_,Z_BUF_ERROR:WS,Z_DEFLATED:rm}=_s,Xc=16180,im=16181,sm=16182,om=16183,am=16184,cm=16185,um=16186,lm=16187,fm=16188,hm=16189,jc=16190,xr=16191,nh=16192,dm=16193,rh=16194,pm=16195,ym=16196,gm=16197,mm=16198,qc=16199,Vc=16200,_m=16201,bm=16202,wm=16203,Em=16204,Am=16205,ih=16206,Rm=16207,vm=16208,tt=16209,t_=16210,n_=16211,GS=852,jS=592,ZS=15,YS=ZS,xm=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function XS(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Bi=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.mode<Xc||e.mode>n_?1:0},r_=n=>{if(Bi(n))return kn;let e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=Xc,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(GS),e.distcode=e.distdyn=new Int32Array(jS),e.sane=1,e.back=-1,Ni},i_=n=>{if(Bi(n))return kn;let e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,r_(n)},s_=(n,e)=>{let t;if(Bi(n))return kn;let r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?kn:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,i_(n))},o_=(n,e)=>{if(!n)return kn;let t=new XS;n.state=t,t.strm=n,t.window=null,t.mode=Xc;let r=s_(n,e);return r!==Ni&&(n.state=null),r},JS=n=>o_(n,YS),Sm=!0,sh,oh,QS=n=>{if(Sm){sh=new Int32Array(512),oh=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(Ao(Xm,n.lens,0,288,sh,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;Ao(Jm,n.lens,0,32,oh,0,n.work,{bits:5}),Sm=!1}n.lencode=sh,n.lenbits=9,n.distcode=oh,n.distbits=5},a_=(n,e,t,r)=>{let i,s=n.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(t-r,t-r+i),s.wnext),r-=i,r?(s.window.set(e.subarray(t-r,t),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},eI=(n,e)=>{let t,r,i,s,o,a,u,f,d,m,_,g,E,S,k=0,O,L,M,C,$,G,q,j,H=new Uint8Array(4),V,K,J=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Bi(n)||!n.output||!n.input&&n.avail_in!==0)return kn;t=n.state,t.mode===xr&&(t.mode=nh),o=n.next_out,i=n.output,u=n.avail_out,s=n.next_in,r=n.input,a=n.avail_in,f=t.hold,d=t.bits,m=a,_=u,j=Ni;e:for(;;)switch(t.mode){case Xc:if(t.wrap===0){t.mode=nh;break}for(;d<16;){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}if(t.wrap&2&&f===35615){t.wbits===0&&(t.wbits=15),t.check=0,H[0]=f&255,H[1]=f>>>8&255,t.check=Mt(t.check,H,2,0),f=0,d=0,t.mode=im;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){n.msg="incorrect header check",t.mode=tt;break}if((f&15)!==rm){n.msg="unknown compression method",t.mode=tt;break}if(f>>>=4,d-=4,q=(f&15)+8,t.wbits===0&&(t.wbits=q),q>15||q>t.wbits){n.msg="invalid window size",t.mode=tt;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=f&512?hm:xr,f=0,d=0;break;case im:for(;d<16;){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}if(t.flags=f,(t.flags&255)!==rm){n.msg="unknown compression method",t.mode=tt;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=tt;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&t.wrap&4&&(H[0]=f&255,H[1]=f>>>8&255,t.check=Mt(t.check,H,2,0)),f=0,d=0,t.mode=sm;case sm:for(;d<32;){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}t.head&&(t.head.time=f),t.flags&512&&t.wrap&4&&(H[0]=f&255,H[1]=f>>>8&255,H[2]=f>>>16&255,H[3]=f>>>24&255,t.check=Mt(t.check,H,4,0)),f=0,d=0,t.mode=om;case om:for(;d<16;){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&t.wrap&4&&(H[0]=f&255,H[1]=f>>>8&255,t.check=Mt(t.check,H,2,0)),f=0,d=0,t.mode=am;case am:if(t.flags&1024){for(;d<16;){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&t.wrap&4&&(H[0]=f&255,H[1]=f>>>8&255,t.check=Mt(t.check,H,2,0)),f=0,d=0}else t.head&&(t.head.extra=null);t.mode=cm;case cm:if(t.flags&1024&&(g=t.length,g>a&&(g=a),g&&(t.head&&(q=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(s,s+g),q)),t.flags&512&&t.wrap&4&&(t.check=Mt(t.check,r,g,s)),a-=g,s+=g,t.length-=g),t.length))break e;t.length=0,t.mode=um;case um:if(t.flags&2048){if(a===0)break e;g=0;do q=r[s+g++],t.head&&q&&t.length<65536&&(t.head.name+=String.fromCharCode(q));while(q&&g<a);if(t.flags&512&&t.wrap&4&&(t.check=Mt(t.check,r,g,s)),a-=g,s+=g,q)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=lm;case lm:if(t.flags&4096){if(a===0)break e;g=0;do q=r[s+g++],t.head&&q&&t.length<65536&&(t.head.comment+=String.fromCharCode(q));while(q&&g<a);if(t.flags&512&&t.wrap&4&&(t.check=Mt(t.check,r,g,s)),a-=g,s+=g,q)break e}else t.head&&(t.head.comment=null);t.mode=fm;case fm:if(t.flags&512){for(;d<16;){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}if(t.wrap&4&&f!==(t.check&65535)){n.msg="header crc mismatch",t.mode=tt;break}f=0,d=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=xr;break;case hm:for(;d<32;){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}n.adler=t.check=xm(f),f=0,d=0,t.mode=jc;case jc:if(t.havedict===0)return n.next_out=o,n.avail_out=u,n.next_in=s,n.avail_in=a,t.hold=f,t.bits=d,$S;n.adler=t.check=1,t.mode=xr;case xr:if(e===qS||e===Kc)break e;case nh:if(t.last){f>>>=d&7,d-=d&7,t.mode=ih;break}for(;d<3;){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}switch(t.last=f&1,f>>>=1,d-=1,f&3){case 0:t.mode=dm;break;case 1:if(QS(t),t.mode=qc,e===Kc){f>>>=2,d-=2;break e}break;case 2:t.mode=ym;break;case 3:n.msg="invalid block type",t.mode=tt}f>>>=2,d-=2;break;case dm:for(f>>>=d&7,d-=d&7;d<32;){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}if((f&65535)!==(f>>>16^65535)){n.msg="invalid stored block lengths",t.mode=tt;break}if(t.length=f&65535,f=0,d=0,t.mode=rh,e===Kc)break e;case rh:t.mode=pm;case pm:if(g=t.length,g){if(g>a&&(g=a),g>u&&(g=u),g===0)break e;i.set(r.subarray(s,s+g),o),a-=g,s+=g,u-=g,o+=g,t.length-=g;break}t.mode=xr;break;case ym:for(;d<14;){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}if(t.nlen=(f&31)+257,f>>>=5,d-=5,t.ndist=(f&31)+1,f>>>=5,d-=5,t.ncode=(f&15)+4,f>>>=4,d-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=tt;break}t.have=0,t.mode=gm;case gm:for(;t.have<t.ncode;){for(;d<3;){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}t.lens[J[t.have++]]=f&7,f>>>=3,d-=3}for(;t.have<19;)t.lens[J[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,V={bits:t.lenbits},j=Ao(KS,t.lens,0,19,t.lencode,0,t.work,V),t.lenbits=V.bits,j){n.msg="invalid code lengths set",t.mode=tt;break}t.have=0,t.mode=mm;case mm:for(;t.have<t.nlen+t.ndist;){for(;k=t.lencode[f&(1<<t.lenbits)-1],O=k>>>24,L=k>>>16&255,M=k&65535,!(O<=d);){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}if(M<16)f>>>=O,d-=O,t.lens[t.have++]=M;else{if(M===16){for(K=O+2;d<K;){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}if(f>>>=O,d-=O,t.have===0){n.msg="invalid bit length repeat",t.mode=tt;break}q=t.lens[t.have-1],g=3+(f&3),f>>>=2,d-=2}else if(M===17){for(K=O+3;d<K;){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}f>>>=O,d-=O,q=0,g=3+(f&7),f>>>=3,d-=3}else{for(K=O+7;d<K;){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}f>>>=O,d-=O,q=0,g=11+(f&127),f>>>=7,d-=7}if(t.have+g>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=tt;break}for(;g--;)t.lens[t.have++]=q}}if(t.mode===tt)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=tt;break}if(t.lenbits=9,V={bits:t.lenbits},j=Ao(Xm,t.lens,0,t.nlen,t.lencode,0,t.work,V),t.lenbits=V.bits,j){n.msg="invalid literal/lengths set",t.mode=tt;break}if(t.distbits=6,t.distcode=t.distdyn,V={bits:t.distbits},j=Ao(Jm,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,V),t.distbits=V.bits,j){n.msg="invalid distances set",t.mode=tt;break}if(t.mode=qc,e===Kc)break e;case qc:t.mode=Vc;case Vc:if(a>=6&&u>=258){n.next_out=o,n.avail_out=u,n.next_in=s,n.avail_in=a,t.hold=f,t.bits=d,PS(n,_),o=n.next_out,i=n.output,u=n.avail_out,s=n.next_in,r=n.input,a=n.avail_in,f=t.hold,d=t.bits,t.mode===xr&&(t.back=-1);break}for(t.back=0;k=t.lencode[f&(1<<t.lenbits)-1],O=k>>>24,L=k>>>16&255,M=k&65535,!(O<=d);){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}if(L&&(L&240)===0){for(C=O,$=L,G=M;k=t.lencode[G+((f&(1<<C+$)-1)>>C)],O=k>>>24,L=k>>>16&255,M=k&65535,!(C+O<=d);){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}f>>>=C,d-=C,t.back+=C}if(f>>>=O,d-=O,t.back+=O,t.length=M,L===0){t.mode=Am;break}if(L&32){t.back=-1,t.mode=xr;break}if(L&64){n.msg="invalid literal/length code",t.mode=tt;break}t.extra=L&15,t.mode=_m;case _m:if(t.extra){for(K=t.extra;d<K;){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,d-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=bm;case bm:for(;k=t.distcode[f&(1<<t.distbits)-1],O=k>>>24,L=k>>>16&255,M=k&65535,!(O<=d);){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}if((L&240)===0){for(C=O,$=L,G=M;k=t.distcode[G+((f&(1<<C+$)-1)>>C)],O=k>>>24,L=k>>>16&255,M=k&65535,!(C+O<=d);){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}f>>>=C,d-=C,t.back+=C}if(f>>>=O,d-=O,t.back+=O,L&64){n.msg="invalid distance code",t.mode=tt;break}t.offset=M,t.extra=L&15,t.mode=wm;case wm:if(t.extra){for(K=t.extra;d<K;){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,d-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=tt;break}t.mode=Em;case Em:if(u===0)break e;if(g=_-u,t.offset>g){if(g=t.offset-g,g>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=tt;break}g>t.wnext?(g-=t.wnext,E=t.wsize-g):E=t.wnext-g,g>t.length&&(g=t.length),S=t.window}else S=i,E=o-t.offset,g=t.length;g>u&&(g=u),u-=g,t.length-=g;do i[o++]=S[E++];while(--g);t.length===0&&(t.mode=Vc);break;case Am:if(u===0)break e;i[o++]=t.length,u--,t.mode=Vc;break;case ih:if(t.wrap){for(;d<32;){if(a===0)break e;a--,f|=r[s++]<<d,d+=8}if(_-=u,n.total_out+=_,t.total+=_,t.wrap&4&&_&&(n.adler=t.check=t.flags?Mt(t.check,i,_,o-_):Io(t.check,i,_,o-_)),_=u,t.wrap&4&&(t.flags?f:xm(f))!==t.check){n.msg="incorrect data check",t.mode=tt;break}f=0,d=0}t.mode=Rm;case Rm:if(t.wrap&&t.flags){for(;d<32;){if(a===0)break e;a--,f+=r[s++]<<d,d+=8}if(t.wrap&4&&f!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=tt;break}f=0,d=0}t.mode=vm;case vm:j=VS;break e;case tt:j=Qm;break e;case t_:return e_;case n_:default:return kn}return n.next_out=o,n.avail_out=u,n.next_in=s,n.avail_in=a,t.hold=f,t.bits=d,(t.wsize||_!==n.avail_out&&t.mode<tt&&(t.mode<ih||e!==nm))&&a_(n,n.output,n.next_out,_-n.avail_out),m-=n.avail_in,_-=n.avail_out,n.total_in+=m,n.total_out+=_,t.total+=_,t.wrap&4&&_&&(n.adler=t.check=t.flags?Mt(t.check,i,_,n.next_out-_):Io(t.check,i,_,n.next_out-_)),n.data_type=t.bits+(t.last?64:0)+(t.mode===xr?128:0)+(t.mode===qc||t.mode===rh?256:0),(m===0&&_===0||e===nm)&&j===Ni&&(j=WS),j},tI=n=>{if(Bi(n))return kn;let e=n.state;return e.window&&(e.window=null),n.state=null,Ni},nI=(n,e)=>{if(Bi(n))return kn;let t=n.state;return(t.wrap&2)===0?kn:(t.head=e,e.done=!1,Ni)},rI=(n,e)=>{let t=e.length,r,i,s;return Bi(n)||(r=n.state,r.wrap!==0&&r.mode!==jc)?kn:r.mode===jc&&(i=1,i=Io(i,e,t,0),i!==r.check)?Qm:(s=a_(n,e,t,t),s?(r.mode=t_,e_):(r.havedict=1,Ni))},iI=i_,sI=s_,oI=r_,aI=JS,cI=o_,uI=eI,lI=tI,fI=nI,hI=rI,dI="pako inflate (from Nodeca project)",Ir={inflateReset:iI,inflateReset2:sI,inflateResetKeep:oI,inflateInit:aI,inflateInit2:cI,inflate:uI,inflateEnd:lI,inflateGetHeader:fI,inflateSetDictionary:hI,inflateInfo:dI};function pI(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var yI=pI,c_=Object.prototype.toString,{Z_NO_FLUSH:gI,Z_FINISH:mI,Z_OK:Oo,Z_STREAM_END:ah,Z_NEED_DICT:ch,Z_STREAM_ERROR:_I,Z_DATA_ERROR:Im,Z_MEM_ERROR:bI}=_s;function Mo(n){this.options=Yc.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zm,this.strm.avail_out=0;let t=Ir.inflateInit2(this.strm,e.windowBits);if(t!==Oo)throw new Error(Ti[t]);if(this.header=new yI,Ir.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=To.string2buf(e.dictionary):c_.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Ir.inflateSetDictionary(this.strm,e.dictionary),t!==Oo)))throw new Error(Ti[t])}Mo.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i=this.options.dictionary,s,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?mI:gI,c_.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),s=Ir.inflate(t,o),s===ch&&i&&(s=Ir.inflateSetDictionary(t,i),s===Oo?s=Ir.inflate(t,o):s===Im&&(s=ch));t.avail_in>0&&s===ah&&t.state.wrap>0&&n[t.next_in]!==0;)Ir.inflateReset(t),s=Ir.inflate(t,o);switch(s){case _I:case Im:case ch:case bI:return this.onEnd(s),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(t.avail_out===0||s===ah))if(this.options.to==="string"){let u=To.utf8border(t.output,t.next_out),f=t.next_out-u,d=To.buf2string(t.output,u);t.next_out=f,t.avail_out=r-f,f&&t.output.set(t.output.subarray(u,u+f),0),this.onData(d)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===Oo&&a===0)){if(s===ah)return s=Ir.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Mo.prototype.onData=function(n){this.chunks.push(n)};Mo.prototype.onEnd=function(n){n===Oo&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Yc.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function vh(n,e){let t=new Mo(e);if(t.push(n),t.err)throw t.msg||Ti[t.err];return t.result}function wI(n,e){return e=e||{},e.raw=!0,vh(n,e)}var EI=Mo,AI=vh,RI=wI,vI=vh,xI=_s,SI={Inflate:EI,inflate:AI,inflateRaw:RI,ungzip:vI,constants:xI},{Deflate:PO,deflate:UO,deflateRaw:DO,gzip:HO}=MS,{Inflate:zO,inflate:II,inflateRaw:FO,ungzip:KO}=SI;var u_=II;var b_=lr(f_());function NI(n,e){return Array.apply(0,new Array(Math.ceil(n.length/e))).map((t,r)=>n.slice(r*e,(r+1)*e))}var Ci=n=>"version"in n;function BI(n){return n.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"0x")}function CI(n){n.indexOf("0x")===0&&(n=n.substr(2)),n.length%2===1&&(n="0"+n);let e=n.match(/.{2}/g);return e===null?tn.Buffer.from([]):tn.Buffer.from(e.map(t=>parseInt(t,16)))}var MI=Object.freeze({__proto__:null,encode:BI,decode:CI});function w_(n){return new TextDecoder("utf-8").decode(n)}function LI(n){return new TextEncoder().encode(n)}var PI=Object.freeze({__proto__:null,decode:w_,encode:LI});function Th(n){return Pi.default.encode(n)}function UI(n){return Pi.default.decode(n)}var DI=Object.freeze({__proto__:null,encode:Th,decode:UI});function Oh(n){return n.toString("base64")}function hd(n){return tn.Buffer.from(n,"base64")}var HI=Object.freeze({__proto__:null,encode:Oh,decode:hd}),zI=Object.freeze({__proto__:null,hex:MI,utf8:PI,bs58:DI,base64:HI});function Es(n){return"accounts"in n}async function FI(n){let e=(await Be.PublicKey.findProgramAddress([],n))[0];return await Be.PublicKey.createWithSeed(e,KI(),n)}function KI(){return"anchor:idl"}var qI=se.struct([se.publicKey("authority"),se.vecU8("data")]);function VI(n){return qI.decode(n)}function $I(n){let e=["name","path","account","relations","generic"],t=s=>s.split(".").map(__.default).join("."),r=s=>{for(let o in s){let a=s[o];e.includes(o)?s[o]=Array.isArray(a)?a.map(t):t(a):typeof a=="object"&&r(a)}},i=structuredClone(n);return r(i),i}function As(n,e,t,r){return n?.length?n[0].name?t(n):r(n):e()}function E_(n){let e=new Map;return n.errors&&n.errors.forEach(t=>{var r;let i=(r=t.msg)!==null&&r!==void 0?r:t.name;e.set(t.code,i)}),e}function A_(n,...e){if(n.args.length!=e.length)throw new Error("Invalid argument length");let t={},r=0;return n.args.forEach(i=>{t[i.name]=e[r],r+=1}),t}function dd(n,e={}){n.forEach(t=>{if(Es(t))dd(t.accounts,e[t.name]);else if(!e[t.name])throw new Error(`Account \`${t.name}\` not provided.`)})}function vn(n){return n instanceof Be.PublicKey?n:new Be.PublicKey(n)}var Nh=class extends TypeError{constructor(e,t){let r,{message:i,...s}=e,{path:o}=e,a=o.length===0?i:"At path: "+o.join(".")+" -- "+i;super(a),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>{var u;return(u=r)!=null?u:r=[e,...t()]}}};function WI(n){return Rs(n)&&typeof n[Symbol.iterator]=="function"}function Rs(n){return typeof n=="object"&&n!=null}function ii(n){return typeof n=="string"?JSON.stringify(n):""+n}function GI(n){let{done:e,value:t}=n.next();return e?void 0:t}function jI(n,e,t,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});let{path:i,branch:s}=e,{type:o}=t,{refinement:a,message:u="Expected a value of type `"+o+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+ii(r)+"`"}=n;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...n,message:u}}function*h_(n,e,t,r){WI(n)||(n=[n]);for(let i of n){let s=jI(i,e,t,r);s&&(yield s)}}function*pd(n,e,t){t===void 0&&(t={});let{path:r=[],branch:i=[n],coerce:s=!1,mask:o=!1}=t,a={path:r,branch:i};if(s&&(n=e.coercer(n,a),o&&e.type!=="type"&&Rs(e.schema)&&Rs(n)&&!Array.isArray(n)))for(let f in n)e.schema[f]===void 0&&delete n[f];let u=!0;for(let f of e.validator(n,a))u=!1,yield[f,void 0];for(let[f,d,m]of e.entries(n,a)){let _=pd(d,m,{path:f===void 0?r:[...r,f],branch:f===void 0?i:[...i,d],coerce:s,mask:o});for(let g of _)g[0]?(u=!1,yield[g[0],void 0]):s&&(d=g[1],f===void 0?n=d:n instanceof Map?n.set(f,d):n instanceof Set?n.add(d):Rs(n)&&(n[f]=d))}if(u)for(let f of e.refiner(n,a))u=!1,yield[f,void 0];u&&(yield[void 0,n])}var ur=class{constructor(e){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;let{type:t,schema:r,validator:i,refiner:s,coercer:o=u=>u,entries:a=function*(){}}=e;this.type=t,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(u,f)=>{let d=i(u,f);return h_(d,f,this,u)}:this.validator=()=>[],s?this.refiner=(u,f)=>{let d=s(u,f);return h_(d,f,this,u)}:this.refiner=()=>[]}assert(e){return ZI(e,this)}create(e){return yd(e,this)}is(e){return R_(e,this)}mask(e){return YI(e,this)}validate(e,t){return t===void 0&&(t={}),Fo(e,this,t)}};function ZI(n,e){let t=Fo(n,e);if(t[0])throw t[0]}function yd(n,e){let t=Fo(n,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function YI(n,e){let t=Fo(n,e,{coerce:!0,mask:!0});if(t[0])throw t[0];return t[1]}function R_(n,e){return!Fo(n,e)[0]}function Fo(n,e,t){t===void 0&&(t={});let r=pd(n,e,t),i=GI(r);return i[0]?[new Nh(i[0],function*(){for(let o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Ko(n,e){return new ur({type:n,schema:null,validator:e})}function XI(){return Ko("any",()=>!0)}function Sh(n){return new ur({type:"array",schema:n,*entries(e){if(n&&Array.isArray(e))for(let[t,r]of e.entries())yield[t,r,n]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||"Expected an array value, but received: "+ii(e)}})}function JI(){return Ko("boolean",n=>typeof n=="boolean")}function d_(n){let e=ii(n),t=typeof n;return new ur({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?n:null,validator(r){return r===n||"Expected the literal `"+e+"`, but received: "+ii(r)}})}function Qc(n){return new ur({...n,validator:(e,t)=>e===null||n.validator(e,t),refiner:(e,t)=>e===null||n.refiner(e,t)})}function tu(){return Ko("number",n=>typeof n=="number"&&!isNaN(n)||"Expected a number, but received: "+ii(n))}function nu(n){return new ur({...n,validator:(e,t)=>e===void 0||n.validator(e,t),refiner:(e,t)=>e===void 0||n.refiner(e,t)})}function Mi(){return Ko("string",n=>typeof n=="string"||"Expected a string, but received: "+ii(n))}function ri(n){let e=Object.keys(n);return new ur({type:"type",schema:n,*entries(t){if(Rs(t))for(let r of e)yield[r,t[r],n[r]]},validator(t){return Rs(t)||"Expected an object, but received: "+ii(t)}})}function v_(n){let e=n.map(t=>t.type).join(" | ");return new ur({type:"union",schema:null,coercer(t,r){return(n.find(s=>{let[o]=s.validate(t,{coerce:!0});return!o})||gd()).coercer(t,r)},validator(t,r){let i=[];for(let s of n){let[...o]=pd(t,s,r),[a]=o;if(a[0])for(let[u]of o)u&&i.push(u);else return[]}return["Expected the value to satisfy a union of `"+e+"`, but received: "+ii(t),...i]}})}function gd(){return Ko("unknown",()=>!0)}function QI(n,e,t){return new ur({...n,coercer:(r,i)=>R_(r,e)?n.coercer(t(r,i),i):n.coercer(r,i)})}async function ek(n,e,t,r){n=vn(n),r||(r=Do());let i=new Be.Transaction;if(i.add(new Be.TransactionInstruction({programId:n,keys:e??[],data:t})),r.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");return await r.sendAndConfirm(i,[])}var p_=99;async function tk(n,e,t){return(await md(n,e,t)).map(i=>i?{publicKey:i.publicKey,account:i.account}:null)}async function md(n,e,t){if(e.length<=p_)return await y_(n,e,t);{let r=NI(e,p_);return(await Promise.all(r.map(s=>y_(n,s,t)))).flat()}}async function y_(n,e,t){let r=t??n.commitment,{value:i,context:s}=await n.getMultipleAccountsInfoAndContext(e,r);return i.map((a,u)=>a===null?null:{publicKey:e[u],account:a,context:s})}async function x_(n,e,t,r,i){var s;t&&t.length>0&&e.sign(...t);let o=e._compile(),a=o.serialize(),f=e._serialize(a).toString("base64"),d={encoding:"base64",commitment:r??n.commitment};if(i){let E=(Array.isArray(i)?i:o.nonProgramIds()).map(S=>S.toBase58());d.accounts={encoding:"base64",addresses:E}}t&&t.length>0&&(d.sigVerify=!0);let m=[f,d],_=await n._rpcRequest("simulateTransaction",m),g=yd(_,sk);if("error"in g){let E;if("data"in g.error&&(E=(s=g.error.data)===null||s===void 0?void 0:s.logs,E&&Array.isArray(E))){let S=`
    `,k=S+E.join(S);console.error(g.error.message,k)}throw new Be.SendTransactionError("failed to simulate transaction: "+g.error.message,E)}return g.result}function nk(n){return QI(S_(n),rk,e=>"error"in e?e:{...e,result:yd(e.result,n)})}var rk=S_(gd());function S_(n){return v_([ri({jsonrpc:d_("2.0"),id:Mi(),result:n}),ri({jsonrpc:d_("2.0"),id:Mi(),error:ri({code:gd(),message:Mi(),data:nu(XI())})})])}function ik(n){return nk(ri({context:ri({slot:tu()}),value:n}))}var sk=ik(ri({err:Qc(v_([ri({}),Mi()])),logs:Qc(Sh(Mi())),accounts:nu(Qc(Sh(Qc(ri({executable:JI(),owner:Mi(),lamports:tu(),data:Sh(Mi()),rentEpoch:nu(tu())}))))),unitsConsumed:nu(tu())})),ok=Object.freeze({__proto__:null,invoke:ek,getMultipleAccounts:tk,getMultipleAccountsAndContext:md,simulateTransaction:x_}),ru=class n{constructor(e,t,r=n.defaultOptions()){this.connection=e,this.wallet=t,this.opts=r,this.publicKey=t?.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(e,t=n.defaultOptions()){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,t,r){var i,s,o,a;if(r===void 0&&(r=this.opts),Ci(e))t&&e.sign(t);else if(e.feePayer=(i=e.feePayer)!==null&&i!==void 0?i:this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(r.preflightCommitment)).blockhash,t)for(let f of t)e.partialSign(f);e=await this.wallet.signTransaction(e);let u=e.serialize();try{return await g_(this.connection,u,r)}catch(f){if(f instanceof Uo){let d=Th(Ci(e)?((s=e.signatures)===null||s===void 0?void 0:s[0])||new Uint8Array:(o=e.signature)!==null&&o!==void 0?o:new Uint8Array),m=Ci(e)?0:void 0,_=await this.connection.getTransaction(d,{commitment:"confirmed",maxSupportedTransactionVersion:m});if(_){let g=(a=_.meta)===null||a===void 0?void 0:a.logMessages;throw g?new Be.SendTransactionError(f.message,g):f}else throw f}else throw f}}async sendAll(e,t){var r,i,s;t===void 0&&(t=this.opts);let o=(await this.connection.getLatestBlockhash(t.preflightCommitment)).blockhash,a=e.map(d=>{var m,_;if(Ci(d.tx)){let g=d.tx;return d.signers&&g.sign(d.signers),g}else{let g=d.tx,E=(m=d.signers)!==null&&m!==void 0?m:[];return g.feePayer=(_=g.feePayer)!==null&&_!==void 0?_:this.wallet.publicKey,g.recentBlockhash=o,E.forEach(S=>{g.partialSign(S)}),g}}),u=await this.wallet.signAllTransactions(a),f=[];for(let d=0;d<a.length;d+=1){let m=u[d],_=m.serialize();try{f.push(await g_(this.connection,_,t))}catch(g){if(g instanceof Uo){let E=Th(Ci(m)?((r=m.signatures)===null||r===void 0?void 0:r[0])||new Uint8Array:(i=m.signature)!==null&&i!==void 0?i:new Uint8Array),S=Ci(m)?0:void 0,k=await this.connection.getTransaction(E,{commitment:"confirmed",maxSupportedTransactionVersion:S});if(k){let O=(s=k.meta)===null||s===void 0?void 0:s.logMessages;throw O?new Be.SendTransactionError(g.message,O):g}else throw g}else throw g}}return f}async simulate(e,t,r,i){let s=(await this.connection.getLatestBlockhash(r??this.connection.commitment)).blockhash,o;if(Ci(e)?(t&&t.length>0&&(e.sign(t),e=await this.wallet.signTransaction(e)),o=await this.connection.simulateTransaction(e,{commitment:r})):(e.feePayer=e.feePayer||this.wallet.publicKey,e.recentBlockhash=s,t&&t.length>0&&(e=await this.wallet.signTransaction(e)),o=await x_(this.connection,e,t,r,i)),o.value.err)throw new Bh(o.value);return o.value}},Bh=class extends Error{constructor(e,t){super(t),this.simulationResponse=e}};async function g_(n,e,t){let r=t&&{skipPreflight:t.skipPreflight,preflightCommitment:t.preflightCommitment||t.commitment},i=await n.sendRawTransaction(e,r),s=(await n.confirmTransaction(i,t&&t.commitment)).value;if(s.err)throw new Uo(`Raw transaction ${i} failed (${JSON.stringify(s)})`);return i}var Uo=class extends Error{constructor(e){super(e)}};function ak(n){Ch=n}function Do(){return Ch===null?ru.local():Ch}var Ch=null,ck=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function uk(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var U={};Object.defineProperty(U,"__esModule",{value:!0});var I_=U.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=Rb=U.ANCHOR_ERROR__REQUIRE_VIOLATED=Ab=U.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=Eb=U.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=wb=U.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=bb=U.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=_b=U.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=mb=U.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=gb=U.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=yb=U.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=pb=U.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=db=U.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=hb=U.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=fb=U.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=lb=U.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=ub=U.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=cb=U.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=ab=U.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=ob=U.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=sb=U.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=ib=U.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=rb=U.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=nb=U.ANCHOR_ERROR__CONSTRAINT_SPACE=tb=U.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=eb=U.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=Q_=U.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=J_=U.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=X_=U.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=Y_=U.ANCHOR_ERROR__CONSTRAINT_ZERO=Z_=U.ANCHOR_ERROR__CONSTRAINT_ADDRESS=j_=U.ANCHOR_ERROR__CONSTRAINT_CLOSE=G_=U.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=W_=U.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=$_=U.ANCHOR_ERROR__CONSTRAINT_STATE=V_=U.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=q_=U.ANCHOR_ERROR__CONSTRAINT_SEEDS=K_=U.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=F_=U.ANCHOR_ERROR__CONSTRAINT_OWNER=z_=U.ANCHOR_ERROR__CONSTRAINT_RAW=H_=U.ANCHOR_ERROR__CONSTRAINT_SIGNER=D_=U.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=U_=U.ANCHOR_ERROR__CONSTRAINT_MUT=P_=U.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=L_=U.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=M_=U.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=C_=U.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=B_=U.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=N_=U.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=O_=U.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=T_=U.ANCHOR_ERROR__INSTRUCTION_MISSING=void 0,k_=U.ANCHOR_ERROR__DEPRECATED=Zb=U.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=jb=U.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=Gb=U.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=Wb=U.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=$b=U.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=Vb=U.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=qb=U.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=Kb=U.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=Fb=U.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=zb=U.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=Hb=U.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=Db=U.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=Ub=U.ANCHOR_ERROR__INVALID_PROGRAM_ID=Pb=U.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=Lb=U.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=Mb=U.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=Cb=U.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=Bb=U.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=Nb=U.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=Ob=U.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=Tb=U.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=kb=U.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=Ib=U.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=Sb=U.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=xb=U.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=vb=U.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=void 0,T_=U.ANCHOR_ERROR__INSTRUCTION_MISSING=100,O_=U.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=101,N_=U.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=102,B_=U.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=103,C_=U.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=1e3,M_=U.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=1001,L_=U.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=1002,P_=U.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=1500,U_=U.ANCHOR_ERROR__CONSTRAINT_MUT=2e3,D_=U.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=2001,H_=U.ANCHOR_ERROR__CONSTRAINT_SIGNER=2002,z_=U.ANCHOR_ERROR__CONSTRAINT_RAW=2003,F_=U.ANCHOR_ERROR__CONSTRAINT_OWNER=2004,K_=U.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=2005,q_=U.ANCHOR_ERROR__CONSTRAINT_SEEDS=2006,V_=U.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=2007,$_=U.ANCHOR_ERROR__CONSTRAINT_STATE=2008,W_=U.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=2009,G_=U.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=2010,j_=U.ANCHOR_ERROR__CONSTRAINT_CLOSE=2011,Z_=U.ANCHOR_ERROR__CONSTRAINT_ADDRESS=2012,Y_=U.ANCHOR_ERROR__CONSTRAINT_ZERO=2013,X_=U.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=2014,J_=U.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=2015,Q_=U.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=2016,eb=U.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=2017,tb=U.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=2018,nb=U.ANCHOR_ERROR__CONSTRAINT_SPACE=2019,rb=U.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=2020,ib=U.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=2021,sb=U.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=2022,ob=U.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=2023,ab=U.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=2024,cb=U.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=2025,ub=U.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=2026,lb=U.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=2027,fb=U.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=2028,hb=U.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=2029,db=U.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=2030,pb=U.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=2031,yb=U.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=2032,gb=U.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=2033,mb=U.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=2034,_b=U.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=2035,bb=U.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=2036,wb=U.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=2037,Eb=U.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=2038,Ab=U.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=2039,Rb=U.ANCHOR_ERROR__REQUIRE_VIOLATED=2500;I_=U.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=2501;var vb=U.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=2502,xb=U.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=2503,Sb=U.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=2504,Ib=U.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=2505,kb=U.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=2506,Tb=U.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=3e3,Ob=U.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=3001,Nb=U.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=3002,Bb=U.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=3003,Cb=U.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=3004,Mb=U.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=3005,Lb=U.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=3006,Pb=U.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=3007,Ub=U.ANCHOR_ERROR__INVALID_PROGRAM_ID=3008,Db=U.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=3009,Hb=U.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=3010,zb=U.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=3011,Fb=U.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=3012,Kb=U.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=3013,qb=U.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=3014,Vb=U.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=3015,$b=U.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=3016,Wb=U.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=3017,Gb=U.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=4100,jb=U.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=4101,Zb=U.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=4102;k_=U.ANCHOR_ERROR__DEPRECATED=5e3;var lk=new Set(["debug-logs"]),Yb=new Map;function fk(n){if(!lk.has(n))throw new Error("Invalid feature");Yb.set(n,!0)}function _d(n){return Yb.get(n)!==void 0}var hk=Object.freeze({__proto__:null,set:fk,isSet:_d}),Pn=class extends Error{constructor(e){super(e),this.name="IdlError"}},vs=class n{constructor(e){this.stack=e}static parse(e){var t;let r=/^Program (\w*) invoke/,i=/^Program \w* success/,s=[];for(let o=0;o<e.length;o++){if(i.exec(e[o])){s.pop();continue}let a=(t=r.exec(e[o]))===null||t===void 0?void 0:t[1];a&&s.push(new Be.PublicKey(a))}return new n(s)}},iu=class n extends Error{constructor(e,t,r,i,s,o){super(r.join(`
`).replace("Program log: ","")),this.errorLogs=r,this.logs=i,this.error={errorCode:e,errorMessage:t,comparedValues:o,origin:s},this._programErrorStack=vs.parse(i)}static parse(e){if(!e)return null;let t=e.findIndex(_=>_.startsWith("Program log: AnchorError"));if(t===-1)return null;let r=e[t],i=[r],s;if(t+1<e.length){if(e[t+1]==="Program log: Left:"){let _=/^Program log: (.*)$/,g=_.exec(e[t+2])[1],E=_.exec(e[t+4])[1];s=[new Be.PublicKey(g),new Be.PublicKey(E)],i.push(...e.slice(t+1,t+5))}else if(e[t+1].startsWith("Program log: Left:")){let _=/^Program log: (Left|Right): (.*)$/,g=_.exec(e[t+1])[2],E=_.exec(e[t+2])[2];i.push(...e.slice(t+1,t+3)),s=[g,E]}}let a=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),f=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),m=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r);if(a){let[_,g,E]=a.slice(1,4),S={code:_,number:parseInt(g)};return new n(S,E,i,e,void 0,s)}else if(f){let[_,g,E,S,k]=f.slice(1,6),O={code:E,number:parseInt(S)},L={file:_,line:parseInt(g)};return new n(O,k,i,e,L,s)}else if(m){let[_,g,E,S]=m.slice(1,5),k=_,O={code:g,number:parseInt(E)};return new n(O,S,i,e,k,s)}else return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}},su=class n extends Error{constructor(e,t,r){super(),this.code=e,this.msg=t,this.logs=r,r&&(this._programErrorStack=vs.parse(r))}static parse(e,t){let r=e.toString(),i;if(r.includes("custom program error:")){let a=r.split("custom program error: ");if(a.length!==2)return null;i=a[1]}else{let a=r.match(/"Custom":([0-9]+)}/g);if(!a||a.length>1)return null;i=a[0].match(/([0-9]+)/g)[0]}let s;try{s=parseInt(i)}catch{return null}let o=t.get(s);return o!==void 0?new n(s,o,e.logs):(o=Xb.get(s),o!==void 0?new n(s,o,e.logs):null)}get program(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack}toString(){return this.msg}};function bd(n,e){_d("debug-logs")&&console.log("Translating error:",n);let t=iu.parse(n.logs);if(t)return t;let r=su.parse(n,e);if(r)return r;if(n.logs){let i={get:function(s,o){return o==="programErrorStack"?s.programErrorStack.stack:o==="program"?s.programErrorStack.stack[n.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return n.programErrorStack=vs.parse(n.logs),new Proxy(n,i)}return n}var Q={InstructionMissing:T_,InstructionFallbackNotFound:O_,InstructionDidNotDeserialize:N_,InstructionDidNotSerialize:B_,IdlInstructionStub:C_,IdlInstructionInvalidProgram:M_,IdlAccountNotEmpty:L_,EventInstructionStub:P_,ConstraintMut:U_,ConstraintHasOne:D_,ConstraintSigner:H_,ConstraintRaw:z_,ConstraintOwner:F_,ConstraintRentExempt:K_,ConstraintSeeds:q_,ConstraintExecutable:V_,ConstraintState:$_,ConstraintAssociated:W_,ConstraintAssociatedInit:G_,ConstraintClose:j_,ConstraintAddress:Z_,ConstraintZero:Y_,ConstraintTokenMint:X_,ConstraintTokenOwner:J_,ConstraintMintMintAuthority:Q_,ConstraintMintFreezeAuthority:eb,ConstraintMintDecimals:tb,ConstraintSpace:nb,ConstraintAccountIsNone:rb,ConstraintTokenTokenProgram:ib,ConstraintMintTokenProgram:sb,ConstraintAssociatedTokenTokenProgram:ob,ConstraintMintGroupPointerExtension:ab,ConstraintMintGroupPointerExtensionAuthority:cb,ConstraintMintGroupPointerExtensionGroupAddress:ub,ConstraintMintGroupMemberPointerExtension:lb,ConstraintMintGroupMemberPointerExtensionAuthority:fb,ConstraintMintGroupMemberPointerExtensionMemberAddress:hb,ConstraintMintMetadataPointerExtension:db,ConstraintMintMetadataPointerExtensionAuthority:pb,ConstraintMintMetadataPointerExtensionMetadataAddress:yb,ConstraintMintCloseAuthorityExtension:gb,ConstraintMintCloseAuthorityExtensionAuthority:mb,ConstraintMintPermanentDelegateExtension:_b,ConstraintMintPermanentDelegateExtensionDelegate:bb,ConstraintMintTransferHookExtension:wb,ConstraintMintTransferHookExtensionAuthority:Eb,ConstraintMintTransferHookExtensionProgramId:Ab,RequireViolated:Rb,RequireEqViolated:I_,RequireKeysEqViolated:vb,RequireNeqViolated:xb,RequireKeysNeqViolated:Sb,RequireGtViolated:Ib,RequireGteViolated:kb,AccountDiscriminatorAlreadySet:Tb,AccountDiscriminatorNotFound:Ob,AccountDiscriminatorMismatch:Nb,AccountDidNotDeserialize:Bb,AccountDidNotSerialize:Cb,AccountNotEnoughKeys:Mb,AccountNotMutable:Lb,AccountOwnedByWrongProgram:Pb,InvalidProgramId:Ub,InvalidProgramExecutable:Db,AccountNotSigner:Hb,AccountNotSystemOwned:zb,AccountNotInitialized:Fb,AccountNotProgramData:Kb,AccountNotAssociatedTokenAccount:qb,AccountSysvarMismatch:Vb,AccountReallocExceedsLimit:$b,AccountDuplicateReallocs:Wb,DeclaredProgramIdMismatch:Gb,TryingToInitPayerAsProgramAccount:jb,InvalidNumericConversion:Zb,Deprecated:k_},Xb=new Map([[Q.InstructionMissing,"8 byte instruction identifier not provided"],[Q.InstructionFallbackNotFound,"Fallback functions are not supported"],[Q.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[Q.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[Q.IdlInstructionStub,"The program was compiled without idl instructions"],[Q.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[Q.IdlAccountNotEmpty,"IDL account must be empty in order to resize, try closing first"],[Q.EventInstructionStub,"The program was compiled without `event-cpi` feature"],[Q.ConstraintMut,"A mut constraint was violated"],[Q.ConstraintHasOne,"A has one constraint was violated"],[Q.ConstraintSigner,"A signer constraint was violated"],[Q.ConstraintRaw,"A raw constraint was violated"],[Q.ConstraintOwner,"An owner constraint was violated"],[Q.ConstraintRentExempt,"A rent exemption constraint was violated"],[Q.ConstraintSeeds,"A seeds constraint was violated"],[Q.ConstraintExecutable,"An executable constraint was violated"],[Q.ConstraintState,"Deprecated Error, feel free to replace with something else"],[Q.ConstraintAssociated,"An associated constraint was violated"],[Q.ConstraintAssociatedInit,"An associated init constraint was violated"],[Q.ConstraintClose,"A close constraint was violated"],[Q.ConstraintAddress,"An address constraint was violated"],[Q.ConstraintZero,"Expected zero account discriminant"],[Q.ConstraintTokenMint,"A token mint constraint was violated"],[Q.ConstraintTokenOwner,"A token owner constraint was violated"],[Q.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[Q.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[Q.ConstraintMintDecimals,"A mint decimals constraint was violated"],[Q.ConstraintSpace,"A space constraint was violated"],[Q.ConstraintAccountIsNone,"A required account for the constraint is None"],[Q.ConstraintTokenTokenProgram,"A token account token program constraint was violated"],[Q.ConstraintMintTokenProgram,"A mint token program constraint was violated"],[Q.ConstraintAssociatedTokenTokenProgram,"An associated token account token program constraint was violated"],[Q.ConstraintMintGroupPointerExtension,"A group pointer extension constraint was violated"],[Q.ConstraintMintGroupPointerExtensionAuthority,"A group pointer extension authority constraint was violated"],[Q.ConstraintMintGroupPointerExtensionGroupAddress,"A group pointer extension group address constraint was violated"],[Q.ConstraintMintGroupMemberPointerExtension,"A group member pointer extension constraint was violated"],[Q.ConstraintMintGroupMemberPointerExtensionAuthority,"A group member pointer extension authority constraint was violated"],[Q.ConstraintMintGroupMemberPointerExtensionMemberAddress,"A group member pointer extension group address constraint was violated"],[Q.ConstraintMintMetadataPointerExtension,"A metadata pointer extension constraint was violated"],[Q.ConstraintMintMetadataPointerExtensionAuthority,"A metadata pointer extension authority constraint was violated"],[Q.ConstraintMintMetadataPointerExtensionMetadataAddress,"A metadata pointer extension metadata address constraint was violated"],[Q.ConstraintMintCloseAuthorityExtension,"A close authority constraint was violated"],[Q.ConstraintMintCloseAuthorityExtensionAuthority,"A close authority extension authority constraint was violated"],[Q.ConstraintMintPermanentDelegateExtension,"A permanent delegate extension constraint was violated"],[Q.ConstraintMintPermanentDelegateExtensionDelegate,"A permanent delegate extension delegate constraint was violated"],[Q.ConstraintMintTransferHookExtension,"A transfer hook extension constraint was violated"],[Q.ConstraintMintTransferHookExtensionAuthority,"A transfer hook extension authority constraint was violated"],[Q.ConstraintMintTransferHookExtensionProgramId,"A transfer hook extension transfer hook program id constraint was violated"],[Q.RequireViolated,"A require expression was violated"],[Q.RequireEqViolated,"A require_eq expression was violated"],[Q.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[Q.RequireNeqViolated,"A require_neq expression was violated"],[Q.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[Q.RequireGtViolated,"A require_gt expression was violated"],[Q.RequireGteViolated,"A require_gte expression was violated"],[Q.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[Q.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[Q.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[Q.AccountDidNotDeserialize,"Failed to deserialize the account"],[Q.AccountDidNotSerialize,"Failed to serialize the account"],[Q.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[Q.AccountNotMutable,"The given account is not mutable"],[Q.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[Q.InvalidProgramId,"Program ID was not as expected"],[Q.InvalidProgramExecutable,"Program account is not executable"],[Q.AccountNotSigner,"The given account did not sign"],[Q.AccountNotSystemOwned,"The given account is not owned by the system program"],[Q.AccountNotInitialized,"The program expected this account to be already initialized"],[Q.AccountNotProgramData,"The given account is not a program data account"],[Q.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[Q.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[Q.AccountReallocExceedsLimit,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[Q.AccountDuplicateReallocs,"The account was duplicated for more than one reallocation"],[Q.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[Q.TryingToInitPayerAsProgramAccount,"You cannot/should not initialize the payer account as a program account"],[Q.InvalidNumericConversion,"The program could not perform the numeric conversion, out of range integral type conversion attempted"],[Q.Deprecated,"The API being used is deprecated and should no longer be used"]]),Or=class n{static fieldLayout(e,t=[],r){let i=e.name;switch(e.type){case"bool":return se.bool(i);case"u8":return se.u8(i);case"i8":return se.i8(i);case"u16":return se.u16(i);case"i16":return se.i16(i);case"u32":return se.u32(i);case"i32":return se.i32(i);case"f32":return se.f32(i);case"u64":return se.u64(i);case"i64":return se.i64(i);case"f64":return se.f64(i);case"u128":return se.u128(i);case"i128":return se.i128(i);case"u256":return se.u256(i);case"i256":return se.i256(i);case"bytes":return se.vecU8(i);case"string":return se.str(i);case"pubkey":return se.publicKey(i);default:{if("option"in e.type)return se.option(n.fieldLayout({type:e.type.option},t,r),i);if("vec"in e.type)return se.vec(n.fieldLayout({type:e.type.vec},t,r),i);if("array"in e.type){let[s,o]=e.type.array;return o=n.resolveArrayLen(o,r),se.array(n.fieldLayout({type:s},t,r),o,i)}if("defined"in e.type){if(!t)throw new Pn("User defined types not provided");let s=e.type.defined.name,o=t.find(a=>a.name===s);if(!o)throw new Pn(`Type not found: ${e.name}`);return n.typeDefLayout({typeDef:o,types:t,genericArgs:r??e.type.defined.generics,name:i})}if("generic"in e.type){let s=r?.at(0);if(s?.kind!=="type")throw new Pn(`Invalid generic field: ${e.name}`);return n.fieldLayout({...e,type:s.type},t)}throw new Pn(`Not yet implemented: ${JSON.stringify(e.type)}`)}}}static typeDefLayout({typeDef:e,types:t,name:r,genericArgs:i}){switch(e.type.kind){case"struct":{let s=As(e.type.fields,()=>[],o=>o.map(a=>{let u=i&&n.resolveGenericArgs({type:a.type,typeDef:e,genericArgs:i});return n.fieldLayout(a,t,u)}),o=>o.map((a,u)=>{let f=i&&n.resolveGenericArgs({type:a,typeDef:e,genericArgs:i});return n.fieldLayout({name:u.toString(),type:a},t,f)}));return se.struct(s,r)}case"enum":{let s=e.type.variants.map(o=>{let a=As(o.fields,()=>[],u=>u.map(f=>{let d=i&&n.resolveGenericArgs({type:f.type,typeDef:e,genericArgs:i});return n.fieldLayout(f,t,d)}),u=>u.map((f,d)=>{let m=i&&n.resolveGenericArgs({type:f,typeDef:e,genericArgs:i});return n.fieldLayout({name:d.toString(),type:f},t,m)}));return se.struct(a,o.name)});return r!==void 0?se.rustEnum(s).replicate(r):se.rustEnum(s,r)}case"type":return n.fieldLayout({type:e.type.alias,name:r},t)}}static typeSize(e,t,r){var i;switch(e){case"bool":return 1;case"u8":return 1;case"i8":return 1;case"i16":return 2;case"u16":return 2;case"u32":return 4;case"i32":return 4;case"f32":return 4;case"u64":return 8;case"i64":return 8;case"f64":return 8;case"u128":return 16;case"i128":return 16;case"u256":return 32;case"i256":return 32;case"bytes":return 1;case"string":return 1;case"pubkey":return 32;default:if("option"in e)return 1+n.typeSize(e.option,t,r);if("coption"in e)return 4+n.typeSize(e.coption,t,r);if("vec"in e)return 1;if("array"in e){let[s,o]=e.array;return o=n.resolveArrayLen(o,r),n.typeSize(s,t,r)*o}if("defined"in e){let s=(i=t.types)===null||i===void 0?void 0:i.find(a=>a.name===e.defined.name);if(!s)throw new Pn(`Type not found: ${JSON.stringify(e)}`);let o=a=>{let u=r??e.defined.generics,f=u&&n.resolveGenericArgs({type:a,typeDef:s,genericArgs:u});return n.typeSize(a,t,f)};switch(s.type.kind){case"struct":return As(s.type.fields,()=>[0],a=>a.map(u=>o(u.type)),a=>a.map(u=>o(u))).reduce((a,u)=>a+u,0);case"enum":{let a=s.type.variants.map(u=>As(u.fields,()=>[0],f=>f.map(d=>o(d.type)),f=>f.map(d=>o(d))).reduce((f,d)=>f+d,0));return Math.max(...a)+1}case"type":return n.typeSize(s.type.alias,t,r)}}if("generic"in e){let s=r?.at(0);if(s?.kind!=="type")throw new Pn(`Invalid generic: ${e.generic}`);return n.typeSize(s.type,t,r)}throw new Error(`Invalid type ${JSON.stringify(e)}`)}}static resolveArrayLen(e,t){if(typeof e=="number")return e;if(t){let r=t.find(i=>i.kind==="const");r?.kind==="const"&&(e=+r.value)}if(typeof e!="number")throw new Pn("Generic array length did not resolve");return e}static resolveGenericArgs({type:e,typeDef:t,genericArgs:r,isDefined:i}){if(typeof e!="object")return null;for(let s in t.generics){let o=t.generics[s];if("generic"in e&&o.name===e.generic)return[r[s]];if("option"in e){let a=n.resolveGenericArgs({type:e.option,typeDef:t,genericArgs:r,isDefined:i});if(!a||!i)return a;if(a[0].kind==="type")return[{kind:"type",type:{option:a[0].type}}]}if("vec"in e){let a=n.resolveGenericArgs({type:e.vec,typeDef:t,genericArgs:r,isDefined:i});if(!a||!i)return a;if(a[0].kind==="type")return[{kind:"type",type:{vec:a[0].type}}]}if("array"in e){let[a,u]=e.array,f=typeof u=="object",d=n.resolveGenericArgs({type:a,typeDef:t,genericArgs:r,isDefined:i});if(d){for(let m in t.generics.slice(+s)){let _=+s+ +m;f&&t.generics[_].name===u.generic&&d.push(r[_])}if(!i)return d;if(d[0].kind==="type"&&d[1].kind==="const")return[{kind:"type",type:{array:[d[0].type,+d[1].value]}}]}if(f&&o.name===u.generic){let m=r[s];return i?[{kind:"type",type:{array:[a,+m.value]}}]:[m]}return null}if("defined"in e)return e.defined.generics?e.defined.generics.flatMap(a=>{switch(a.kind){case"type":return n.resolveGenericArgs({type:a.type,typeDef:t,genericArgs:r,isDefined:!0});case"const":return[a]}}).filter(a=>a!==null):null}return null}},ou=class{constructor(e){this.idl=e;let t=e.instructions.map(i=>{let s=i.name,o=i.args.map(u=>Or.fieldLayout(u,e.types)),a=se.struct(o,s);return[s,{discriminator:i.discriminator,layout:a}]});this.ixLayouts=new Map(t);let r=t.map(([i,{discriminator:s,layout:o}])=>[Pi.default.encode(s),{name:i,layout:o}]);this.sighashLayouts=new Map(r)}encode(e,t){let r=tn.Buffer.alloc(1e3),i=this.ixLayouts.get(e);if(!i)throw new Error(`Unknown method: ${e}`);let s=i.layout.encode(t,r),o=r.slice(0,s);return tn.Buffer.concat([tn.Buffer.from(i.discriminator),o])}decode(e,t="hex"){typeof e=="string"&&(e=t==="hex"?tn.Buffer.from(e,"hex"):Pi.default.decode(e));let r=e.slice(0,Li),i=e.slice(Li),s=this.sighashLayouts.get(Pi.default.encode(r));return s?{name:s.name,data:s.layout.decode(i)}:null}format(e,t){return Mh.format(e,t,this.idl)}},Mh=class n{static format(e,t,r){let i=r.instructions.find(u=>e.name===u.name);if(!i)return console.error("Invalid instruction given"),null;let s=i.args.map(u=>({name:u.name,type:n.formatIdlType(u.type),data:n.formatIdlData(u,e.data[u.name],r.types)})),o=n.flattenIdlAccounts(i.accounts),a=t.map((u,f)=>f<o.length?{name:o[f].name,...u}:{name:void 0,...u});return{args:s,accounts:a}}static formatIdlType(e){if(typeof e=="string")return e;if("option"in e)return`Option<${this.formatIdlType(e.option)}>`;if("coption"in e)return`COption<${this.formatIdlType(e.coption)}>`;if("vec"in e)return`Vec<${this.formatIdlType(e.vec)}>`;if("array"in e)return`Array<${e.array[0]}; ${e.array[1]}>`;if("defined"in e){let t=e.defined.name;if(e.defined.generics){let r=e.defined.generics.map(i=>{switch(i.kind){case"type":return n.formatIdlType(i.type);case"const":return i.value}}).join(", ");return`${t}<${r}>`}return t}throw new Error(`Unknown IDL type: ${e}`)}static formatIdlData(e,t,r){if(typeof e.type=="string")return t.toString();if("vec"in e.type)return"["+t.map(i=>this.formatIdlData({name:"",type:e.type.vec},i,r)).join(", ")+"]";if("option"in e.type)return t===null?"null":this.formatIdlData({name:"",type:e.type.option},t,r);if("defined"in e.type){if(!r)throw new Error("User defined types not provided");let i=e.type.defined.name,s=r.find(o=>o.name===i);if(!s)throw new Error(`Type not found: ${i}`);return n.formatIdlDataDefined(s,t,r)}return"unknown"}static formatIdlDataDefined(e,t,r){switch(e.type.kind){case"struct":return"{ "+As(e.type.fields,()=>"",i=>Object.entries(t).map(([s,o])=>{let a=i.find(u=>u.name===s);if(!a)throw new Error(`Field not found: ${s}`);return s+": "+n.formatIdlData(a,o,r)}).join(", "),i=>Object.entries(t).map(([s,o])=>s+": "+n.formatIdlData({name:"",type:i[s]},o,r)).join(", "))+" }";case"enum":{let i=Object.keys(t)[0],s=e.type.variants.find(a=>a.name===i);if(!s)throw new Error(`Unable to find variant: ${i}`);let o=t[i];return As(s.fields,()=>i,a=>{let u=Object.keys(o).map(f=>{let d=o[f],m=a.find(_=>_.name===f);if(!m)throw new Error(`Field not found: ${f}`);return f+": "+n.formatIdlData(m,d,r)}).join(", ");return`${i} { ${u} }`},a=>{let u=Object.entries(o).map(([f,d])=>f+": "+n.formatIdlData({name:"",type:a[f]},d,r)).join(", ");return`${i} { ${u} }`})}case"type":return n.formatIdlType(e.type.alias)}}static flattenIdlAccounts(e,t){return e.map(r=>{let i=dk(r.name);if(r.hasOwnProperty("accounts")){let s=t?`${t} > ${i}`:i;return n.flattenIdlAccounts(r.accounts,s)}else return{...r,name:t?`${t} > ${i}`:i}}).flat()}};function dk(n){let e=n.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)}var Li=8,au=class{constructor(e){if(this.idl=e,!e.accounts){this.accountLayouts=new Map;return}let t=e.types;if(!t)throw new Error("Accounts require `idl.types`");let r=e.accounts.map(i=>{let s=t.find(o=>o.name===i.name);if(!s)throw new Error(`Account not found: ${i.name}`);return[i.name,Or.typeDefLayout({typeDef:s,types:t})]});this.accountLayouts=new Map(r)}async encode(e,t){let r=tn.Buffer.alloc(1e3),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);let s=i.encode(t,r),o=r.slice(0,s),a=this.accountDiscriminator(e);return tn.Buffer.concat([a,o])}decode(e,t){if(this.accountDiscriminator(e).compare(t.slice(0,Li)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(e,t)}decodeAny(e){let t=e.slice(0,Li),r=Array.from(this.accountLayouts.keys()).find(i=>this.accountDiscriminator(i).equals(t));if(!r)throw new Error("Account not found");return this.decodeUnchecked(r,e)}decodeUnchecked(e,t){let r=t.subarray(Li),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);return i.decode(r)}memcmp(e,t){let r=this.accountDiscriminator(e);return{offset:0,bytes:Pi.default.encode(t?tn.Buffer.concat([r,t]):r)}}size(e){return Li+Or.typeSize({defined:{name:e}},this.idl)}accountDiscriminator(e){var t;let r=(t=this.idl.accounts)===null||t===void 0?void 0:t.find(i=>i.name===e);if(!r)throw new Error(`Account not found: ${e}`);return tn.Buffer.from(r.discriminator)}},cu=class{constructor(e){var t;if(!e.events){this.layouts=new Map;return}let r=e.types;if(!r)throw new Error("Events require `idl.types`");let i=e.events.map(s=>{let o=r.find(a=>a.name===s.name);if(!o)throw new Error(`Event not found: ${s.name}`);return[s.name,Or.typeDefLayout({typeDef:o,types:r})]});this.layouts=new Map(i),this.discriminators=new Map(((t=e.events)!==null&&t!==void 0?t:[]).map(s=>[Oh(tn.Buffer.from(s.discriminator)),s.name]))}decode(e){let t;try{t=hd(e)}catch{return null}let r=Oh(t.slice(0,8)),i=this.discriminators.get(r);if(!i)return null;let s=this.layouts.get(i);if(!s)throw new Error(`Unknown event: ${i}`);return{data:s.decode(t.slice(8)),name:i}}},Lh=class{constructor(e){let t=e.types;if(!t){this.typeLayouts=new Map;return}let r=t.filter(i=>!i.generics).map(i=>[i.name,Or.typeDefLayout({typeDef:i,types:t})]);this.typeLayouts=new Map(r)}encode(e,t){let r=tn.Buffer.alloc(1e3),i=this.typeLayouts.get(e);if(!i)throw new Error(`Unknown type: ${e}`);let s=i.encode(t,r);return r.slice(0,s)}decode(e,t){let r=this.typeLayouts.get(e);if(!r)throw new Error(`Unknown type: ${e}`);return r.decode(t)}},Ho=class{constructor(e){this.instruction=new ou(e),this.accounts=new au(e),this.events=new cu(e),this.types=new Lh(e)}},nn=class{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,r){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){let t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}},bu=nn;function pk(n,e){return e.property?n+"["+e.property+"]":n}var Tr=class extends nn{isCount(){throw new Error("ExternalLayout is abstract")}},uu=class extends Tr{constructor(e,t,r){if(!(e instanceof nn))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof xs||this.layout instanceof lu}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,r){return r===void 0&&(r=0),this.layout.encode(e,t,r+this.offset)}},xs=class extends nn{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,r){return r===void 0&&(r=0),t.writeUIntLE(e,r,this.span),this.span}},lu=class extends nn{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,r){return r===void 0&&(r=0),t.writeUIntBE(e,r,this.span),this.span}},Ph=Math.pow(2,32);function Jb(n){let e=Math.floor(n/Ph),t=n-e*Ph;return{hi32:e,lo32:t}}function Qb(n,e){return n*Ph+e}var Uh=class extends nn{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);let r=e.readUInt32LE(t),i=e.readUInt32LE(t+4);return Qb(i,r)}encode(e,t,r){r===void 0&&(r=0);let i=Jb(e);return t.writeUInt32LE(i.lo32,r),t.writeUInt32LE(i.hi32,r+4),8}},Dh=class extends nn{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);let r=e.readUInt32LE(t),i=e.readInt32LE(t+4);return Qb(i,r)}encode(e,t,r){r===void 0&&(r=0);let i=Jb(e);return t.writeUInt32LE(i.lo32,r),t.writeInt32LE(i.hi32,r+4),8}},Hh=class extends nn{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((s,o)=>s&&o instanceof nn,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&r===void 0&&(r=t,t=void 0);for(let s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let r=0;try{r=this.fields.reduce((i,s)=>{let o=s.getSpan(e,t);return t+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,t){t===void 0&&(t=0);let r=this.makeDestinationObject();for(let i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r){r===void 0&&(r=0);let i=r,s=0,o=0;for(let a of this.fields){let u=a.span;if(o=0<u?u:0,a.property!==void 0){let f=e[a.property];f!==void 0&&(o=a.encode(f,t,r),0>u&&(u=a.getSpan(t,r)))}s=r,r+=u}return s+o-i}fromArray(e){let t=this.makeDestinationObject();for(let r of this.fields)r.property!==void 0&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(let r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}},fu=class{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}},hu=class extends fu{constructor(e,t){if(!(e instanceof Tr&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}},du=class extends nn{constructor(e,t,r){let i=e instanceof xs||e instanceof lu;if(i)e=new hu(new uu(e));else if(e instanceof Tr&&e.isCount())e=new hu(e);else if(!(e instanceof fu))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof nn))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&i&&(s+=e.layout.span)),super(s,r),this.discriminator=e,this.usesPrefixDiscriminator=i,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;let t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(let t in this.registry){let r=this.registry[t];if(e.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(e,t){t===void 0&&(t=0);let r,i=this.discriminator,s=i.decode(e,t),o=this.registry[s];if(o===void 0){let a=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(a=i.layout.span),r=this.makeDestinationObject(),r[i.property]=s,r[o.property]=this.defaultLayout.decode(e,t+a)}else r=o.decode(e,t);return r}encode(e,t,r){r===void 0&&(r=0);let i=this.getSourceVariant(e);if(i===void 0){let s=this.discriminator,o=this.defaultLayout,a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(e[s.property],t,r),a+o.encode(e[o.property],t,r+a)}return i.encode(e,t,r)}addVariant(e,t,r){let i=new zh(this,e,t,r);return this.registry[e]=i,i}getVariant(e,t){let r=e;return Buffer.isBuffer(e)&&(t===void 0&&(t=0),r=this.discriminator.decode(e,t)),this.registry[r]}},zh=class extends nn{constructor(e,t,r,i){if(!(e instanceof du))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof nn))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=r?r.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(e,t+r)}decode(e,t){let r=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r){r===void 0&&(r=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let s=i;if(this.layout&&(this.layout.encode(e[this.property],t,r+i),s+=this.layout.getSpan(t,r+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}},Fh=class extends nn{constructor(e,t){if(!(e instanceof Tr&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof Tr||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t){t===void 0&&(t=0);let r=this.span;return 0>r&&(r=this.length.decode(e,t)),e.slice(t,t+r)}encode(e,t,r){let i=this.length;if(this.length instanceof Tr&&(i=e.length),!(Buffer.isBuffer(e)&&i===e.length))throw new TypeError(pk("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(r+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),r,i,"hex"),this.length instanceof Tr&&this.length.encode(i,t,r),i}},yk=((n,e,t)=>new uu(n,e,t)),gk=(n=>new xs(1,n)),kr=(n=>new xs(4,n)),mk=(n=>new Uh(n)),Nr=(n=>new Dh(n)),Tt=((n,e,t)=>new Hh(n,e,t)),ew=((n,e,t)=>new du(n,e,t)),qo=((n,e)=>new Fh(n,e)),Kh=class{constructor(e){}encode(e,t){switch(e){case"createAccount":return _k(t);case"assign":return bk(t);case"transfer":return wk(t);case"createAccountWithSeed":return Ek(t);case"advanceNonceAccount":return Rk(t);case"withdrawNonceAccount":return vk(t);case"initializeNonceAccount":return Ak(t);case"authorizeNonceAccount":return xk(t);case"allocate":return Sk(t);case"allocateWithSeed":return Ik(t);case"assignWithSeed":return kk(t);case"transferWithSeed":return Tk(t);default:throw new Error(`Invalid instruction: ${e}`)}}encodeState(e,t){throw new Error("System does not have state")}},qh=class extends bu{constructor(e){super(-1,e),this.property=e,this.layout=Tt([kr("length"),kr("lengthPadding"),qo(yk(kr(),-8),"chars")],this.property)}encode(e,t,r=0){if(e==null)return this.layout.span;let i={chars:Buffer.from(e,"utf8")};return this.layout.encode(i,t,r)}decode(e,t=0){return this.layout.decode(e,t).chars.toString()}getSpan(e,t=0){return kr().span+kr().span+new ni.default(new Uint8Array(e).slice(t,t+4),10,"le").toNumber()}};function wu(n){return new qh(n)}function Tn(n){return qo(32,n)}function _k({lamports:n,space:e,owner:t}){return On({createAccount:{lamports:n,space:e,owner:t.toBuffer()}})}function bk({owner:n}){return On({assign:{owner:n.toBuffer()}})}function wk({lamports:n}){return On({transfer:{lamports:n}})}function Ek({base:n,seed:e,lamports:t,space:r,owner:i}){return On({createAccountWithSeed:{base:n.toBuffer(),seed:e,lamports:t,space:r,owner:i.toBuffer()}},Lt.getVariant(3).span+e.length)}function Ak({authorized:n}){return On({initializeNonceAccount:{authorized:n.toBuffer()}})}function Rk({authorized:n}){return On({advanceNonceAccount:{authorized:n.toBuffer()}})}function vk({lamports:n}){return On({withdrawNonceAccount:{lamports:n}})}function xk({authorized:n}){return On({authorizeNonceAccount:{authorized:n.toBuffer()}})}function Sk({space:n}){return On({allocate:{space:n}})}function Ik({base:n,seed:e,space:t,owner:r}){return On({allocateWithSeed:{base:n.toBuffer(),seed:e,space:t,owner:r.toBuffer()}},Lt.getVariant(9).span+e.length)}function kk({base:n,seed:e,owner:t}){return On({assignWithSeed:{base:n.toBuffer(),seed:e,owner:t.toBuffer()}},Lt.getVariant(10).span+e.length)}function Tk({lamports:n,seed:e,owner:t}){return On({transferWithSeed:{lamports:n,seed:e,owner:t.toBuffer()}},Lt.getVariant(11).span+e.length)}var Lt=ew(kr("instruction"));Lt.addVariant(0,Tt([Nr("lamports"),Nr("space"),Tn("owner")]),"createAccount");Lt.addVariant(1,Tt([Tn("owner")]),"assign");Lt.addVariant(2,Tt([Nr("lamports")]),"transfer");Lt.addVariant(3,Tt([Tn("base"),wu("seed"),Nr("lamports"),Nr("space"),Tn("owner")]),"createAccountWithSeed");Lt.addVariant(4,Tt([Tn("authorized")]),"advanceNonceAccount");Lt.addVariant(5,Tt([Nr("lamports")]),"withdrawNonceAccount");Lt.addVariant(6,Tt([Tn("authorized")]),"initializeNonceAccount");Lt.addVariant(7,Tt([Tn("authorized")]),"authorizeNonceAccount");Lt.addVariant(8,Tt([Nr("space")]),"allocate");Lt.addVariant(9,Tt([Tn("base"),wu("seed"),Nr("space"),Tn("owner")]),"allocateWithSeed");Lt.addVariant(10,Tt([Tn("base"),wu("seed"),Tn("owner")]),"assignWithSeed");Lt.addVariant(11,Tt([Nr("lamports"),wu("seed"),Tn("owner")]),"transferWithSeed");function On(n,e){let t=Buffer.alloc(e??Ok),r=Lt.encode(n,t);return e===void 0?t.slice(0,r):t}var Ok=Math.max(...Object.values(Lt.registry).map(n=>n.span)),Vh=class{constructor(e){this.idl=e}async encode(e,t){switch(e){case"nonce":{let r=Buffer.alloc(Be.NONCE_ACCOUNT_LENGTH),i=tw.encode(t,r);return r.slice(0,i)}default:throw new Error(`Invalid account name: ${e}`)}}decode(e,t){return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){switch(e){case"nonce":return Nk(t);default:throw new Error(`Invalid account name: ${e}`)}}memcmp(e,t){switch(e){case"nonce":return{dataSize:Be.NONCE_ACCOUNT_LENGTH};default:throw new Error(`Invalid account name: ${e}`)}}size(e){return Or.typeSize({defined:{name:e}},this.idl)}};function Nk(n){return tw.decode(n)}var $h=class extends bu{constructor(e,t,r,i){super(e.span,i),this.layout=e,this.decoder=t,this.encoder=r}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,r){return this.layout.encode(this.encoder(e),t,r)}getSpan(e,t){return this.layout.getSpan(e,t)}};function m_(n){return new $h(qo(32),e=>new Be.PublicKey(e),e=>e.toBuffer(),n)}var tw=Tt([kr("version"),kr("state"),m_("authorizedPubkey"),m_("nonce"),Tt([mk("lamportsPerSignature")],"feeCalculator")]),Wh=class{constructor(e){}decode(e){throw new Error("System program does not have events")}},Gh=class{constructor(e){}encode(e,t){throw new Error("System does not have user-defined types")}decode(e,t){throw new Error("System does not have user-defined types")}},pu=class{constructor(e){this.instruction=new Kh(e),this.accounts=new Vh(e),this.events=new Wh(e),this.types=new Gh(e)}};function Bk(n){return new TextDecoder().decode(jf(n))}var Ck=Object.freeze({__proto__:null,hash:Bk});function Mk(n,e,t){let r=tn.Buffer.concat([n.toBuffer(),tn.Buffer.from(e),t.toBuffer()]);return new Be.PublicKey(jf(r))}var Lk=Object.freeze({__proto__:null,createWithSeedSync:Mk}),nw=new Be.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),rw=new Be.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");function Pk({mint:n,owner:e}){return Be.PublicKey.findProgramAddressSync([e.toBuffer(),nw.toBuffer(),n.toBuffer()],rw)[0]}var Uk=Object.freeze({__proto__:null,TOKEN_PROGRAM_ID:nw,ASSOCIATED_PROGRAM_ID:rw,associatedAddress:Pk}),jh={exports:{}};(function(n,e){var t=typeof self<"u"?self:ck,r=(function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s})();(function(s){(function(o){var a={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function u(c){return c&&DataView.prototype.isPrototypeOf(c)}if(a.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(c){return c&&f.indexOf(Object.prototype.toString.call(c))>-1};function m(c){if(typeof c!="string"&&(c=String(c)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(c))throw new TypeError("Invalid character in header field name");return c.toLowerCase()}function _(c){return typeof c!="string"&&(c=String(c)),c}function g(c){var h={next:function(){var y=c.shift();return{done:y===void 0,value:y}}};return a.iterable&&(h[Symbol.iterator]=function(){return h}),h}function E(c){this.map={},c instanceof E?c.forEach(function(h,y){this.append(y,h)},this):Array.isArray(c)?c.forEach(function(h){this.append(h[0],h[1])},this):c&&Object.getOwnPropertyNames(c).forEach(function(h){this.append(h,c[h])},this)}E.prototype.append=function(c,h){c=m(c),h=_(h);var y=this.map[c];this.map[c]=y?y+", "+h:h},E.prototype.delete=function(c){delete this.map[m(c)]},E.prototype.get=function(c){return c=m(c),this.has(c)?this.map[c]:null},E.prototype.has=function(c){return this.map.hasOwnProperty(m(c))},E.prototype.set=function(c,h){this.map[m(c)]=_(h)},E.prototype.forEach=function(c,h){for(var y in this.map)this.map.hasOwnProperty(y)&&c.call(h,this.map[y],y,this)},E.prototype.keys=function(){var c=[];return this.forEach(function(h,y){c.push(y)}),g(c)},E.prototype.values=function(){var c=[];return this.forEach(function(h){c.push(h)}),g(c)},E.prototype.entries=function(){var c=[];return this.forEach(function(h,y){c.push([y,h])}),g(c)},a.iterable&&(E.prototype[Symbol.iterator]=E.prototype.entries);function S(c){if(c.bodyUsed)return Promise.reject(new TypeError("Already read"));c.bodyUsed=!0}function k(c){return new Promise(function(h,y){c.onload=function(){h(c.result)},c.onerror=function(){y(c.error)}})}function O(c){var h=new FileReader,y=k(h);return h.readAsArrayBuffer(c),y}function L(c){var h=new FileReader,y=k(h);return h.readAsText(c),y}function M(c){for(var h=new Uint8Array(c),y=new Array(h.length),b=0;b<h.length;b++)y[b]=String.fromCharCode(h[b]);return y.join("")}function C(c){if(c.slice)return c.slice(0);var h=new Uint8Array(c.byteLength);return h.set(new Uint8Array(c)),h.buffer}function $(){return this.bodyUsed=!1,this._initBody=function(c){this._bodyInit=c,c?typeof c=="string"?this._bodyText=c:a.blob&&Blob.prototype.isPrototypeOf(c)?this._bodyBlob=c:a.formData&&FormData.prototype.isPrototypeOf(c)?this._bodyFormData=c:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)?this._bodyText=c.toString():a.arrayBuffer&&a.blob&&u(c)?(this._bodyArrayBuffer=C(c.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(c)||d(c))?this._bodyArrayBuffer=C(c):this._bodyText=c=Object.prototype.toString.call(c):this._bodyText="",this.headers.get("content-type")||(typeof c=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var c=S(this);if(c)return c;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?S(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(O)}),this.text=function(){var c=S(this);if(c)return c;if(this._bodyBlob)return L(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(M(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(H)}),this.json=function(){return this.text().then(JSON.parse)},this}var G=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function q(c){var h=c.toUpperCase();return G.indexOf(h)>-1?h:c}function j(c,h){h=h||{};var y=h.body;if(c instanceof j){if(c.bodyUsed)throw new TypeError("Already read");this.url=c.url,this.credentials=c.credentials,h.headers||(this.headers=new E(c.headers)),this.method=c.method,this.mode=c.mode,this.signal=c.signal,!y&&c._bodyInit!=null&&(y=c._bodyInit,c.bodyUsed=!0)}else this.url=String(c);if(this.credentials=h.credentials||this.credentials||"same-origin",(h.headers||!this.headers)&&(this.headers=new E(h.headers)),this.method=q(h.method||this.method||"GET"),this.mode=h.mode||this.mode||null,this.signal=h.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&y)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(y)}j.prototype.clone=function(){return new j(this,{body:this._bodyInit})};function H(c){var h=new FormData;return c.trim().split("&").forEach(function(y){if(y){var b=y.split("="),A=b.shift().replace(/\+/g," "),v=b.join("=").replace(/\+/g," ");h.append(decodeURIComponent(A),decodeURIComponent(v))}}),h}function V(c){var h=new E,y=c.replace(/\r?\n[\t ]+/g," ");return y.split(/\r?\n/).forEach(function(b){var A=b.split(":"),v=A.shift().trim();if(v){var I=A.join(":").trim();h.append(v,I)}}),h}$.call(j.prototype);function K(c,h){h||(h={}),this.type="default",this.status=h.status===void 0?200:h.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in h?h.statusText:"OK",this.headers=new E(h.headers),this.url=h.url||"",this._initBody(c)}$.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},K.error=function(){var c=new K(null,{status:0,statusText:""});return c.type="error",c};var J=[301,302,303,307,308];K.redirect=function(c,h){if(J.indexOf(h)===-1)throw new RangeError("Invalid status code");return new K(null,{status:h,headers:{location:c}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(h,y){this.message=h,this.name=y;var b=Error(h);this.stack=b.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function w(c,h){return new Promise(function(y,b){var A=new j(c,h);if(A.signal&&A.signal.aborted)return b(new o.DOMException("Aborted","AbortError"));var v=new XMLHttpRequest;function I(){v.abort()}v.onload=function(){var R={status:v.status,statusText:v.statusText,headers:V(v.getAllResponseHeaders()||"")};R.url="responseURL"in v?v.responseURL:R.headers.get("X-Request-URL");var p="response"in v?v.response:v.responseText;y(new K(p,R))},v.onerror=function(){b(new TypeError("Network request failed"))},v.ontimeout=function(){b(new TypeError("Network request failed"))},v.onabort=function(){b(new o.DOMException("Aborted","AbortError"))},v.open(A.method,A.url,!0),A.credentials==="include"?v.withCredentials=!0:A.credentials==="omit"&&(v.withCredentials=!1),"responseType"in v&&a.blob&&(v.responseType="blob"),A.headers.forEach(function(R,p){v.setRequestHeader(p,R)}),A.signal&&(A.signal.addEventListener("abort",I),v.onreadystatechange=function(){v.readyState===4&&A.signal.removeEventListener("abort",I)}),v.send(typeof A._bodyInit>"u"?null:A._bodyInit)})}return w.polyfill=!0,s.fetch||(s.fetch=w,s.Headers=E,s.Request=j,s.Response=K),o.Headers=E,o.Request=j,o.Response=K,o.fetch=w,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e})(jh,jh.exports);var Dk=uk(jh.exports);async function Hk(n,e,t=5){let r=`https://api.apr.dev/api/v0/program/${e.toString()}/latest?limit=${t}`,[i,s]=await Promise.all([iw(n,e),Dk(r)]),o=(await s.json()).filter(u=>!u.aborted&&u.state==="Built"&&u.verified==="Verified");if(o.length===0)return null;let a=o[0];return i.slot.toNumber()!==a.verified_slot?null:a}async function iw(n,e){let t=await n.getAccountInfo(e);if(t===null)throw new Error("program account not found");let{program:r}=Zh(t.data),i=await n.getAccountInfo(r.programdataAddress);if(i===null)throw new Error("program data account not found");let{programData:s}=Zh(i.data);return s}var zk=se.rustEnum([se.struct([],"uninitialized"),se.struct([se.option(se.publicKey(),"authorityAddress")],"buffer"),se.struct([se.publicKey("programdataAddress")],"program"),se.struct([se.u64("slot"),se.option(se.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,se.u32());function Zh(n){return zk.decode(n)}var Fk=Object.freeze({__proto__:null,verifiedBuild:Hk,fetchData:iw,decodeUpgradeableLoaderState:Zh}),Kk=Object.freeze({__proto__:null,sha256:Ck,rpc:ok,publicKey:Lk,bytes:zI,token:Uk,features:hk,registry:Fk});function Vo(n,e){var t,r;let i={},s=n.args?n.args.length:0;if(e.length>s){if(e.length!==s+1)throw new Error(`provided too many arguments ${e} to instruction ${n?.name} expecting: ${(r=(t=n.args)===null||t===void 0?void 0:t.map(o=>o.name))!==null&&r!==void 0?r:[]}`);i=e.pop()}return[e,i]}var Yh=class n{static build(e,t,r){if(e.name==="_inner")throw new Pn("the _inner name is reserved");let i=(...s)=>{let[o,a]=Vo(e,[...s]);dd(e.accounts,a.accounts),qk(e,...s);let u=i.accounts(a.accounts);return a.remainingAccounts!==void 0&&u.push(...a.remainingAccounts),_d("debug-logs")&&console.log("Outgoing account metas:",u),new Be.TransactionInstruction({keys:u,programId:r,data:t(e.name,A_(e,...o))})};return i.accounts=s=>n.accountsArray(s,e.accounts,r,e.name),i}static accountsArray(e,t,r,i){return e?t.map(s=>{if(Es(s)){let d=e[s.name];return n.accountsArray(d,s.accounts,r,i).flat()}let o;try{o=vn(e[s.name])}catch{throw new Error(`Wrong input type for account "${s.name}" in the instruction accounts object${i!==void 0?' for instruction "'+i+'"':""}. Expected PublicKey or string.`)}let a=s.optional&&o.equals(r),u=!!(s.writable&&!a),f=!!(s.signer&&!a);return{pubkey:o,isWritable:u,isSigner:f}}).flat():[]}};function qk(n,...e){}var Xh=class{static build(e,t){return(...i)=>{var s,o,a;let[,u]=Vo(e,[...i]),f=new Be.Transaction;if(u.preInstructions&&u.instructions)throw new Error("instructions is deprecated, use preInstructions");return(s=u.preInstructions)===null||s===void 0||s.forEach(d=>f.add(d)),(o=u.instructions)===null||o===void 0||o.forEach(d=>f.add(d)),f.add(t(...i)),(a=u.postInstructions)===null||a===void 0||a.forEach(d=>f.add(d)),f}}},Jh=class{static build(e,t,r,i){return async(...o)=>{var a;let u=t(...o),[,f]=Vo(e,[...o]);if(i.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await i.sendAndConfirm(u,(a=f.signers)!==null&&a!==void 0?a:[],f.options)}catch(d){throw bd(d,r)}}}},Qh=class{static build(e,t,r,i){var s;return((s=e.accounts)!==null&&s!==void 0?s:[]).reduce((o,a)=>(o[a.name]=new yu(e,a,r,i,t),o),{})}},yu=class{get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}constructor(e,t,r,i,s){this._idlAccount=t,this._programId=r,this._provider=i??Do(),this._coder=s??new Ho(e),this._size=this._coder.accounts.size(t.name)}async fetchNullable(e,t){let{data:r}=await this.fetchNullableAndContext(e,t);return r}async fetchNullableAndContext(e,t){let r=await this.getAccountInfoAndContext(e,t),{value:i,context:s}=r;return{data:i&&i.data.length!==0?this._coder.accounts.decode(this._idlAccount.name,i.data):null,context:s}}async fetch(e,t){let{data:r}=await this.fetchNullableAndContext(e,t);if(r===null)throw new Error(`Account does not exist or has no data ${e.toString()}`);return r}async fetchAndContext(e,t){let{data:r,context:i}=await this.fetchNullableAndContext(e,t);if(r===null)throw new Error(`Account does not exist ${e.toString()}`);return{data:r,context:i}}async fetchMultiple(e,t){return(await this.fetchMultipleAndContext(e,t)).map(i=>i?i.data:null)}async fetchMultipleAndContext(e,t){return(await md(this._provider.connection,e.map(i=>vn(i)),t)).map(i=>{if(i==null)return null;let{account:s,context:o}=i;return{data:this._coder.accounts.decode(this._idlAccount.name,s.data),context:o}})}async all(e){let t=this.coder.accounts.memcmp(this._idlAccount.name,e instanceof Buffer?e:void 0),r=[];return t?.offset!=null&&t?.bytes!=null&&r.push({memcmp:{offset:t.offset,bytes:t.bytes}}),t?.dataSize!=null&&r.push({dataSize:t.dataSize}),(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[...r,...Array.isArray(e)?e:[]]})).map(({pubkey:s,account:o})=>({publicKey:s,account:this._coder.accounts.decode(this._idlAccount.name,o.data)}))}subscribe(e,t){let r=Po.get(e.toString());if(r)return r.ee;let i=new b_.default;e=vn(e);let s=this._provider.connection.onAccountChange(e,o=>{let a=this._coder.accounts.decode(this._idlAccount.name,o.data);i.emit("change",a)},t);return Po.set(e.toString(),{ee:i,listener:s}),i}async unsubscribe(e){let t=Po.get(e.toString());if(!t){console.warn("Address is not subscribed");return}Po&&await this._provider.connection.removeAccountChangeListener(t.listener).then(()=>{Po.delete(e.toString())}).catch(console.error)}async createInstruction(e,t){let r=this.size;if(this._provider.publicKey===void 0)throw new Error("This function requires the Provider interface implementor to have a 'publicKey' field.");return Be.SystemProgram.createAccount({fromPubkey:this._provider.publicKey,newAccountPubkey:e.publicKey,space:t??r,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(t??r),programId:this._programId})}async getAccountInfo(e,t){return await this._provider.connection.getAccountInfo(vn(e),t)}async getAccountInfoAndContext(e,t){return await this._provider.connection.getAccountInfoAndContext(vn(e),t)}},Po=new Map,ed="Program log: ",sw="Program data: ",Vk=ed.length,$k=sw.length,gu=class{constructor(e,t,r){this._programId=e,this._provider=t,this._eventParser=new zo(e,r),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(e,t){var r;let i=this._listenerIdCount;return this._listenerIdCount+=1,this._eventListeners.has(e)||this._eventListeners.set(e,[]),this._eventListeners.set(e,((r=this._eventListeners.get(e))!==null&&r!==void 0?r:[]).concat(i)),this._eventCallbacks.set(i,[e,t]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(s,o)=>{if(!s.err)for(let a of this._eventParser.parseLogs(s.logs)){let u=this._eventListeners.get(a.name);u&&u.forEach(f=>{let d=this._eventCallbacks.get(f);if(d){let[,m]=d;m(a.data,o.slot,s.signature)}})}})),i}async removeEventListener(e){let t=this._eventCallbacks.get(e);if(!t)throw new Error(`Event listener ${e} doesn't exist!`);let[r]=t,i=this._eventListeners.get(r);if(!i)throw new Error(`Event listeners don't exist for ${r}!`);if(this._eventCallbacks.delete(e),i=i.filter(s=>s!==e),this._eventListeners.set(r,i),i.length===0&&this._eventListeners.delete(r),this._eventCallbacks.size===0){if(this._eventListeners.size!==0)throw new Error(`Expected event listeners size to be 0 but got ${this._eventListeners.size}`);this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0)}}},zo=class{constructor(e,t){this.coder=t,this.programId=e}*parseLogs(e,t=!1){let r=new nd(e),i=new td,s=r.next();for(;s!==null;){let[o,a,u]=this.handleLog(i,s,t);o&&(yield o),a&&i.push(a),u&&i.pop(),s=r.next()}}handleLog(e,t,r){return e.stack.length>0&&e.program()===this.programId.toString()?this.handleProgramLog(t,r):[null,...this.handleSystemLog(t)]}handleProgramLog(e,t){if(e.startsWith(ed)||e.startsWith(sw)){let r=e.startsWith(ed)?e.slice(Vk):e.slice($k),i=this.coder.events.decode(r);if(t&&i===null)throw new Error(`Unable to decode event ${r}`);return[i,null,!1]}else return[null,...this.handleSystemLog(e)]}handleSystemLog(e){let t=e.split(":")[0];return t.match(/^Program (.*) success/g)!==null?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}},td=class{constructor(){this.stack=[]}program(){if(!this.stack.length)throw new Error("Expected the stack to have elements");return this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){if(!this.stack.length)throw new Error("Expected the stack to have elements");this.stack.pop()}},nd=class{constructor(e){this.logs=e}next(){if(this.logs.length===0)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}},rd=class{static build(e,t,r,i,s,o,a){return async(...f)=>{var d;let m=t(...f),[,_]=Vo(e,[...f]),g;if(i.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{g=await i.simulate(m,_.signers,(d=_.options)===null||d===void 0?void 0:d.commitment)}catch(k){throw bd(k,r)}if(g===void 0)throw new Error("Unable to simulate transaction");let E=g.logs;if(!E)throw new Error("Simulated logs not found");let S=[];if(a.events){let k=new zo(o,s);for(let O of k.parseLogs(E))S.push(O)}return{events:S,raw:E}}}};function Ih(n){return new mu(qo(8),e=>sd.fromBuffer(e),e=>e.toBuffer(),n)}function eu(n){return new mu(qo(32),e=>new Be.PublicKey(e),e=>e.toBuffer(),n)}function kh(n,e){return new id(n,e)}var mu=class extends bu{constructor(e,t,r,i){super(e.span,i),this.layout=e,this.decoder=t,this.encoder=r}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,r){return this.layout.encode(this.encoder(e),t,r)}getSpan(e,t){return this.layout.getSpan(e,t)}},id=class extends bu{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=kr()}encode(e,t,r=0){return e==null?this.layout.span+this.discriminator.encode(0,t,r):(this.discriminator.encode(1,t,r),this.layout.encode(e,t,r+4)+4)}decode(e,t=0){let r=this.discriminator.decode(e,t);if(r===0)return null;if(r===1)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}},sd=class n extends ni.default{toBuffer(){let e=super.toArray().reverse(),t=Buffer.from(e);if(t.length===8)return t;if(t.length>=8)throw new Error("u64 too large");let r=Buffer.alloc(8);return t.copy(r),r}static fromBuffer(e){if(e.length!==8)throw new Error(`Invalid buffer length: ${e.length}`);return new n([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}},Wk=Tt([eu("mint"),eu("owner"),Ih("amount"),kh(eu(),"delegate"),(n=>{let e=ew(gk("discriminator"),null,n);return e.addVariant(0,Tt([]),"uninitialized"),e.addVariant(1,Tt([]),"initialized"),e.addVariant(2,Tt([]),"frozen"),e})("state"),kh(Ih(),"isNative"),Ih("delegatedAmount"),kh(eu(),"closeAuthority")]);function Gk(n){return Wk.decode(n)}var od=class{constructor(e,t,r,i,s,o,a,u){this._args=e,this._accounts=t,this._provider=r,this._programId=i,this._idlIx=s,this._idlTypes=a,this._customResolver=u,this._accountStore=new ad(r,o,i)}args(e){this._args=e}async resolve(){this.resolveEventCpi(this._idlIx.accounts),this.resolveConst(this._idlIx.accounts);let e=0;for(;await this.resolvePdasAndRelations(this._idlIx.accounts)+await this.resolveCustom()>0;)if(e++,e===16)throw new Error("Reached maximum depth for account resolution")}resolveOptionals(e){Object.assign(this._accounts,this.resolveOptionalsHelper(e,this._idlIx.accounts))}get(e){let t=e.reduce((r,i)=>r&&r[i],this._accounts);if(t&&t.toBase58)return t}set(e,t){let r=this._accounts;e.forEach((i,s)=>{var o;s===e.length-1&&(r[i]=t),r[i]=(o=r[i])!==null&&o!==void 0?o:{},r=r[i]})}resolveOptionalsHelper(e,t){let r={};for(let i of t){let s=i.name,o=e[s];o!==void 0&&(ow(o)?Es(i)?r[s]=this.resolveOptionalsHelper(o,i.accounts):r[s]=aw(o,!0):o!==null?r[s]=vn(o):i.optional&&(r[s]=this._programId))}return r}async resolveCustom(){if(this._customResolver){let{accounts:e,resolved:t}=await this._customResolver({args:this._args,accounts:this._accounts,provider:this._provider,programId:this._programId,idlIx:this._idlIx});return this._accounts=e,t}return 0}resolveEventCpi(e,t=[]){for(let r in e){let i=e[r];Es(i)&&this.resolveEventCpi(i.accounts,[...t,i.name]);let s=+r+1;if(s===e.length)return;let o=e[r].name,a=e[s].name;if(o==="eventAuthority"&&a==="program"){let u=[...t,o],f=[...t,a];this.get(u)||this.set(u,Be.PublicKey.findProgramAddressSync([Buffer.from("__event_authority")],this._programId)[0]),this.get(f)||this.set(f,this._programId);return}}}resolveConst(e,t=[]){for(let r of e){let i=r.name;if(Es(r))this.resolveConst(r.accounts,[...t,i]);else{let s=r;if((s.signer||s.address)&&!this.get([...t,i])){if(s.signer){if(!this._provider.wallet)throw new Error("This function requires the `Provider` interface implementor to have a `wallet` field.");this.set([...t,i],this._provider.wallet.publicKey)}s.address&&this.set([...t,i],vn(s.address))}}}}async resolvePdasAndRelations(e,t=[]){let r=0;for(let i of e){let s=i.name;if(Es(i))r+=await this.resolvePdasAndRelations(i.accounts,[...t,s]);else{let o=i;if((o.pda||o.relations)&&!this.get([...t,s])){r++;try{if(o.pda){let a=await Promise.all(o.pda.seeds.map(d=>this.toBuffer(d,t)));if(a.some(d=>!d))continue;let u=await this.parseProgramId(o,t),[f]=Be.PublicKey.findProgramAddressSync(a,u);this.set([...t,s],f)}}catch{}try{if(o.relations){let a=this.get([...t,o.relations[0]]);if(a){let u=await this._accountStore.fetchAccount({publicKey:a});this.set([...t,s],u[s])}}}catch{}}}}return r}async parseProgramId(e,t=[]){var r;if(!(!((r=e.pda)===null||r===void 0)&&r.program))return this._programId;let i=await this.toBuffer(e.pda.program,t);if(!i)throw new Error(`Program seed not resolved: ${e.name}`);return new Be.PublicKey(i)}async toBuffer(e,t=[]){switch(e.kind){case"const":return this.toBufferConst(e);case"arg":return await this.toBufferArg(e);case"account":return await this.toBufferAccount(e,t);default:throw new Error(`Unexpected seed: ${e}`)}}toBufferConst(e){return this.toBufferValue("bytes",e.value)}async toBufferArg(e){let[t,...r]=e.path.split("."),i=this._idlIx.args.findIndex(a=>a.name===t);if(i===-1)throw new Error(`Unable to find argument for seed: ${t}`);let s=r.reduce((a,u)=>(a??{})[u],this._args[i]);if(s===void 0)return;let o=this.getType(this._idlIx.args[i].type,r);return this.toBufferValue(o,s)}async toBufferAccount(e,t=[]){let[r,...i]=e.path.split("."),s=this.get([...t,r]);if(!s)return;if(!i.length)return this.toBufferValue("pubkey",s);if(!e.account)throw new Error(`Seed account is required in order to resolve type: ${e.path}`);let a=await this._accountStore.fetchAccount({publicKey:s,name:e.account}),u=i;for(;u.length>0;)a=a[u[0]],u=u.slice(1);if(a===void 0)return;let f=this.getType({defined:{name:e.account}},i);return this.toBufferValue(f,a)}toBufferValue(e,t){switch(e){case"u8":case"i8":return Buffer.from([t]);case"u16":case"i16":return new ni.default(t).toArrayLike(Buffer,"le",2);case"u32":case"i32":return new ni.default(t).toArrayLike(Buffer,"le",4);case"u64":case"i64":return new ni.default(t).toArrayLike(Buffer,"le",8);case"u128":case"i128":return new ni.default(t).toArrayLike(Buffer,"le",16);case"u256":case"i256":return new ni.default(t).toArrayLike(Buffer,"le",32);case"string":return Buffer.from(t);case"pubkey":return t.toBuffer();case"bytes":return Buffer.from(t);default:if(e?.array)return Buffer.from(t);throw new Error(`Unexpected seed type: ${e}`)}}getType(e,t=[]){var r;let i=(r=e?.defined)===null||r===void 0?void 0:r.name;if(i){if(i==="tokenAccount")switch(t.at(0)){case"mint":case"owner":return"pubkey";case"amount":case"delagatedAmount":return"u64";default:throw new Error(`Unknown token account path: ${t}`)}let s=this._idlTypes.find(d=>d.name===i);if(!s)throw new Error(`Type not found: ${i}`);let[o,...a]=t,f=s.type.fields.find(d=>d.name===o);if(!f)throw new Error(`Field not found: ${o}`);return this.getType(f.type,a)}return e}},ad=class{constructor(e,t,r){this._provider=e,this._cache=new Map,this._idls={},this._idls[r.toBase58()]=t}async fetchAccount({publicKey:e,name:t}){let r=e.toBase58();if(!this._cache.has(r)){let i=await this._provider.connection.getAccountInfo(e);if(i===null)throw new Error(`Account not found: ${r}`);if(t==="tokenAccount"){let s=Gk(i.data);this._cache.set(r,s)}else{let s=await this.getAccountsNs(i.owner);if(s){let o=Object.values(s)[0];if(o){let a=o.coder.accounts.decodeAny(i.data);this._cache.set(r,a)}}}}return this._cache.get(r)}async getAccountsNs(e){let t=e.toBase58();if(!this._idls[t]){let r=await Ss.fetchIdl(e,this._provider);if(r){let i=new Ss(r,this._provider);this._idls[t]=i.account}}return this._idls[t]}},_u=class{static build(e,t,r,i,s,o,a,u,f,d,m){return(..._)=>new cd(_,i,s,o,a,u,e,t,r,f,d,m)}};function ow(n){return typeof n=="object"&&n!==null&&!("_bn"in n)}function aw(n,e){let t={};for(let r in n){let i=n[r];if(i===null){if(e)throw new Error("Failed to resolve optionals due to IDL type mismatch with input accounts!");continue}t[r]=ow(i)?aw(i,!0):vn(i)}return t}var cd=class{constructor(e,t,r,i,s,o,a,u,f,d,m,_){this._args=e,this._ixFn=t,this._txFn=r,this._rpcFn=i,this._simulateFn=s,this._viewFn=o,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._resolveAccounts=!0,this._accountsResolver=new od(e,this._accounts,a,u,f,d,m,_)}args(e){this._args=e,this._accountsResolver.args(e)}accounts(e){return this.accountsPartial(e)}accountsPartial(e){return this._resolveAccounts=!0,this._accountsResolver.resolveOptionals(e),this}accountsStrict(e){return this._resolveAccounts=!1,this._accountsResolver.resolveOptionals(e),this}signers(e){return this._signers=this._signers.concat(e),this}remainingAccounts(e){return this._remainingAccounts=this._remainingAccounts.concat(e),this}preInstructions(e,t=!1){return t?this._preInstructions=e.concat(this._preInstructions):this._preInstructions=this._preInstructions.concat(e),this}postInstructions(e){return this._postInstructions=this._postInstructions.concat(e),this}async pubkeys(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._accounts}async rpc(e){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async rpcAndKeys(e){return{pubkeys:await this.pubkeys(),signature:await this.rpc(e)}}async view(e){if(this._resolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async simulate(e){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async instruction(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async prepare(){return{instruction:await this.instruction(),pubkeys:await this.pubkeys(),signers:this._signers}}async transaction(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}},ud=class{static build(e,t,r,i){let s=t.accounts.find(u=>u.writable),o=!!t.returns;return s||!o?void 0:async(...u)=>{let f=await r(...u),d=`Program return: ${e} `,m=f.raw.find(S=>S.startsWith(d));if(!m)throw new Error("View expected return log");let _=hd(m.slice(d.length)),g=t.returns;if(!g)throw new Error("View expected return type");return Or.fieldLayout({type:g},i.types).decode(_)}}},ld=class{static build(e,t,r,i,s){let o={},a={},u={},f={},d={},m={},_=E_(e),g=e.accounts?Qh.build(e,t,r,i):{};return e.instructions.forEach(E=>{let S=Yh.build(E,(G,q)=>t.instruction.encode(G,q),r),k=Xh.build(E,S),O=Jh.build(E,k,_,i),L=rd.build(E,k,_,i,t,r,e),M=ud.build(r,E,L,e),C=_u.build(i,r,E,S,k,O,L,M,g,e.types||[],s?.(E)),$=E.name;a[$]=S,u[$]=k,o[$]=O,f[$]=L,d[$]=C,M&&(m[$]=M)}),[o,a,u,g,f,d,m]}},Ss=class n{get programId(){return this._programId}get idl(){return this._idl}get rawIdl(){return this._rawIdl}get coder(){return this._coder}get provider(){return this._provider}constructor(e,t=Do(),r,i){let s=$I(e);this._idl=s,this._rawIdl=e,this._provider=t,this._programId=vn(e.address),this._coder=r??new Ho(s),this._events=new gu(this._programId,t,this._coder);let[o,a,u,f,d,m,_]=ld.build(s,this._coder,this._programId,t,i);this.rpc=o,this.instruction=a,this.transaction=u,this.account=f,this.simulate=d,this.methods=m,this.views=_}static async at(e,t){let r=vn(e),i=await n.fetchIdl(r,t);if(!i)throw new Error(`IDL not found for program: ${e.toString()}`);return new n(i,t)}static async fetchIdl(e,t){t=t??Do();let r=vn(e),i=await FI(r),s=await t.connection.getAccountInfo(i);if(!s)return null;let o=VI(s.data.slice(8)),a=u_(o.data);return JSON.parse(w_(a))}addEventListener(e,t){return this._events.addEventListener(e,t)}async removeEventListener(e){return await this._events.removeEventListener(e)}};new Be.PublicKey("11111111111111111111111111111111");function jk(n){return new Ss(cw,n,Zk())}function Zk(){return new pu(cw)}var cw={address:"11111111111111111111111111111111",metadata:{name:"systemProgram",version:"0.1.0",spec:"0.1.0"},instructions:[{name:"advanceNonceAccount",discriminator:[4,0,0,0],accounts:[{name:"nonce",writable:!0},{name:"recentBlockhashes"},{name:"authorized",signer:!0}],args:[{name:"authorized",type:"pubkey"}]},{name:"allocate",discriminator:[8,0,0,0],accounts:[{name:"pubkey",writable:!0,signer:!0}],args:[{name:"space",type:"u64"}]},{name:"allocateWithSeed",discriminator:[9,0,0,0],accounts:[{name:"account",writable:!0},{name:"base",signer:!0}],args:[{name:"base",type:"pubkey"},{name:"seed",type:"string"},{name:"space",type:"u64"},{name:"owner",type:"pubkey"}]},{name:"assign",discriminator:[1,0,0,0],accounts:[{name:"pubkey",writable:!0,signer:!0}],args:[{name:"owner",type:"pubkey"}]},{name:"assignWithSeed",discriminator:[10,0,0,0],accounts:[{name:"account",writable:!0},{name:"base",signer:!0}],args:[{name:"base",type:"pubkey"},{name:"seed",type:"string"},{name:"owner",type:"pubkey"}]},{name:"authorizeNonceAccount",discriminator:[7,0,0,0],accounts:[{name:"nonce",writable:!0},{name:"authorized",signer:!0}],args:[{name:"authorized",type:"pubkey"}]},{name:"createAccount",discriminator:[0,0,0,0],accounts:[{name:"from",writable:!0,signer:!0},{name:"to",writable:!0,signer:!0}],args:[{name:"lamports",type:"u64"},{name:"space",type:"u64"},{name:"owner",type:"pubkey"}]},{name:"createAccountWithSeed",discriminator:[3,0,0,0],accounts:[{name:"from",writable:!0,signer:!0},{name:"to",writable:!0},{name:"base",signer:!0}],args:[{name:"base",type:"pubkey"},{name:"seed",type:"string"},{name:"lamports",type:"u64"},{name:"space",type:"u64"},{name:"owner",type:"pubkey"}]},{name:"initializeNonceAccount",discriminator:[6,0,0,0],accounts:[{name:"nonce",writable:!0,signer:!0},{name:"recentBlockhashes"},{name:"rent",address:"SysvarRent111111111111111111111111111111111"}],args:[{name:"authorized",type:"pubkey"}]},{name:"transfer",discriminator:[2,0,0,0],accounts:[{name:"from",writable:!0,signer:!0},{name:"to",writable:!0}],args:[{name:"lamports",type:"u64"}]},{name:"transferWithSeed",discriminator:[11,0,0,0],accounts:[{name:"from",writable:!0},{name:"base",signer:!0},{name:"to",writable:!0}],args:[{name:"lamports",type:"u64"},{name:"seed",type:"string"},{name:"owner",type:"pubkey"}]},{name:"withdrawNonceAccount",discriminator:[5,0,0,0],accounts:[{name:"nonce",writable:!0},{name:"to",writable:!0},{name:"recentBlockhashes"},{name:"rent",address:"SysvarRent111111111111111111111111111111111"},{name:"authorized",signer:!0}],args:[{name:"lamports",type:"u64"}]}],accounts:[{name:"nonce",discriminator:[]}],types:[{name:"feeCalculator",type:{kind:"struct",fields:[{name:"lamportsPerSignature",type:"u64"}]}},{name:"nonce",type:{kind:"struct",fields:[{name:"version",type:"u32"},{name:"state",type:"u32"},{name:"authorizedPubkey",type:"pubkey"},{name:"nonce",type:"pubkey"},{name:"feeCalculator",type:{defined:{name:"feeCalculator"}}}]}}]},fd=class{static system(e){return jk(e)}};var GO=wd;})();


// ============================================================
//  SANCTOS PROGRAM RESURRECTOR  real on-chain fallback
// ============================================================
(() => {
  const root = typeof window !== "undefined" ? window : globalThis;
  root.anchor = root.anchor || {};
  const web3 = root.anchor.web3 || root.solanaWeb3;

  if (root.anchor.Program) {
    console.log("[SanctOS]  Real Program already found");
    return;
  }
  if (!web3) {
    console.warn("[SanctOS]  Cannot create fallback Program  no web3");
    return;
  }

  class FallbackProgram {
    constructor(idl, programId, provider) {
      this.idl = idl;
      this.programId = new web3.PublicKey(programId);
      this.provider = provider;

      // proxy for .methods.<instruction>()
      this.methods = new Proxy(
        {},
        {
          get: (_, name) => {
            // resolve instruction metadata if exists
            const ixMeta = this.idl.instructions?.find(i => i.name === name);
            if (!ixMeta) {
              console.warn(`[SanctOS]  Unknown instruction: ${name}`);
            }

            return (...args) => ({
              accounts: (accs) => ({
                rpc: async () => {
                  try {
                    const tx = new web3.Transaction();

                    // Well use a simple no-op instruction if IDL unknown
                    const data = ixMeta
                      ? new TextEncoder().encode(ixMeta.name)
                      : new TextEncoder().encode("noop");

                    const keys = Object.entries(accs || {}).map(([k, v]) => ({
                      pubkey: new web3.PublicKey(v),
                      isSigner: false,
                      isWritable: true,
                    }));

                    const ix = new web3.TransactionInstruction({
                      programId: this.programId,
                      keys,
                      data,
                    });

                    tx.add(ix);

                    const sig = await this.provider.connection.sendTransaction(
                      tx,
                      [ ],
                      { skipPreflight: false, preflightCommitment: "confirmed" }
                    );

                    console.log(
                      `[SanctOS]  Sent instruction '${name}' `,
                      sig
                    );
                    return sig;
                  } catch (err) {
                    console.error(
                      `[SanctOS]  Failed to execute '${name}':`,
                      err
                    );
                    throw err;
                  }
                },
              }),
            });
          },
        }
      );
    }
  }

  root.anchor.Program = FallbackProgram;
  console.log("[SanctOS]  Injected fallback Program class (real RPC)");
})();





/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

@noble/hashes/utils.js:
@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/utils.js:
@noble/curves/abstract/modular.js:
@noble/curves/abstract/curve.js:
@noble/curves/abstract/edwards.js:
@noble/curves/abstract/montgomery.js:
@noble/curves/ed25519.js:
@noble/curves/abstract/weierstrass.js:
@noble/curves/_shortw_utils.js:
@noble/curves/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@solana/buffer-layout/lib/Layout.js:
  (**
   * Support for translating between Uint8Array instances and JavaScript
   * native types.
   *
   * {@link module:Layout~Layout|Layout} is the basis of a class
   * hierarchy that associates property names with sequences of encoded
   * bytes.
   *
   * Layouts are supported for these scalar (numeric) types:
   * * {@link module:Layout~UInt|Unsigned integers in little-endian
   *   format} with {@link module:Layout.u8|8-bit}, {@link
   *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
   *   {@link module:Layout.u32|32-bit}, {@link
   *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
   *   format} with {@link module:Layout.u16be|16-bit}, {@link
   *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
   *   {@link module:Layout.u40be|40-bit}, and {@link
   *   module:Layout.u48be|48-bit} representation ranges;
   * * {@link module:Layout~Int|Signed integers in little-endian
   *   format} with {@link module:Layout.s8|8-bit}, {@link
   *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
   *   {@link module:Layout.s32|32-bit}, {@link
   *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~IntBE|Signed integers in big-endian format}
   *   with {@link module:Layout.s16be|16-bit}, {@link
   *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
   *   {@link module:Layout.s40be|40-bit}, and {@link
   *   module:Layout.s48be|48-bit} representation ranges;
   * * 64-bit integral values that decode to an exact (if magnitude is
   *   less than 2^53) or nearby integral Number in {@link
   *   module:Layout.nu64|unsigned little-endian}, {@link
   *   module:Layout.nu64be|unsigned big-endian}, {@link
   *   module:Layout.ns64|signed little-endian}, and {@link
   *   module:Layout.ns64be|unsigned big-endian} encodings;
   * * 32-bit floating point values with {@link
   *   module:Layout.f32|little-endian} and {@link
   *   module:Layout.f32be|big-endian} representations;
   * * 64-bit floating point values with {@link
   *   module:Layout.f64|little-endian} and {@link
   *   module:Layout.f64be|big-endian} representations;
   * * {@link module:Layout.const|Constants} that take no space in the
   *   encoded expression.
   *
   * and for these aggregate types:
   * * {@link module:Layout.seq|Sequence}s of instances of a {@link
   *   module:Layout~Layout|Layout}, with JavaScript representation as
   *   an Array and constant or data-dependent {@link
   *   module:Layout~Sequence#count|length};
   * * {@link module:Layout.struct|Structure}s that aggregate a
   *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
   *   instances, with JavaScript representation as an Object;
   * * {@link module:Layout.union|Union}s that support multiple {@link
   *   module:Layout~VariantLayout|variant layouts} over a fixed
   *   (padded) or variable (not padded) span of bytes, using an
   *   unsigned integer at the start of the data or a separate {@link
   *   module:Layout.unionLayoutDiscriminator|layout element} to
   *   determine which layout to use when interpreting the buffer
   *   contents;
   * * {@link module:Layout.bits|BitStructure}s that contain a sequence
   *   of individual {@link
   *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
   *   16, 24, or 32-bit unsigned integer starting at the least- or
   *   most-significant bit;
   * * {@link module:Layout.cstr|C strings} of varying length;
   * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
   *   module:Layout~Blob#length|length} raw data.
   *
   * All {@link module:Layout~Layout|Layout} instances are immutable
   * after construction, to prevent internal state from becoming
   * inconsistent.
   *
   * @local Layout
   * @local ExternalLayout
   * @local GreedyCount
   * @local OffsetLayout
   * @local UInt
   * @local UIntBE
   * @local Int
   * @local IntBE
   * @local NearUInt64
   * @local NearUInt64BE
   * @local NearInt64
   * @local NearInt64BE
   * @local Float
   * @local FloatBE
   * @local Double
   * @local DoubleBE
   * @local Sequence
   * @local Structure
   * @local UnionDiscriminator
   * @local UnionLayoutDiscriminator
   * @local Union
   * @local VariantLayout
   * @local BitStructure
   * @local BitField
   * @local Boolean
   * @local Blob
   * @local CString
   * @local Constant
   * @local bindConstructorLayout
   * @module Layout
   * @license MIT
   * @author Peter A. Bigot
   * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
   *)

buffer-layout/lib/Layout.js:
  (**
   * Support for translating between Buffer instances and JavaScript
   * native types.
   *
   * {@link module:Layout~Layout|Layout} is the basis of a class
   * hierarchy that associates property names with sequences of encoded
   * bytes.
   *
   * Layouts are supported for these scalar (numeric) types:
   * * {@link module:Layout~UInt|Unsigned integers in little-endian
   *   format} with {@link module:Layout.u8|8-bit}, {@link
   *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
   *   {@link module:Layout.u32|32-bit}, {@link
   *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
   *   format} with {@link module:Layout.u16be|16-bit}, {@link
   *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
   *   {@link module:Layout.u40be|40-bit}, and {@link
   *   module:Layout.u48be|48-bit} representation ranges;
   * * {@link module:Layout~Int|Signed integers in little-endian
   *   format} with {@link module:Layout.s8|8-bit}, {@link
   *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
   *   {@link module:Layout.s32|32-bit}, {@link
   *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~IntBE|Signed integers in big-endian format}
   *   with {@link module:Layout.s16be|16-bit}, {@link
   *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
   *   {@link module:Layout.s40be|40-bit}, and {@link
   *   module:Layout.s48be|48-bit} representation ranges;
   * * 64-bit integral values that decode to an exact (if magnitude is
   *   less than 2^53) or nearby integral Number in {@link
   *   module:Layout.nu64|unsigned little-endian}, {@link
   *   module:Layout.nu64be|unsigned big-endian}, {@link
   *   module:Layout.ns64|signed little-endian}, and {@link
   *   module:Layout.ns64be|unsigned big-endian} encodings;
   * * 32-bit floating point values with {@link
   *   module:Layout.f32|little-endian} and {@link
   *   module:Layout.f32be|big-endian} representations;
   * * 64-bit floating point values with {@link
   *   module:Layout.f64|little-endian} and {@link
   *   module:Layout.f64be|big-endian} representations;
   * * {@link module:Layout.const|Constants} that take no space in the
   *   encoded expression.
   *
   * and for these aggregate types:
   * * {@link module:Layout.seq|Sequence}s of instances of a {@link
   *   module:Layout~Layout|Layout}, with JavaScript representation as
   *   an Array and constant or data-dependent {@link
   *   module:Layout~Sequence#count|length};
   * * {@link module:Layout.struct|Structure}s that aggregate a
   *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
   *   instances, with JavaScript representation as an Object;
   * * {@link module:Layout.union|Union}s that support multiple {@link
   *   module:Layout~VariantLayout|variant layouts} over a fixed
   *   (padded) or variable (not padded) span of bytes, using an
   *   unsigned integer at the start of the data or a separate {@link
   *   module:Layout.unionLayoutDiscriminator|layout element} to
   *   determine which layout to use when interpreting the buffer
   *   contents;
   * * {@link module:Layout.bits|BitStructure}s that contain a sequence
   *   of individual {@link
   *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
   *   16, 24, or 32-bit unsigned integer starting at the least- or
   *   most-significant bit;
   * * {@link module:Layout.cstr|C strings} of varying length;
   * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
   *   module:Layout~Blob#length|length} raw data.
   *
   * All {@link module:Layout~Layout|Layout} instances are immutable
   * after construction, to prevent internal state from becoming
   * inconsistent.
   *
   * @local Layout
   * @local ExternalLayout
   * @local GreedyCount
   * @local OffsetLayout
   * @local UInt
   * @local UIntBE
   * @local Int
   * @local IntBE
   * @local NearUInt64
   * @local NearUInt64BE
   * @local NearInt64
   * @local NearInt64BE
   * @local Float
   * @local FloatBE
   * @local Double
   * @local DoubleBE
   * @local Sequence
   * @local Structure
   * @local UnionDiscriminator
   * @local UnionLayoutDiscriminator
   * @local Union
   * @local VariantLayout
   * @local BitStructure
   * @local BitField
   * @local Boolean
   * @local Blob
   * @local CString
   * @local Constant
   * @local bindConstructorLayout
   * @module Layout
   * @license MIT
   * @author Peter A. Bigot
   * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
   *)

pako/dist/pako.esm.mjs:
  (*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) *)
*/
